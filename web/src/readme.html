<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
 <head><title>README - Introductory notes</title></head>
 <body>
  <table cellpadding=5 width="100%">
    <tr align=left valign=bottom>
     <td align=center valign=middle colspan=3 width="100%"
	 bgcolor="yellow">
      <h1>Free pax utilities</h1>
      <h2>README - Introductory notes</h2>
     </td>
    </tr>

    <tr>

     <td align=left valign=top width="15%" bgcolor="yellow">
      <table align=left>
	<tr><td bgcolor="white"><b>General info</b></td></tr>
	<tr><td><font size=-1>
	   <a href="index.html"><b>Entry page</b></a></p><br>
	  </font></td></tr>
	<tr><td height=5></td></tr>
	<tr><td bgcolor="white"><b>Documentation</b></td></tr>
	<tr><td><font size=-1>
	   <a href="paxutils.html"><b>Manual</b></a><br>
	 </font></td></tr>
	<tr><td height=5></td></tr>
	<tr><td bgcolor="white"><b>Source files</b></td></tr>
	<tr><td><font size=-1>
	   <a href="readme.html"><b>README</b></a><br>
	   <a href="todo.html"><b>TODO</b></a><br>
	   <a href="news.html"><b>NEWS</b></a><br>
	   <a href="thanks.html"><b>Contributors</b></a><br>
	   <a href="../dist/"><b>Browse</b></a><br>
	 </font></td></tr>
	<tr><td height=5></td></tr>
	<tr><td bgcolor="white"><b>Development</b></td></tr>
	<tr><td><font size=-1>
	   <a href="download.html"><b>Download</b></a><br>
	 </font></td></tr>
	<tr><td height=5></td></tr>
	<tr><td bgcolor="white"><b>Various</b></td></tr>
	<tr><td><font size=-1>
	   <a href="thissite.html"><b>This site</b></a><br>
	   <a href="http://www.iro.umontreal.ca/~pinard/index.html"><b>Author's site</b></a><br>
	 </font></td></tr>
      </table>
     </td>

     <td align=left valign=top width="90%">
  <h1>README - Introductory notes</h1>

  <p>Here is version 2.4i for Free <tt><b>pax</b></tt> utilities.  Glance through this
<tt><b>README</b></tt> file before starting configuration.  Make sure you read files
<tt><b>ABOUT-NLS</b></tt> and <tt><b>INSTALL</b></tt> if you are not familiar with them already.
</p>

  <p>The canonical distribution point for this version is either:
</p>

<pre>   <a href="http://www.iro.umontreal.ca/contrib/paxutils/paxutils-2.4i.tar.gz">www.iro.umontreal.ca/contrib/paxutils/paxutils-2.4i.tar.gz</a>
   <a href="ftp://ftp.iro.umontreal.ca/pub/paxutils/paxutils-2.4i.tar.gz">ftp.iro.umontreal.ca/pub/paxutils/paxutils-2.4i.tar.gz</a>
</pre>

  <p>yet the second URL (the FTP one) might disappear one day.  GNU mirrors
usually hold a copy of non-pretest releases, the canonical distribution
points for last such releases (before the merge occurred) are:
</p>

<pre>   <a href="ftp://ftp.gnu.org/pub/gnu/cpio/cpio-2.4.tar.gz">ftp.gnu.org/pub/gnu/cpio/cpio-2.4.tar.gz</a>
   <a href="ftp://ftp.gnu.org/pub/gnu/tar/tar-1.12.shar.gz">ftp.gnu.org/pub/gnu/tar/tar-1.12.shar.gz</a>
   <a href="ftp://ftp.gnu.org/pub/gnu/tar/tar-1.12.tar.gz">ftp.gnu.org/pub/gnu/tar/tar-1.12.tar.gz</a>
</pre>

  <ol>
   <li><h2>Introduction</h2>

   <ol>
    <li><h3>Presentation</h3>

    <p>The <tt><b>paxutils</b></tt> tools, which manage archives of files, are <tt><b>cpio</b></tt>,
<tt><b>pax</b></tt> and <tt><b>tar</b></tt>.  They can save many files together into a single tape
or disk archive, and can restore individual files from the archive.
They collectively include multivolume support, the ability to archive
sparse files, automatic archive compression and decompression, remote
archives, and special features allow for incremental and full backups.
</p>

    <p><tt><b>cpio</b></tt> supports the features of the System V release 4 <tt><b>cpio</b></tt>,
including support for <tt><b>tar</b></tt> archives.  The included <tt><b>tar</b></tt> is derived
from John Gilmore's public domain <tt><b>tar</b></tt>.
</p>

    <p>This package also includes <tt><b>rmt</b></tt>, the remote tape server, and <tt><b>mt</b></tt>, a
tape drive control program; these two programs will only be compiled if
your system supports remote command execution, and tape drive control
operations, respectively.
</p>

    <li><h3>See files</h3>

<pre>ABOUT-NLS   how to customise this program to your language
BACKLOG     summary of pending mail and articles
COPYING     copying conditions
INSTALL     compilation and installation instructions
NEWS        major changes in the current release
README.dos  how to build <tt><b>paxutils</b></tt> for MS-DOS or MS-Windows
THANKS      partial list of contributors
</pre>

    <li><h3>Configure options</h3>

    <p>The default archive devices are <tt><b>stdin</b></tt> on read and <tt><b>stdout</b></tt> on write.
The installer can still override this by presetting <tt><b>DEFAULT_ARCHIVE</b></tt>
in the environment before configuring (the behaviour of `-0-7'
or `-0-7lmh' options in <tt><b>tar</b></tt> are then derived automatically).
Similarly, <tt><b>DEFAULT_BLOCKING</b></tt> can be preset to something else than 20.
</p>

    <p>Besides those configure options documented in files <tt><b>INSTALL</b></tt> and
<tt><b>ABOUT-NLS</b></tt>, a few extra options may be accepted after <tt><b>./configure</b></tt>:
</p>

    <ol>
     <li><h4><tt><b>--with-included-malloc</b></tt>, <tt><b>--without-included-malloc</b></tt></h4>

     <p>to override the automatic choice made by <tt><b>configure</b></tt> about using
included GNU malloc.
</p>

     <li><h4><tt><b>--with-dmalloc</b></tt></h4>

     <p>to trigger a debugging feature for looking at memory management
problems, it pre-requires Gray Watson's package, which is available as
<a href="ftp://ftp.letters.com/src/dmalloc/dmalloc.tar.gz">ftp.letters.com/src/dmalloc/dmalloc.tar.gz</a>.
</p>

    </ol>
    <li><h3>Maintenance tools</h3>

    <p>For comprehensive modifications to <tt><b>paxutils</b></tt>, you might need tools
beyond those used in simple installations.  If not done already, get:
</p>

<pre><a href="ftp://ftp.seindal.dk/pub/rene/gnu/m4-1.4j.tar.gz">ftp.seindal.dk/pub/rene/gnu/m4-1.4j.tar.gz</a>
<a href="ftp://ftp.gnu.org/pub/gnu/autoconf/autoconf-2.12.tar.gz">ftp.gnu.org/pub/gnu/autoconf/autoconf-2.12.tar.gz</a> + PATCHES-AC
<a href="ftp://ftp.gnu.org/pub/gnu/perl/perl-5.003.tar.gz">ftp.gnu.org/pub/gnu/perl/perl-5.003.tar.gz</a>
<a href="ftp://ftp.cygnus.com/pub/tromey/automake-1.3b.tar.gz">ftp.cygnus.com/pub/tromey/automake-1.3b.tar.gz</a>
<a href="ftp://ftp.cygnus.com/pub/home/drepper/gettext-0.10.35.tar.gz">ftp.cygnus.com/pub/home/drepper/gettext-0.10.35.tar.gz</a>
<a href="ftp://ftp.gnu.org/pub/gnu/bison/bison-1.25.tar.gz">ftp.gnu.org/pub/gnu/bison/bison-1.25.tar.gz</a>       + PATCHES-BI
<a href="http://www.ozemail.com.au/~bod/help2man-1.5c.tar.gz">www.ozemail.com.au/~bod/help2man-1.5c.tar.gz</a>
</pre>

    <p>Do not forget applying the `*-PATCHES' files (all officious)
appropriately.  Make sure GNU <tt><b>m4</b></tt> is fully installed before you start
installing Autoconf.  Have Perl installed before Automake.
</p>

    <li><h3>Mailing lists and collaboration</h3>

    <p>If you feel like receiving releases and pretest announcements for
the <tt><b>paxutils</b></tt> package (formerly <tt><b>cpio</b></tt> or <tt><b>tar</b></tt>), send a message to
<a href="mailto:majordomo@iro.umontreal.ca">majordomo@iro.umontreal.ca</a> having, in its body, a line saying:
</p>

<pre>subscribe paxutils-announce
</pre>

    <p>If you rather want to participate actively in discussions, pretesting
and development for <tt><b>paxutils</b></tt>, do just as above, but this time, use:
</p>

<pre>subscribe paxutils-forum
</pre>

    <p>Look into <a href="http://www.iro.umontreal.ca/contrib/paxutils/">www.iro.umontreal.ca/contrib/paxutils/</a> for various
releases, pretests, and related files.  In particular, subdirectory
<tt><b>dist/</b></tt> contains a weekly mirror of the current unpackaged work files,
while subdirectory <tt><b>rmail/</b></tt> contains saved or pending correspondence.
</p>

    <p>Please do <i>not</i> widely redistribute releases having a letter after
the version numbers, as these are meant for pretesting only, and might
not be stable enough for other usages.
</p>

    <li><h3>Report addresses</h3>

    <p>Send bug reports to <tt><b>paxutils-bugs@iro.umontreal.ca</b></tt>.  A bug report is
an adequate description of the problem: your input, what you expected,
what you got, and why this is wrong.  Diffs are welcome, but they only
describe a solution, from which the problem might be uneasy to infer.
If needed, submit actual data files with your report.  Small data
files are preferred.  Big files may sometimes be necessary, but do not
send them to the report address; rather take special arrangement with
the maintainer.
</p>

    <p>Your feedback will help us to make a better and more portable package.
Consider documentation errors as bugs, and report them as such.  If you
develop anything usefully related or have suggestions, let us know
and share your findings by writing at <tt><b>paxutils-forum@iro.umontreal.ca</b></tt>.
</p>

   </ol>
   <li><h2>Installation hints</h2>

   <p>Here are a few hints which might help installing <tt><b>paxutils</b></tt> on some
systems.  Many may be applied by temporary presetting environment
variables while calling <tt><b>./configure</b></tt>.  File <tt><b>INSTALL</b></tt> explains this.
</p>

   <ol>
    <li><h3>Static linking</h3>

    <p>Some platform will, by default, prepare smaller program executable
which depends on shared libraries.  Since these tools may have to be
used for system-level backups and disaster recovery, system builders and
integrators might prefer forcing static linking, which might result in
a bigger executable, but able to work standalone, in situations where
shared libraries are not available.  The way to achieve static linking
varies between systems.  Set LDFLAGS to a value from the table below,
before configuration (see <tt><b>INSTALL</b></tt>).
</p>

<pre>Platform	Compiler	LDFLAGS
</pre>

<pre>(any)		Gnu C		-static
AIX		(vendor)	"-bnso -bI:/lib/syscalls.exp"
HPUX		(vendor)	-Wl,-a,archive
IRIX		(vendor)	-non_shared
OSF		(vendor)	-non_shared
SCO 3.2v5	(vendor)	-dn
Solaris		(vendor)	-Bstatic
SunOS		(vendor)	-Bstatic
</pre>

    <p>A few users manifested the wish that Linux packages, in particular,
offer some kind of statically linked tools for emergency cases.
</p>

    <li><h3>Alternative to <tt><b>rsh</b></tt></h3>

    <p>Finding none of <tt><b>/usr/ucb/rsh</b></tt>, <tt><b>/usr/bin/remsh</b></tt>, <tt><b>/usr/bin/rsh</b></tt>,
<tt><b>/usr/bsd/rsh</b></tt>, <tt><b>/usr/bin/nsh</b></tt> nor <tt><b>/usr/bin/rcmd</b></tt>, the configuration
attempts to select <tt><b>rexec</b></tt> support if possible.  To avoid <tt><b>rexec</b></tt>,
preset RSH to some sensible value (see <tt><b>INSTALL</b></tt>), maybe <tt><b>/usr/bin/ssh</b></tt>.
</p>

    <li><h3>BSD compatibility matters</h3>

    <p>Set LIBS to <tt><b>-lbsd</b></tt> before configuration (see <tt><b>INSTALL</b></tt>) if the linker
complains about undefined <tt><b>valloc</b></tt> (AIX) or <tt><b>bsd_ioctl</b></tt> (Slackware).
Also set CPPFLAGS to <tt><b>-I/usr/include/bsd/sys</b></tt> before configuration to
solve dirent problems (NeXT), or to <tt><b>-I/usr/include/bsd</b></tt> if &lt;sgtty.h&gt;
is not found (Slackware).
</p>

    <li><h3>`union wait' problems</h3>

    <p>Configuration of `union wait' does not always take the best decision.
If you have this problem, edit file <tt><b>config.cache</b></tt> after configuration,
find the line about `pu<i>cv_header_union</i>wait', change <tt><b>yes</b></tt> by <tt><b>no</b></tt>
or vice-versa, then reconfigure again without doing `make distclean'.
</p>

    <li><h3>FreeBSD users -- <tt><b>configure</b></tt> fails</h3>

    <p>It has been reported that <tt><b>configure</b></tt> does not run on FreeBSD 2.1.7,
because of a buggy <tt><b>sh</b></tt>.  It works using <tt><b>bash</b></tt>, however.
</p>

    <li><h3>ISC users -- `S_*' symbols undefined</h3>

    <p>On ISC 4.1mu, POSIX environment, set CFLAGS to <tt><b>-posix</b></tt> and CPPFLAGS to
<tt><b>-D_SYSV3</b></tt> before configuration (see <tt><b>INSTALL</b></tt>).  This will trigger
the definition of a few <tt><b>S_</b></tt> prefixed symbols from &lt;sys/stat.h&gt;.
</p>

    <li><h3>Ultrix users -- broken <tt><b>make</b></tt></h3>

    <p>It seems that Ultrix make does not correctly handle shell commands
having logical connectives in them.  Use <tt><b>s5make</b></tt> if you have it, try
`PROG_ENV=SYSTEM_FIVE make' (works on Ultrix 4.4), or install GNU Make.
</p>

    <li><h3>Failed tests</h3>

    <p>It is expected that `make check' will fail a few tests if your
environment if not fully Unix.  Here are a few more notes.
</p>

    <ol>
     <li><h4>incremen.sh</h4>

     <p>In an NFS environment, lack of synchronisation between machine
clocks might create difficulties to any tool comparing dates and
file timestamps, like <tt><b>tar</b></tt> in incremental dumps.  This has been a
recurrent problem in GNU Makefiles for the last few years.
</p>

    </ol>
   </ol>
   <li><h2>Special topics</h2>

   <p>Here are a few special matters about <tt><b>paxutils</b></tt>, not related to build
matters.  See previous section for such.
</p>

   <ol>
    <li><h3>File attributes</h3>

    <p>About <b>security</b>, it is probable that future releases of <tt><b>tar</b></tt> will
have some behaviour changed.  There are many pending suggestions to
choose from.  Today, extracting an archive not being <tt><b>root</b></tt>, <tt><b>tar</b></tt> will
restore suid/sgid bits on files, even if owned by the extracting user.
<tt><b>root</b></tt> automatically gets a lot of special privileges, <tt><b>-p</b></tt> might
later become required to get them.
</p>

    <p><tt><b>tar</b></tt> does not properly restore symlink attributes.  Various systems
implement flavours of symbolic links showing different behaviour
and properties.  We did not successfully sorted all these out yet.
Currently, the <tt><b>lchown</b></tt> call will be used if available, but that's all.
</p>

    <li><h3>POSIX compliance</h3>

    <p>While the included <tt><b>cpio</b></tt> supports the final POSIX.1 "ustar" <tt><b>tar</b></tt>
format, the included <tt><b>tar</b></tt> implements the 6th draft of the POSIX
1003.1 <tt><b>ustar</b></tt> standard, which is different from the final standard.
<tt><b>cpio</b></tt> knows to recognize the nonstandard "ustar" archives produced by
<tt><b>tar</b></tt>.  This will be progressively corrected over the incoming years.
</p>

    <p>Don't be mislead by the mere existence of the <tt><b>--posix</b></tt> option in
<tt><b>tar</b></tt>.  This option will be more fully implemented in later releases
for producing truly POSIX archives.  <tt><b>paxutils</b></tt> 3.0 will produce POSIX
archives by default, but there is a long way before we get there.
(If you look at the internals, don't take all the extensions you see
for granted, as they are planned to change.)
</p>

    <li><h3>What's next?</h3>

    <p>The <tt><b>BACKLOG</b></tt> file shows a rather approximative priorisation of the
many pending problems and suggestions.  Besides such pending problems
and all other matters listed above, the cleanup will continue and
extend to the general organisation of the code, so to better merge the
<tt><b>cpio</b></tt> and <tt><b>tar</b></tt> algorithms, which were once fully separate.  We also
want to address some long-awaited performance issues (for example:
double buffering) or enhancements (for example: per-file compression).
</p>

   </ol>
   <li><h2>Frequently Asked Questions (mini-FAQ)</h2>

   <ol>
    <li><h3>Q: Why does 1.12 give messages about "trailing garbage ignored"?</h3>

    <p>You most probably see:
</p>

<pre>gzip: stdin: decompression OK, trailing garbage ignored
tar: Child returned status 2
</pre>

    <p>You have padding zeroes in the last tape block, which is normal
and expected.  <tt><b>tar</b></tt> 1.11.8 did not correctly produce such padding,
that is why the above error seemingly <i>appeared</i> in version 1.12.
The <tt><b>gzip</b></tt> <tt><b>man</b></tt> page says: "Exit status is normally 0; if an error
occurs, exit status is 1.  If a warning occurs, exit status is 2.".
Some later <tt><b>gzip</b></tt> will have a correction to silently skip over zeroes.
</p>

    <li><h3>Q: Why isn't there some <tt><b>--bzip2</b></tt> option to <tt><b>tar</b></tt>?</h3>

    <p>I'm trying to not implement new options to <tt><b>tar</b></tt>, when the functionality
is easily obtainable by other means.  One may write `--use=bzip2' to
get an effect similar to various suggested <tt><b>--bzip2</b></tt> options.  This is
longer to write than a short option letter, but single letter options
are a scarce resource, which I treat as such.  Not all hope is lost,
however.  Jean-loup Gailly writes that he is working with the author
of <tt><b>bzip2</b></tt> to integrate a slightly improved version of <tt><b>bzip2</b></tt> inside
<tt><b>zlib.</b></tt>  As <tt><b>paxutils</b></tt> will eventually use <tt><b>zlib</b></tt>, this should give
us <tt><b>bzip2</b></tt> support rather transparently, right over the <tt><b>z</b></tt> option.
Also, <tt><b>z</b></tt> will become optional on extraction, as <tt><b>tar</b></tt> will be made
to automatically recognise when an archive is compressed.  So, we are
going into the proper direction, although progress is admittedly slow.
</p>
   </ol>
  </ol>
     </td>

    </tr>

    <tr align=left valign=bottom>
     <td align=right valign=middle colspan=3 width="100%"
	 bgcolor="yellow">
      Your <a href="mailto:pinard@iro.umontreal.ca">comments</a> are welcome.
     </td>
    </tr>
  </table>
 </body>
</html>
