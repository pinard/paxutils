<html lang="en"><head>
<title>pax Utilities</title>
<meta http-equiv="Content-Type" content="text/html">
</head><body>

<h1><a name="Top"></a></h1>

<p>This file documents <code>pax</code> utilities.  <code>cpio</code>, <code>pax</code>
and <code>tar</code> are tools used to store, backup, and transport files
within archives.  These tools are able to create and extract archives. 
<code>cpio</code> is also able to directly copy many files from one place to
another.  Some accessory tools allow to do basic tape positionning and
handling, either locally or remotely.

<p>Most of the manual, as it stands, specifically describes <code>tar</code>. 
This comes from the fact that it results from a quick merge of a small
<code>cpio</code> document within a relatively bigger <code>tar</code> manual.  It also
account for the fact that <code>tar</code> is currently much more complex than
the other tools.  We expect that such things might tend to reequilibrate
themselves, as time and maintenance goes, as the tools in <code>pax</code>
utilities will influence each other.

<p>This manual documents the release 2.4i of <code>pax</code> utilities.

<ul>
<li><a href="#Introduction">Introduction</a>:                 Introduction

<li><a href="#cpio%20Tutorial">cpio Tutorial</a>:                Tutorial introduction to <code>cpio</code>

<li><a href="#tar%20Tutorial">tar Tutorial</a>:                 Tutorial introduction to <code>tar</code>

<li><a href="#cpio%20invocation">cpio invocation</a>:              Invoking <code>cpio</code>

<li><a href="#pax%20invocation">pax invocation</a>:               Invoking <code>pax</code>

<li><a href="#tar%20invocation">tar invocation</a>:               Invoking <code>tar</code>

<li><a href="#Subcommands">Subcommands</a>:                  <code>tar</code> subcommands

<li><a href="#Choosing">Choosing</a>:                     Choosing files and names for <code>tar</code>

<li><a href="#Formats">Formats</a>:                      Controlling the archive format

<li><a href="#Media">Media</a>:                        Tapes and other archive media

<li><a href="#Backups">Backups</a>:                      Performing backups and restoring files

<li><a href="#All%20options">All options</a>:                  All <code>tar</code> options

<li><a href="#Date%20input%20formats">Date input formats</a>:           Date input formats

<li><a href="#Archive%20format">Archive format</a>:               Format of archive files

<li><a href="#Index">Index</a>:                        Index

<p>--- The Detailed Node Listing ---

<p>Introduction

</p>
<li><a href="#Book%20contents">Book contents</a>:                What this book contains

<li><a href="#Definitions">Definitions</a>:                  Some definitions

<li><a href="#What%20cpio%20does">What cpio does</a>:               What <code>cpio</code> does

<li><a href="#What%20pax%20does">What pax does</a>:                What <code>pax</code> does

<li><a href="#What%20tar%20does">What tar does</a>:                What <code>tar</code> does

<li><a href="#Stylistic%20conventions">Stylistic conventions</a>:        Stylistic conventions

<li><a href="#Authors">Authors</a>:                      <code>tar</code> authors

<li><a href="#Reports">Reports</a>:                      Reporting bugs or suggestions

<p>Tutorial Introduction to <code>tar</code>

</p>
<li><a href="#Assumptions">Assumptions</a>:                  Assumptions this tutorial makes

<li><a href="#Simplified%20invokation">Simplified invokation</a>:        The structure of a <code>tar</code> command

<li><a href="#Basic%20tar%20options">Basic tar options</a>:            <code>tar</code> subcommands and options

<li><a href="#create%20list%20extract%20tutorial">create list extract tutorial</a>:   The three most frequently used subcommands

<li><a href="#file%20verbose%20help">file verbose help</a>:            Three frequently used options

<li><a href="#create%20tutorial">create tutorial</a>:              How to create archives

<li><a href="#list%20tutorial">list tutorial</a>:                How to list archives

<li><a href="#extract%20tutorial">extract tutorial</a>:             How to extract members from an archive

<li><a href="#Looking%20ahead">Looking ahead</a>:                Looking ahead: The rest of this manual

<p>Three Frequently Used Options

</p>
<li><a href="#file%20tutorial">file tutorial</a>:                The <kbd>--file</kbd> option

<li><a href="#verbose%20tutorial">verbose tutorial</a>:             The <kbd>--verbose</kbd> option

<li><a href="#help%20tutorial">help tutorial</a>:                Getting help: Using the <kbd>--help</kbd> option

<p>How to Create Archives

</p>
<li><a href="#prepare%20for%20examples">prepare for examples</a>:         Preparing a practice directory for examples

<li><a href="#Creating%20the%20archive%20tutorial">Creating the archive tutorial</a>:   Creating the archive

<li><a href="#create%20verbose">create verbose</a>:               Running <kbd>--create</kbd> with <kbd>--verbose</kbd>

<li><a href="#Short%20create">Short create</a>:                 Short forms with <kbd>--create</kbd>

<li><a href="#create%20dir%20tutorial">create dir tutorial</a>:          Archiving directories

<p>How to List Archives

</p>
<li><a href="#absolute%20tutorial">absolute tutorial</a>:            Specifying member names correctly

<li><a href="#Listing%20directories">Listing directories</a>:          Listing the contents of a stored directory

<p>How to Extract Members from an Archive

</p>
<li><a href="#Extracting%20archives">Extracting archives</a>:          Extracting an entire archive

<li><a href="#Extracting%20files">Extracting files</a>:             Extracting specific files

<li><a href="#Extracting%20directories">Extracting directories</a>:       Extracting files that are directories

<li><a href="#Failing%20commands">Failing commands</a>:             Commands that will fail

<li><a href="#Two%20mistakes">Two mistakes</a>:                 Two dangerous mistakes

<p>Invoking <code>cpio</code>

</p>
<li><a href="#Copy-out%20mode">Copy-out mode</a>:                Copy-out mode

<li><a href="#Copy-in%20mode">Copy-in mode</a>:                 Copy-in mode

<li><a href="#Copy-pass%20mode">Copy-pass mode</a>:               Copy-pass mode

<li><a href="#cpio%20Options">cpio Options</a>:                 Options for <code>cpio</code>

<p>Invoking <code>tar</code>

</p>
<li><a href="#Synopsis">Synopsis</a>:                     General synopsis of <code>tar</code>

<li><a href="#Using%20options">Using options</a>:                Using <code>tar</code> options

<li><a href="#Styles">Styles</a>:                       The three option styles

<li><a href="#Documentation%20and%20help">Documentation and help</a>:       Documentation and troubleshooting

<li><a href="#interactive">interactive</a>:                  Asking for confirmation during subcommands

<p>The Three Option Styles

</p>
<li><a href="#Long%20options">Long options</a>:                 Long option style

<li><a href="#Short%20options">Short options</a>:                Short option style

<li><a href="#Old%20style">Old style</a>:                    Old option style

<li><a href="#Mixing">Mixing</a>:                       Mixing option styles

<p>Documentation and Troubleshooting

</p>
<li><a href="#version">version</a>:                      Knowing the <code>tar</code> version

<li><a href="#help">help</a>:                         Getting help: Using the <kbd>--help</kbd> option

<li><a href="#verbose">verbose</a>:                      The <kbd>--verbose</kbd> option

<li><a href="#checkpoint">checkpoint</a>:                   Being warned of all directories

<li><a href="#show-omitted-dirs">show-omitted-dirs</a>:            Being warned of skipped directories

<li><a href="#totals">totals</a>:                       Sizeing the amount of data written

<li><a href="#block-number">block-number</a>:                 Adding physical addresses to messages

<p><code>tar</code> Subcommands

<p>
</p>
<li><a href="#list">list</a>:                         How to list archives

<li><a href="#extract">extract</a>:                      How to extract members from an archive

<li><a href="#create">create</a>:                       The three most frequently used subcommands

<li><a href="#Applications">Applications</a>:                 Other uses for <code>tar</code>

<p>How to List Archives

</p>
<li><a href="#Reading">Reading</a>:                      Options to help read archives

<li><a href="#compare">compare</a>:                      Comparing members with the file system

<p>Options to Help Read Archives

</p>
<li><a href="#read-full-records">read-full-records</a>:            Reading full records

<li><a href="#ignore-zeros">ignore-zeros</a>:                 Ignoring blocks of zeros

<li><a href="#ignore-failed-read">ignore-failed-read</a>:           Ignoring read failures

<p>How to Extract Members from an Archive

</p>
<li><a href="#extract%20options">extract options</a>:              Options used for extraction

<li><a href="#Writing">Writing</a>:                      Changing how <code>tar</code> writes files

<li><a href="#Preventing%20overwrite">Preventing overwrite</a>:         Options to prevent overwriting files

<li><a href="#Unlinking">Unlinking</a>:                    Options to destroy files

<li><a href="#Attributes">Attributes</a>:                   Handling file attributes

<li><a href="#Scarce">Scarce</a>:                       Coping with scarce resources

<p>Options to Prevent Overwriting Files

</p>
<li><a href="#keep-old-files">keep-old-files</a>:               Keeping old files

<li><a href="#to-stdout">to-stdout</a>:                    Writing to standard output

<li><a href="#backup">backup</a>:                       Backup options

<li><a href="#suffix">suffix</a>:                       Deciding the backup file suffixes

<p>Options to Destroy Files

</p>
<li><a href="#unlink-first">unlink-first</a>:                 Removing files prior to extraction

<li><a href="#recursive-unlink">recursive-unlink</a>:             Removing whole directories

<p>Handling File Attributes

</p>
<li><a href="#touch">touch</a>:                        Setting modification times

<li><a href="#same-owner">same-owner</a>:                   Restoring file ownership

<li><a href="#same-permissions">same-permissions</a>:             Setting access permissions

<li><a href="#no-attributes">no-attributes</a>:                Leaving file attributes alone

<p>Coping with Scarce Resources

</p>
<li><a href="#starting-file">starting-file</a>:                Starting file

<li><a href="#same-order">same-order</a>:                   Same order

<li><a href="#preserve">preserve</a>:                     Preserving permissions and order

<p>How to Create Archives

</p>
<li><a href="#name-prefix">name-prefix</a>:                  Using name prefixes

<li><a href="#atime-preserve">atime-preserve</a>:               Preserving last access time

<li><a href="#remove-files">remove-files</a>:                 Removing files

<li><a href="#append">append</a>:                       How to add files to existing archives

<li><a href="#update">update</a>:                       Updating an archive

<p>How to Add Files to Existing Archives

</p>
<li><a href="#Appending%20files">Appending files</a>:              Appending files to an archive

<li><a href="#Multiple%20files">Multiple files</a>:               Multiple files with the same name

<p>Updating an Archive

</p>
<li><a href="#How%20to%20update">How to update</a>:                How to update members of an archive

<li><a href="#Unsuitability%20of%20update">Unsuitability of update</a>:      Updating does not always work

<p>Other <code>tar</code> Usages

</p>
<li><a href="#concatenate">concatenate</a>:                  Combining archives with <code>tar</code>

<li><a href="#Using%20cat%20with%20archives">Using cat with archives</a>:      Combining archives with <code>cat</code>

<li><a href="#delete">delete</a>:                       Removing archive members from an archive

<p>Combining Archives with <code>tar</code>

</p>
<li><a href="#Using%20cat%20with%20archives">Using cat with archives</a>:      Combining archives with <code>cat</code>

<p>Choosing Files and Names for <code>tar</code>

</p>
<li><a href="#file">file</a>:                         Three frequently used options

<li><a href="#Selecting%20Archive%20Members">Selecting Archive Members</a>:    Selecting archive members

<li><a href="#Exclusions">Exclusions</a>:                   Excluding files by name

<li><a href="#Time%20criteria">Time criteria</a>:                Time based exclusions

<li><a href="#Walking">Walking</a>:                      Walking through directories

<li><a href="#Relative">Relative</a>:                     Relative notations for file names

<p>Choosing and Naming Archive Files

</p>
<li><a href="#Using%20file">Using file</a>:                   Using the <kbd>--file</kbd> option

<li><a href="#Standard%20archive">Standard archive</a>:             Archive on standard input or output

<li><a href="#lmh">lmh</a>:                          Abbreviating drive and density

<li><a href="#Remote">Remote</a>:                       Accessing a remote drive

<li><a href="#force-local">force-local</a>:                  Inhibiting remote access

<li><a href="#rsh-command">rsh-command</a>:                  Selecting the remote access mechanism

<li><a href="#rmt%20invocation">rmt invocation</a>:               How <code>rmt</code> works

<p>Selecting Archive Members

</p>
<li><a href="#files-from">files-from</a>:                   Reading names from a file

<li><a href="#find%20with%20files-from">find with files-from</a>:         Using <code>find</code> to generate a list of files

<li><a href="#null">null</a>:                         <code>NUL</code> terminated file names

<p>Excluding Files by Name

</p>
<li><a href="#exclude">exclude</a>:                      Excluding some files

<li><a href="#exclude-from">exclude-from</a>:                 Handling a lot of exclusions

<li><a href="#Wildcards">Wildcards</a>:                    Wildcard patterns and matching

<li><a href="#Problems%20with%20exclude">Problems with exclude</a>:        Problems with using the <code>exclude</code> options

<p>Time Based Exclusions

</p>
<li><a href="#after-date">after-date</a>:                   Operating only on new files

<li><a href="#newer-mtime">newer-mtime</a>:                  Operating only on altered files

<p>Walking through Directories

</p>
<li><a href="#no-recursion">no-recursion</a>:                 Descending into directories

<li><a href="#one-file-system">one-file-system</a>:              Crossing filesystem boundaries

<p>Relative Notations for File Names

</p>
<li><a href="#directory">directory</a>:                    Changing the working directory

<li><a href="#absolute-names">absolute-names</a>:               Absolute file names

<p>Controlling the Archive Format

</p>
<li><a href="#Portability">Portability</a>:                  Making <code>tar</code> archives more portable

<li><a href="#Forced%20fields">Forced fields</a>:                Options to preset file attributes

<li><a href="#Compression">Compression</a>:                  Using less space through compression

<li><a href="#Other%20formats">Other formats</a>:                Other non-<code>tar</code> formats

<p>Making <code>tar</code> Archives More Portable

</p>
<li><a href="#Portable%20names">Portable names</a>:               Portable names

<li><a href="#dereference">dereference</a>:                  Symbolic links

<li><a href="#old-archive">old-archive</a>:                  Old V7 archives

<li><a href="#posix">posix</a>:                        <code>tar</code> and POSIX <code>tar</code>

<li><a href="#Checksumming">Checksumming</a>:                 Checksumming problems

<p>Options to Preset File Attributes

</p>
<li><a href="#mode">mode</a>:                         Presetting permissions

<li><a href="#owner">owner</a>:                        Forcing a given owner

<li><a href="#group">group</a>:                        Forcing a given group

<li><a href="#numeric-owner">numeric-owner</a>:                Using numeric owner and group

<p>Using Less Space through Compression

</p>
<li><a href="#Archive%20compression">Archive compression</a>:          Compressing the whole archive

<li><a href="#Member%20compression">Member compression</a>:           Compressing individual members

<p>Compressing the Whole Archive

</p>
<li><a href="#gzip">gzip</a>:                         Using <code>gzip</code> compression

<li><a href="#compress">compress</a>:                     Using <code>compress</code> compression

<li><a href="#use-compress-program">use-compress-program</a>:         Using other compression programs

<p>Compressing Individual Members

</p>
<li><a href="#sparse">sparse</a>:                       Archiving sparse files

<p>Other non-<code>tar</code> formats

</p>
<li><a href="#cpio">cpio</a>:                         Tutorial introduction to <code>cpio</code>

<li><a href="#zip">zip</a>:                          Comparison of <code>tar</code> and <code>zip</code>

<p>Tapes and Other Archive Media

</p>
<li><a href="#Blocking">Blocking</a>:                     Blocking

<li><a href="#Many%20on%20one">Many on one</a>:                  Many archives on one tape

<li><a href="#One%20on%20many">One on many</a>:                  Using multiple tapes

<li><a href="#Being%20careful">Being careful</a>:                Being even more careful

<li><a href="#Other%20tape%20considerations">Other tape considerations</a>:    Other tape considerations

<p>Blocking

</p>
<li><a href="#Blocks%20and%20records">Blocks and records</a>:           Blocks and records

<li><a href="#blocking-factor">blocking-factor</a>:              Setting the blocking factor

<li><a href="#record-size">record-size</a>:                  Setting a record size

<li><a href="#Media%20types">Media types</a>:                  Per-Media blocking considerations

<li><a href="#Reblocking">Reblocking</a>:                   Automatic reblocking

<p>Many Archives on One Tape

</p>
<li><a href="#Tape%20positioning">Tape positioning</a>:             Tape positions and tape marks

<li><a href="#mt%20invocation">mt invocation</a>:                The <code>mt</code> utility

<p>Using Multiple Tapes

</p>
<li><a href="#Multi-volume%20archives">Multi-volume archives</a>:        Archives longer than one tape or disk

<li><a href="#multi-volume">multi-volume</a>:                 Using multi-volume mode

<li><a href="#tape-length">tape-length</a>:                  Announcing the tape length

<li><a href="#info-script">info-script</a>:                  Taking actions at volume switching

<li><a href="#volno-file">volno-file</a>:                   Changing the volume number in prompts

<p>Being Even More Careful

</p>
<li><a href="#label">label</a>:                        Including labels in the archive

<li><a href="#verify">verify</a>:                       Verifying data as it is stored

<li><a href="#Write%20protection">Write protection</a>:             Write protection

<p>Performing Backups and Restoring Files

</p>
<li><a href="#incremental%20listed-incremental">incremental listed-incremental</a>:   The incremental options

<li><a href="#Backup%20levels">Backup levels</a>:                Levels of backups

<li><a href="#Backup%20parameters">Backup parameters</a>:            Setting parameters for backups and restoration

<li><a href="#Scripted%20backups">Scripted backups</a>:             Using the backup scripts

<li><a href="#Scripted%20restoration">Scripted restoration</a>:         Using the restore script

<p>The Incremental Options

</p>
<li><a href="#incremental">incremental</a>:                  The incremental options

<li><a href="#listed-incremental">listed-incremental</a>:           Backing up with a snapshot list

<p>Levels of Backups

</p>
<li><a href="#Full%20dumps">Full dumps</a>:                   Using <code>tar</code> to perform full dumps

<li><a href="#Incremental%20dumps">Incremental dumps</a>:            Using <code>tar</code> to perform incremental dumps

<p>Setting Parameters for Backups and Restoration

</p>
<li><a href="#backup-specs%20example">backup-specs example</a>:         An example text of <code>backup-specs</code>

<li><a href="#Script%20syntax">Script syntax</a>:                Syntax for <code>backup-specs</code>

<p>All <code>tar</code> Options

</p>
<li><a href="#Subcommand%20summary">Subcommand summary</a>:           Subcommands

<li><a href="#Option%20summary">Option summary</a>:               <code>tar</code> options

<li><a href="#Short%20option%20summary">Short option summary</a>:         Short options cross-reference

<p>Date Input Formats

</p>
<li><a href="#General%20date%20syntax">General date syntax</a>:          General date syntax

<li><a href="#Calendar%20date%20item">Calendar date item</a>:           Calendar date item

<li><a href="#Time%20of%20day%20item">Time of day item</a>:             Time of day item

<li><a href="#Timezone%20item">Timezone item</a>:                Timezone item

<li><a href="#Day%20of%20week%20item">Day of week item</a>:             Day of week item

<li><a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>:   Relative item in date strings

<li><a href="#Pure%20numbers%20in%20date%20strings">Pure numbers in date strings</a>:   Pure numbers in date strings

<li><a href="#Authors%20of%20getdate">Authors of getdate</a>:           Authors of <code>getdate</code>

<p>Format of Archive Files

</p>
<li><a href="#tar-h">tar-h</a>:                        The C description of a header block

<li><a href="#Standard%20format">Standard format</a>:              The standard format

<li><a href="#Extended%20format">Extended format</a>:              Extensions to the archive format

</ul>

<p><hr>
Node:Introduction, Next:<a rel=next href="#cpio%20Tutorial">cpio Tutorial</a>, Previous:<a rel=previous href="#Top">Top</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="Introduction">Introduction</a></h1>

<p>Welcome to the <code>pax</code> Utilities manual.  Most tools in this collection
are used to create and manipulate files (<dfn>archives</dfn>), which are actually
collections of many other files.  The utilities provide users with an
organized and systematic method for controlling a large amount of data. 
Other tools are meant to manoeuvre magnetic tapes.

<ul>
<li><a href="#Book%20contents">Book contents</a>:                What this book contains

<li><a href="#Definitions">Definitions</a>:                  Some definitions

<li><a href="#What%20cpio%20does">What cpio does</a>:               What <code>cpio</code> does

<li><a href="#What%20pax%20does">What pax does</a>:                What <code>pax</code> does

<li><a href="#What%20tar%20does">What tar does</a>:                What <code>tar</code> does

<li><a href="#Stylistic%20conventions">Stylistic conventions</a>:        Stylistic conventions

<li><a href="#Authors">Authors</a>:                      <code>tar</code> authors

<li><a href="#Reports">Reports</a>:                      Reporting bugs or suggestions
</ul>

<p><hr>
Node:Book contents, Next:<a rel=next href="#Definitions">Definitions</a>, Previous:<a rel=previous href="#Introduction">Introduction</a>, Up:<a rel=up href="#Introduction">Introduction</a>
<p>

<h2><a name="Book%20contents">What this book contains</a></h2>

<p>This chapter introduces you to various terms that will recur throughout the
book.  It also tells you who has worked on <code>tar</code> and its documentation,
and where you should send bug reports or comments.

<p>The second chapter is a tutorial (see <a href="#tar%20Tutorial">tar Tutorial</a>) which provides a
gentle introduction for people who are new to using <code>tar</code>.  It is meant
to be self-contained, not requiring any reading from subsequent chapters to
make sense.  It moves from topic to topic in a logical, progressive order,
building on information already explained.  The tutorial introduces the
three most frequently used subcommands (<kbd>-create</kbd> (<kbd>-c</kbd>), <kbd>-list</kbd> (<kbd>-t</kbd>),
and <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>)) as well as a few frequently used options.

<p>Each remaining chapter presents everything that needs to be said about
a specific topic.  These, taken altogether, should offer a complete
reference manual for <code>tar</code> (they do not refer to the tutorial chapter). 
The entire book, including the tutorial, assumes that the reader understands
some basic concepts of using a Unix-type operating system.

<p>The third chapter presents <code>tar</code> options and option syntax.  The fourth
chapter presents all <code>tar</code> subcommands, as well as many options more
specifically related to particular <code>tar</code> subcommands.  Other chapters
explain how one chooses files and entry names on which <code>tar</code> operates
and how one selects the format and portability of generated
archives.  The final chapters concentrate on magnetic media used for archiving,
and discuss how backups can be generated and restored.

<p>One appendix (see <a href="#Date%20input%20formats">Date input formats</a>) exists in its entirety in
other GNU manuals, and is mostly self-contained.  Another appendix
(see <a href="#Archive%20format">Archive format</a>), which details the format of the archive file
generated by <code>tar</code>, contains a long quotation taken directly from the
<code>tar</code> sources.

<p><hr>
Node:Definitions, Next:<a rel=next href="#What%20cpio%20does">What cpio does</a>, Previous:<a rel=previous href="#Book%20contents">Book contents</a>, Up:<a rel=up href="#Introduction">Introduction</a>
<p>

<h2><a name="Definitions">Some definitions</a></h2>

<p>The <code>tar</code> program is used to create and manipulate <code>tar</code>
archives.  An <dfn>archive</dfn> is a single file which contains the contents
of many files, while still identifying the name of each file, its
owner, and so forth.<a rel=footnote href="#fn-1"><sup>1</sup></a>  You can use <code>tar</code>
to <dfn>create</dfn> a new archive in a specified directory.

<p>The files inside an archive are called <dfn>members</dfn>.  Within this
manual, we use the term <dfn>file</dfn> to refer only to files accessible in
the normal ways (by <code>ls</code>, <code>cat</code>, and so forth), and the term
<dfn>member</dfn> to refer only to the members of an archive.  Similarly, a
<dfn>file name</dfn> is the name of a file, as it resides in the filesystem,
and a <dfn>member name</dfn> is the name of an archive member within the
archive.

<p>The term <dfn>extraction</dfn> refers to the process of copying an archive
member (or multiple members) into in the filesystem as a file (or files).  Extracting
all the members of an archive is often called <dfn>extracting the
archive</dfn>.  The term <dfn>unpack</dfn> can also be used to refer to the
extraction of many or all the members of an archive.  Extracting an
archive does not destroy the archive's structure, just as creating an
archive does not destroy the copies of the files that exist outside of
the archive.  You may also <dfn>list</dfn> the members in a given archive
(this is often thought of as "printing" them to the standard output,
or the command line), or <dfn>append</dfn> members to a pre-existing archive. 
All of these tasks can be performed using <code>tar</code> subcommands.

<p><hr>
Node:What cpio does, Next:<a rel=next href="#What%20pax%20does">What pax does</a>, Previous:<a rel=previous href="#Definitions">Definitions</a>, Up:<a rel=up href="#Introduction">Introduction</a>
<p>

<h2><a name="What%20cpio%20does">What <code>cpio</code> does</a></h2>

<p>The <code>cpio</code> program copies files into or out of a <code>cpio</code>
or <code>tar</code> archive.  The archive can be another file on the disk,
a magnetic tape, or a pipe.

<p><code>cpio</code> supports the following archive formats: binary, old ASCII,
new ASCII, crc, HPUX binary, HPUX old ASCII, old <code>tar</code>, and POSIX.1
<code>tar</code>.  The <code>tar</code> format is provided for compatibility with the
<code>tar</code> program.  By default, <code>cpio</code> creates binary format archives,
for compatibility with older <code>cpio</code> programs.  When extracting from
archives, <code>cpio</code> automatically recognizes which kind of archive it
is reading and can read archives created on machines with a different
byte-order.

<p><hr>
Node:What pax does, Next:<a rel=next href="#What%20tar%20does">What tar does</a>, Previous:<a rel=previous href="#What%20cpio%20does">What cpio does</a>, Up:<a rel=up href="#Introduction">Introduction</a>
<p>

<h2><a name="What%20pax%20does">What <code>pax</code> does</a></h2>

<p>The <code>pax</code> program is the archiving utility specified and mandated by
POSIX.  It handles <code>cpio</code> or <code>tar</code> archives, using a different
user interface.  This program is not really available yet in <code>pax</code>
utilities: it only received little testing so far, and some required
functionnalities are still to be written.

<p><hr>
Node:What tar does, Next:<a rel=next href="#Stylistic%20conventions">Stylistic conventions</a>, Previous:<a rel=previous href="#What%20pax%20does">What pax does</a>, Up:<a rel=up href="#Introduction">Introduction</a>
<p>

<h2><a name="What%20tar%20does">What <code>tar</code> does</a></h2>

<p>The <code>tar</code> program allows the creation of <code>tar</code>
archives, as well as various other kinds of manipulation.  For example,
you can use <code>tar</code> on previously created archives to extract files,
to store additional files, or to update or list files which were already
stored.

<p>Initially, <code>tar</code> archives were used to store files conveniently on
magnetic tape.  The name <code>tar</code> comes from this use; it stands for
<strong>t</strong>ape <strong>ar</strong>chiver.  Despite the utility's name, <code>tar</code>
can direct its output to other available devices, files, or other programs (using
pipes).  <code>tar</code> can even access remote devices or files (as archives).

<p>You can use <code>tar</code> archives in many ways.  We want to stress a few
of them: storage, backup, and transportation.

<dl>
<dt>Storage
<dd>Often, <code>tar</code> archives are used to store related files for convenient
file transfer over a network.  While preparing it for distribution, software
is often bundled into <code>tar</code> archives, so that all the files relating
to a particular program (or set of related programs) can be transferred
as a single unit.

<p>A magnetic tape can store several files in sequence.  However, the tape
has no names for these files; it only knows their relative position on
the tape.  One way to store several files on one tape and retain their
names is by creating a <code>tar</code> archive.  Even when the basic transfer
mechanism can keep track of names, as FTP can, the nuisance of handling
multiple files, directories, and multiple links makes <code>tar</code>
archives useful.

<p>Archive files are also used for long-term storage.  You can think of
this as transportation from the present into the future.  (It is a
science-fiction idiom that you can move through time as well as in
space; the idea here is that <code>tar</code> can be used to move archives in
all dimensions, even time!)

<br><dt>Backup
<dd>Because the archive created by <code>tar</code> is capable of preserving file
information and directory structure, <code>tar</code> is commonly used for
performing full and incremental backups of disks.  A backup puts a
collection of files (possibly pertaining to many users and
projects) together on a disk or a tape.  This guards against accidental
destruction of the information in those files.  <code>tar</code> has
special features that allow it to be used to make incremental and full
dumps of all the files in a filesystem.

<br><dt>Transportation
<dd>You can create an archive on one system, transfer it to another system,
and extract the contents there.  This allows you to transport a group of
files from one system to another. 
</dl>

<p><hr>
Node:Stylistic conventions, Next:<a rel=next href="#Authors">Authors</a>, Previous:<a rel=previous href="#What%20tar%20does">What tar does</a>, Up:<a rel=up href="#Introduction">Introduction</a>
<p>

<h2><a name="Stylistic%20conventions">Stylistic conventions</a></h2>

<p>Conventionally, <code>tar</code> archives are given names ending with
<code>.tar</code>.  This is not necessary for <code>tar</code> to operate properly,
but this manual follows that convention in order to accustom readers to
it and to make examples clearer.

<p>Often, people refer to <code>tar</code> archives as "<code>tar</code> files", and
archive members as "files" or "entries".  For people familiar with
the operation of <code>tar</code>, this causes no difficulty.  However, in
this manual, we consistently refer to "archives" and "archive
members" to make learning to use <code>tar</code> easier for novice users.

<p>Although long option names are more easily learned and read, short options
are still so widely used that we cannot ignore them.  So that you can become
familiar with both styles at once, this manual usually repeats both the long
(mnemonic) and short (abbreviated) option names whenever referring them,
as well as within examples.  Many options do not have a short version.

<p><hr>
Node:Authors, Next:<a rel=next href="#Reports">Reports</a>, Previous:<a rel=previous href="#Stylistic%20conventions">Stylistic conventions</a>, Up:<a rel=up href="#Introduction">Introduction</a>
<p>

<h2><a name="Authors"><code>tar</code> authors</a></h2>

<p>The <code>tar</code> program in <code>paxutils</code> evolved out of a project
 originally written and maintained by John Gilmore (under
the name <code>PD&nbsp;TAR</code>).  The project started in 1985-08, and was offered
to the FSF in 1985-09 with the agreement that later FSF contributions
to <code>PD&nbsp;TAR</code> were to be public domain rather than copylefted. 
The result was posted to <code>mod.sources</code> in 1986-10.  This version
had the three main subcommands (old and short style options), supported
both V7 format and a draft of P1003, archive compression, remote dumps
(using <code>rsh&nbsp;dd</code> instead of <code>rmt</code>), big blocking, and clean
end-of-file blocks, and was designed to be fast.  Written and initially
debugged on a Sun Workstation running 4.2BSD, <code>PD&nbsp;TAR</code> was
soon ported to Xenix, Unisoft, Vax 4.2BSD, utzoonix, USG, Masscomp,
Minix, and MS-DOS systems (VMS, Mac, Atari, and Amiga were added later). 
Another version was posted to <code>comp.sources.unix</code> in 1987-11, and
was presented on the Sun User Group in 1987-12 as <code>sugtar</code>.

<p>In 1988-02, the FSF asked Jay Fenlason to implement arbitrarily long file
names, append and update subcommands, multi-volume
support, and verify and backup features.  After having received John's
permission to do so in 1988-09, the FSF published a forked, copylefted
version named <code>gnutar</code> in 1990-01.  While <code>PD&nbsp;TAR</code>
continued to evolve
in parallel, unidentified derivatives were distributed separately without
sources, to the point that John decided in 1992-01, as a maintainer, that
the public domain status of <code>PD&nbsp;TAR</code> was <em>unfortunate</em>. 
In 1992-05, John wrote that it had been a mistake.  Later, in 1994-11, John
suggested that we merge <code>PD&nbsp;TAR</code> definitively into <code>gnutar</code>.

<p>The sparse file processing in <code>tar</code>, added for the FSF by Joy Kendall
(1989-06 to 1989-08), has been the subject of much debate, as it directly
conflicts with the POSIX <code>prefix</code> field.<a rel=footnote href="#fn-2"><sup>2</sup></a>

<p>The FSF package has been maintained by Jay Fenlason (1988-02 to 1991-01) and
Michael Bushnell<a rel=footnote href="#fn-3"><sup>3</sup></a> (1991-01 to 1993-03), with occasional interventions
from David J. MacKenzie.  Since 1994-06, Fran&ccedil;ois Pinard has been maintaining it
with the help of numerous and kind users.  Let me stress that <code>tar</code>
is a collective work, and owes much to all those people who reported
problems, offered solutions and other insights, or shared their thoughts
and suggestions.  An impressive, yet only partial, list of those contributors
can be found in the <code>THANKS</code> file from the <code>tar</code> distribution.

<p>Jay Fenlason put together a draft of a <code>tar</code> manual, borrowing notes
from the original <code>man</code> page from John Gilmore.  This draft was
distributed in <code>tar</code> versions 1.04 through 1.10, then withdrawn in
version 1.11, for Michael Bushnell and Amy Gorin to work on a revamped
version meant for the FSF, including a tutorial.  For version 1.11.8,
Fran&ccedil;ois Pinard put a manual together by merging information from
all these sources.  For the FSF, Melissa Weisshaus later started an
overhaul of the manual, and so did Daniel Hagerty.  Another merge yielded
the manual you are now reading.  People contributed to specific aspects,
like Karl Berry for dates,  Eli Zaretskii
for MS-DOS, and surely others.  The title page of this manual
was once a bit crowded with too many authors, so I (Fran&ccedil;ois)
decided for simplicity.  The title page now bears the sole name of John
Gilmore.  I chose to pay that simple tribute to John's involvement behind
the existence of this <code>tar</code>.<a rel=footnote href="#fn-4"><sup>4</sup></a>

<p>The <code>cpio</code> program included in <code>paxutils</code> has been originally
written by Phil Nelson in the summer of 1988, and further maintained by
David MacKenzie up to 1992-11.  John Oleynick took over the <code>cpio</code>
distribution until 1996-01.  Tom Tromey worked on <code>cpio</code> from 1995-10
until 1998-05, that is, until it was merged with <code>tar</code> to create this
<code>paxutils</code> package.  The parts of this manual pertaining to <code>cpio</code>,
including the <code>cpio</code> tutorial, have been written by Robert Carleton.

<p>The <code>pax</code> program was added to the <code>cpio</code> distribution by Tom
Tromey in 1995-10, and was brought into <code>paxutils</code> together with
<code>cpio</code> and <code>mt</code>.

<p><hr>
Node:Reports, Previous:<a rel=previous href="#Authors">Authors</a>, Up:<a rel=up href="#Introduction">Introduction</a>
<p>

<h2><a name="Reports">Reporting bugs or suggestions</a></h2>

<p>If you find problems or have suggestions about this program or manual,
please report them to <a href="mailto:paxutils-bugs@iro.umontreal.ca">paxutils-bugs@iro.umontreal.ca</a>.<a rel=footnote href="#fn-5"><sup>5</sup></a>  You may also write directly, and less
officially, to <a href="mailto:pinard@iro.umontreal.ca">pinard@iro.umontreal.ca</a>.  However, be warned that
bug reports are public by nature; they may be transmitted to other
maintainers or read by people interested in <code>tar</code> development.

<p>A good bug report precisely explains your input, what you expected, what
you got, and why this is wrong: in fact, it should help us (that is,
the maintainer and those helping him) to see through your eyes.  If you
think it might be useful, also send the necessary files and a recipe
for reproducing the problem, carefully explaining what we should look at
and understand.  Even though we prefer small files, large files are sometimes
necessary; please make special, prior arrangements with us in such cases. 
Be aware that some mailers mangle data, so <code>uuencode</code>, <code>shar</code>,
or MIME methods are usually required.

<p>You may expect an acknowledgement for your report soon after we receive it,
and then some more information later, after we have worked on it.  Due to
the difficult nature of many problems and the general work overload, it may take
a long while before you get a definitive reply.  The <code>BACKLOG</code> file,
in the distribution, summarizes all pending mail and reports about <code>tar</code>.

<p>Even though we prefer reports about the latest version of <code>tar</code>, this is
not a strict requirement.  The command <kbd>tar -version</kbd> should tell you
which version you have.  The canonical distribution points for the version
documented in this manual, and the main GNU copy of this distribution, are:

<pre>ftp://ftp.iro.umontreal.ca/pub/tar/tar-2.4i.tar.gz
ftp://ftp.gnu.org/pub/gnu/tar-2.4i.tar.gz
</pre>

<p>You can also get <code>tar</code> from the numerous GNU mirrors around the world. 
At the canonical distribution point, you might sometimes stumble on
prereleases (which should normally not have a GNU copy).  Pretest releases
always have a letter suffixing the version numbers.  Please do <em>not</em>
redistribute these, as they are meant for pretesting only.  You ought to
understand that prereleases might not be as stable as true releases, and
that problems may be expected with them.  You may fetch pretest releases,
of course, but then, you should understand the collaborative spirit of
pretesting.

<p><hr>
Node:cpio Tutorial, Next:<a rel=next href="#tar%20Tutorial">tar Tutorial</a>, Previous:<a rel=previous href="#Introduction">Introduction</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="cpio%20Tutorial">Tutorial introduction to <code>cpio</code></a></h1>

<p>The <code>cpio</code> program performs three primary functions.  Copying files to
an archive, extracting files from an archive, and passing files to another
directory tree.  An archive can be a file on disk, one or more floppy disks,
or one or more tapes.

<p>When creating an archive, <code>cpio</code> takes the list of files to be processed
from the standard input, and then sends the archive to the standard output,
or to the device defined by the <kbd>-F</kbd> option.  See <a href="#Copy-out%20mode">Copy-out mode</a>. 
Usually <code>find</code> or <code>ls</code> is used to provide this list to the
standard input.  In the following example you can see the possibilities
for archiving the contents of a single directory.

<pre>% ls | cpio -ov &gt; directory.cpio
</pre>

<p>The <kbd>-o</kbd> option creates the archive, and the <kbd>-v</kbd> option prints
the names of the files archived as they are added.  Notice that the options
can be put together after a single <code>-</code> or can be placed separately
on the command line.  The <code>&gt;</code> redirects the <code>cpio</code> output to
the file <code>directory.cpio</code>.

<p>If you wanted to archive an entire directory tree, the find command can
provide the file list to <code>cpio</code>:

<pre>% find . -print -depth | cpio -ov &gt; tree.cpio
</pre>

<p>This will take all the files in the current directory, the directories
below and place them in the archive <code>tree.cpio</code>.  Again the <kbd>-o</kbd>
creates an archive, and the <kbd>-v</kbd> option shows you the name of the
files as they are archived.  See <a href="#Copy-out%20mode">Copy-out mode</a>.  Using the <code>.</code>
in the <code>find</code> statement will give you more flexibility when doing
restores, as it will save file names with a relative path vice a hard
wired, absolute path.  The <kbd>-depth</kbd> option forces <code>find</code> to
print of the entries in a directory before printing the directory itself. 
This limits the effects of restrictive directory permissions by printing
the directory entries in a directory before the directory name itself.

<p>Extracting an archive requires a bit more thought because <code>cpio</code>
will not create directories by default.  Another characteristic is that
it will not overwrite existing files unless you tell it to.

<pre>% cpio -iv &lt; directory.cpio
</pre>

<p>This will retrieve the files archived in the file <code>directory.cpio</code>
and place them in the present directory.  The <kbd>-i</kbd> option extracts
the archive and the <kbd>-v</kbd> shows the file names as they are extracted. 
If you are dealing with an archived directory tree, you need to use the
<kbd>-d</kbd> option to create directories as necessary, something like:

<pre>% cpio -idv &lt; tree.cpio
</pre>

<p>This will take the contents of the archive <code>tree.cpio</code> and extract
it to the current directory.  If you try to extract the files on top of
files of the same name that already exist (and have the same or later
modification time) <code>cpio</code> will not extract the file unless told to
do so by the <kbd>-u</kbd> option.  See <a href="#Copy-in%20mode">Copy-in mode</a>.

<p>In copy-pass mode, <code>cpio</code> copies files from one directory tree to
another, combining the copy-out and copy-in steps without actually using
an archive.  It reads the list of files to copy from the standard input;
the directory into which it will copy them is given as a non-option argument. 
See <a href="#Copy-pass%20mode">Copy-pass mode</a>.

<pre>% find . -depth -print0 | cpio --null -pvd new-dir
</pre>

<p>The example shows copying the files of the present directory, and
sub-directories to a new directory called new-dir.  Some new options are the
<kbd>-print0</kbd> available with GNU <code>find</code>, combined with the <kbd>-null</kbd>
option of <code>cpio</code>.  These two options act together to send file names between
find and <code>cpio</code>, even if special characters are embedded in the file names. 
Another is <kbd>-p</kbd>, which tells <code>cpio</code> to pass the files it finds to the
directory <code>new-dir</code>.

<p><hr>
Node:tar Tutorial, Next:<a rel=next href="#cpio%20invocation">cpio invocation</a>, Previous:<a rel=previous href="#cpio%20Tutorial">cpio Tutorial</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="tar%20Tutorial">Tutorial introduction to <code>tar</code></a></h1>

<p>This chapter guides you through some basic examples of three <code>tar</code>
subcommands: <kbd>-create</kbd> (<kbd>-c</kbd>), <kbd>-list</kbd> (<kbd>-t</kbd>), and <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>).  If
you already know how to use some other version of <code>tar</code>, then you
may not need to read this chapter.  This chapter omits most complicated
details about how <code>tar</code> works.

<ul>
<li><a href="#Assumptions">Assumptions</a>:                  Assumptions this tutorial makes

<li><a href="#Simplified%20invokation">Simplified invokation</a>:        The structure of a <code>tar</code> command

<li><a href="#Basic%20tar%20options">Basic tar options</a>:            <code>tar</code> subcommands and options

<li><a href="#create%20list%20extract%20tutorial">create list extract tutorial</a>:   The three most frequently used subcommands

<li><a href="#file%20verbose%20help">file verbose help</a>:            Three frequently used options

<li><a href="#create%20tutorial">create tutorial</a>:              How to create archives

<li><a href="#list%20tutorial">list tutorial</a>:                How to list archives

<li><a href="#extract%20tutorial">extract tutorial</a>:             How to extract members from an archive

<li><a href="#Looking%20ahead">Looking ahead</a>:                Looking ahead: The rest of this manual
</ul>

<p><hr>
Node:Assumptions, Next:<a rel=next href="#Simplified%20invokation">Simplified invokation</a>, Previous:<a rel=previous href="#tar%20Tutorial">tar Tutorial</a>, Up:<a rel=up href="#tar%20Tutorial">tar Tutorial</a>
<p>

<h2><a name="Assumptions">Assumptions this tutorial makes</a></h2>

<p>This chapter is paced to allow beginners to learn about <code>tar</code>
slowly.  At the same time, we will try to cover all the basic aspects of
these three subcommands.  In order to accomplish both of these tasks, we
have made certain assumptions about your knowledge before reading this
manual, and the hardware you will be using:

<ul>
<li>Before you start to work through this tutorial, you should understand
what the terms "archive" and "archive member" mean
(see <a href="#Definitions">Definitions</a>).  In addition, you should understand something
about how Unix-type operating systems work, and you should know how to
use some basic utilities.  For example, you should know how to create,
list, copy, rename, edit, and delete files and directories; how to
change between directories; and how to figure out where you are in the
filesystem.  You should have some basic understanding of directory
structure and how files are named according to which directory they are
in.  You should understand concepts such as standard output and standard
input, what various definitions of the term "argument" mean, the
differences between relative and absolute path names, and the file
permission system.

<li>This manual assumes that you are working from your own home directory
(unless we state otherwise).  In this tutorial, you will create a directory
to practice <code>tar</code> commands in.  When we show path names, we will
assume that those paths are relative to your home directory.  All of my
examples are in a subdirectory of the directory named by that path name;
the subdirectory is called <code>practice</code>.

<li>In general, we show examples of archives which exist on (or can be
written to, or worked with from) a directory on a hard disk.  In most
cases, you could write those archives to, or work with them on, any other
device, such as a tape drive.  However, some of the later examples in
the tutorial and next chapter will not work on tape drives. 
Additionally, working with tapes is much more complicated than working
with hard disks.  For these reasons, the tutorial does not cover working
with tape drives.  See <a href="#Media">Media</a>, for complete information on using
<code>tar</code> archives with tape drives.

</ul>

<p><hr>
Node:Simplified invokation, Next:<a rel=next href="#Basic%20tar%20options">Basic tar options</a>, Previous:<a rel=previous href="#Assumptions">Assumptions</a>, Up:<a rel=up href="#tar%20Tutorial">tar Tutorial</a>
<p>

<h2><a name="Simplified%20invokation">The structure of a <code>tar</code> command</a></h2>

<p>A <code>tar</code> command has this basic structure:

<pre>$ tar <var>subcommand</var> <var>option</var> <var>option</var> <small>...</small> <var>file</var> <var>file</var> <small>...</small>
</pre>

<p>We will explain the various component parts of this command in the
rest of this chapter.  For more detailed information about the
structure of a <code>tar</code> command and how to invoke
<code>tar</code>, please see <a href="#tar%20invocation">tar invocation</a>.

<p><hr>
Node:Basic tar options, Next:<a rel=next href="#create%20list%20extract%20tutorial">create list extract tutorial</a>, Previous:<a rel=previous href="#Simplified%20invokation">Simplified invokation</a>, Up:<a rel=up href="#tar%20Tutorial">tar Tutorial</a>
<p>

<h2><a name="Basic%20tar%20options"><code>tar</code> subcommands and options</a></h2>

<p><code>tar</code> can take a variety of arguments which specify and define
the actions it will have perform on a particular set of files or
an archive.  The arguments to <code>tar</code> fall into one of two classes:
options and non-options.  Options start with one or two dashes (<kbd>-</kbd>),
except for the very first argument following <kbd>tar</kbd> on the command line:
this argument always provides options, even if it does not start with a dash.

<p>Some options fall into a class called <dfn>subcommands</dfn>; exactly one of
these is both allowed and required for any instance of using <code>tar</code>;
you may <em>not</em> specify more than one.  People sometimes speak of them
as <dfn>operating modes</dfn>.  You are in a particular operating mode when you
have specified the subcommand which calls for that mode; there are eight
subcommands in total, and thus there are eight operating modes.

<p>The other arguments fall into the class known as <dfn>options</dfn>.  You are
not required to specify any options, and you are allowed to specify more
than one at a time (depending on the way you are using <code>tar</code> at
that time).  Some options are used so frequently, and are so useful for
helping you type commands more carefully, that they are effectively
"required".  We will discuss them in this chapter.

<p>You can write most of the <code>tar</code> subcommands and options in any of
three forms: long (mnemonic) form, short form, and old style.  Some of
the subcommands and options have no short or "old" forms; however, the
subcommands and options which we will cover in this tutorial have
corresponding abbreviations.    We will indicate those abbreviations appropriately to get
you used to seeing them.  (Note that the "old style" option forms
exist in <code>tar</code> for compatibility with Unix <code>tar</code>.  We
present a full discussion of this way of writing options and subcommands
in <a href="#Old%20style">Old style</a>, and we discuss the other two styles of
writing options in <a href="#Long%20options">Long options</a> and <a href="#Short%20options">Short options</a>.)

<p>In the examples and in the text of this tutorial, we usually use the
long forms of subcommands and options; but the "short" forms produce
the same result and can make typing long <code>tar</code> commands easier. 
For example, instead of typing

<pre>$ <kbd>tar --create --verbose --file=afiles.tar apple angst aspic</kbd>
</pre>

<p>you can type
<pre>$ <kbd>tar -c -v -f afiles.tar apple angst aspic</kbd>
</pre>

<p>or even
<pre>$ <kbd>tar -cvf afiles.tar apple angst aspic</kbd>
</pre>

<p>For more information on option syntax, see <a href="#Styles">Styles</a>.  In
discussions in the text, when we name an option by its long form, we
also give the corresponding short option in parentheses.

<p>The term "option" can be confusing at times, since "subcommands"
are often lumped in with the actual, <em>optional</em> "options" in
certain general class statements.  For example, we just talked about
"short and long forms of options and subcommands".  However,
experienced <code>tar</code> users often refer to these by shorthand terms
such as "short and long forms of options".  This term assumes that
the "subcommands" are included as well.  Context will help you determine
which definition of "options" to use.

<p>Similarly, the term "command" can be confusing, as it is often used in
two different ways.  People sometimes refer to <code>tar</code> "commands". 
The term, <code>tar</code> <dfn>commands</dfn>, refers to the various
<em>subcommands</em>.  However, you will also sometimes hear the term
"the <code>tar</code> command".  When the word "command" is used
specifically like this, a person is usually referring to the whole line,
not the <code>tar</code> <em>subcommand</em>.  Again, use context to figure out
which of the meanings the speaker intends.

<p><hr>
Node:create list extract tutorial, Next:<a rel=next href="#file%20verbose%20help">file verbose help</a>, Previous:<a rel=previous href="#Basic%20tar%20options">Basic tar options</a>, Up:<a rel=up href="#tar%20Tutorial">tar Tutorial</a>
<p>

<h2><a name="create%20list%20extract%20tutorial">The three most frequently used subcommands</a></h2>

<p>Here are the three most frequently used subcommands (both short and long
forms), as well as a brief description of their meanings.  The rest of
this chapter will cover how to use these subcommands in detail.  We will
present the rest of the subcommands in the next chapter.

<dl>
<dt><kbd>-create</kbd> (<kbd>-c</kbd>)
<dd>Create a new <code>tar</code> archive. 
<br><dt><kbd>-list</kbd> (<kbd>-t</kbd>)
<dd>List the contents of an archive. 
<br><dt><kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>)
<dd>Extract one or more members from an archive. 
</dl>

<p><hr>
Node:file verbose help, Next:<a rel=next href="#create%20tutorial">create tutorial</a>, Previous:<a rel=previous href="#create%20list%20extract%20tutorial">create list extract tutorial</a>, Up:<a rel=up href="#tar%20Tutorial">tar Tutorial</a>
<p>

<h2><a name="file%20verbose%20help">Three frequently used options</a></h2>

<p>To understand how to run <code>tar</code> in the three operating modes listed
previously, you also need to understand how to use two of the options to
<code>tar</code>: <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) (which takes an archive file as an argument)
and <kbd>-verbose</kbd> (<kbd>-v</kbd>).  (You are usually not <em>required</em> to specify
either of these options when you run <code>tar</code>, but they can be very
useful in making things more clear and helping you avoid errors.)  A third
option, <kbd>-help</kbd>, gives a brief list of subcommands and options. 
Unlike other <code>tar</code> options, <kbd>-help</kbd> is not run under any
operating mode; in this sense, it is more like a subcommand, except that
it does not act on any <code>tar</code> archive.

<ul>
<li><a href="#file%20tutorial">file tutorial</a>:                The <kbd>--file</kbd> option

<li><a href="#verbose%20tutorial">verbose tutorial</a>:             The <kbd>--verbose</kbd> option

<li><a href="#help%20tutorial">help tutorial</a>:                Getting help: Using the <kbd>--help</kbd> option
</ul>

<p><hr>
Node:file tutorial, Next:<a rel=next href="#verbose%20tutorial">verbose tutorial</a>, Previous:<a rel=previous href="#file%20verbose%20help">file verbose help</a>, Up:<a rel=up href="#file%20verbose%20help">file verbose help</a>
<p>

<h3><a name="file%20tutorial">The <kbd>-file</kbd> option</a></h3>

<p>The <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) option specifies the name of an archive file.

<p>You can specify an argument for the <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) option whenever you
use <code>tar</code>; this option determines the name of the archive file that
<code>tar</code> will work on.

<p>If you don't specify this argument, then <code>tar</code> will use a default,
usually standard output or standard input, or some physical tape drive
attached to your machine.  If there is no tape drive attached, or the
default is not meaningful, then <code>tar</code> will print an error message. 
The error message might look roughly like one of the following:

<pre>tar: can't open /dev/rmt8 : No such device or address
tar: can't open /dev/rsmt0 : I/O error
</pre>

<p>Thus, to avoid this sort of confusion, we recommend that you always
specify an archive file name by using <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) when writing your
<code>tar</code> commands.  For more information on using the <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>)
option, see <a href="#file">file</a>.

<p><hr>
Node:verbose tutorial, Next:<a rel=next href="#help%20tutorial">help tutorial</a>, Previous:<a rel=previous href="#file%20tutorial">file tutorial</a>, Up:<a rel=up href="#file%20verbose%20help">file verbose help</a>
<p>

<h3><a name="verbose%20tutorial">The <kbd>-verbose</kbd> option</a></h3>

<p>The <kbd>-verbose</kbd> (<kbd>-v</kbd>) option shows the files being worked on as <code>tar</code>
is running.

<p><kbd>-verbose</kbd> (<kbd>-v</kbd>) shows details about the results of running
<code>tar</code>.  This can be especially useful when the results might not be
obvious.  For example, if you want to see the progress of <code>tar</code> as
it writes files into the archive, you can use the <kbd>-verbose</kbd> (<kbd>-v</kbd>)
option.  In the beginning, you may find it useful to use
<kbd>-verbose</kbd> (<kbd>-v</kbd>) at all times; when you are more accustomed to
<code>tar</code>, you will likely want to use it at certain times but not at
others.  We will use <kbd>-verbose</kbd> (<kbd>-v</kbd>) at times to help make something
clear, and we will give many examples both using and not using
<kbd>-verbose</kbd> (<kbd>-v</kbd>) to show the differences.

<p>Sometimes, a single instance of <kbd>-verbose</kbd> (<kbd>-v</kbd>) on the command line
will show a full, <code>ls</code>-style listing of an archive or files,
giving sizes, owners, and similar information.  Other times,
<kbd>-verbose</kbd> (<kbd>-v</kbd>) will only show files or members that the particular
subcommand is operating on at the time.  In the latter case, you can
use <kbd>-verbose</kbd> (<kbd>-v</kbd>) twice in a command to get a listing such as that
in the former case.  For example, instead of saying

<pre>$ <kbd>tar -cvf afiles.tar apple angst aspic</kbd>
</pre>

<p>above, you might say

<pre>$ <kbd>tar -cvvf afiles.tar apple angst aspic</kbd>
</pre>

<p>This works equally well using short or long forms of options.  Using long
forms, you would simply write out the option twice, like this:

<pre>$ <kbd>tar --create --verbose --verbose <small>...</small></kbd>
</pre>

<p>Note that you must double the hyphens properly each time.

<p>Later in the tutorial, we will give examples using <kbd>-verbose&nbsp;-verbose</kbd>.

<p><hr>
Node:help tutorial, Previous:<a rel=previous href="#verbose%20tutorial">verbose tutorial</a>, Up:<a rel=up href="#file%20verbose%20help">file verbose help</a>
<p>

<h3><a name="help%20tutorial">Getting help: Using the <kbd>-help</kbd> option</a></h3>

<p>The <kbd>-help</kbd> option to <code>tar</code> prints out a summary list of all
options available for the current version of <code>tar</code> on your system. 
There is no abbreviation for this option.

<p><hr>
Node:create tutorial, Next:<a rel=next href="#list%20tutorial">list tutorial</a>, Previous:<a rel=previous href="#file%20verbose%20help">file verbose help</a>, Up:<a rel=up href="#tar%20Tutorial">tar Tutorial</a>
<p>

<h2><a name="create%20tutorial">How to create archives</a></h2>

<p>One of the basic subcommands of <code>tar</code> is <kbd>-create</kbd> (<kbd>-c</kbd>), which
you use to create a <code>tar</code> archive.  We will explain
<kbd>-create</kbd> (<kbd>-c</kbd>) first because, in order to learn about the other
subcommands, you will find it useful to have an archive available to
practice on.

<p>To make this as easy as possible, you will first create a directory
containing three files (eventually you will create more practice files). 
Then, we will show you how to create an <em>archive</em> (inside the new
directory).  Both the directory and the archive are specifically for
you to practice on.  The rest of this chapter and the next chapter will
show many examples using this directory and the files you will create:
some of those files may be other directories and other archives.

<p>The three files you will archive in this example are called
<code>blues</code>, <code>folk</code>, and <code>jazz</code>.  The archive is called
<code>genres.tar</code>.

<p>This section will proceed slowly, detailing how to use <kbd>-create</kbd> (<kbd>-c</kbd>)
in <code>verbose</code> mode, and showing examples using both short and long
forms.  In the rest of the tutorial, and in the examples in the next
chapter, we will proceed at a slightly quicker pace.  This section moves
slowly so that novice users can begin to understand how <code>tar</code>
works.

<ul>
<li><a href="#prepare%20for%20examples">prepare for examples</a>:         Preparing a practice directory for examples

<li><a href="#Creating%20the%20archive%20tutorial">Creating the archive tutorial</a>:   Creating the archive

<li><a href="#create%20verbose">create verbose</a>:               Running <kbd>--create</kbd> with <kbd>--verbose</kbd>

<li><a href="#Short%20create">Short create</a>:                 Short forms with <kbd>--create</kbd>

<li><a href="#create%20dir%20tutorial">create dir tutorial</a>:          Archiving directories
</ul>

<p><hr>
Node:prepare for examples, Next:<a rel=next href="#Creating%20the%20archive%20tutorial">Creating the archive tutorial</a>, Previous:<a rel=previous href="#create%20tutorial">create tutorial</a>, Up:<a rel=up href="#create%20tutorial">create tutorial</a>
<p>

<h3><a name="prepare%20for%20examples">Preparing a practice directory for examples</a></h3>

<p>To follow along with this and future examples, create a new directory
called <code>practice</code> containing files called <code>blues</code>, <code>folk</code>
and <code>jazz</code>.  The files can contain any information you like:
ideally, they should contain information which relates to their names,
and be of different lengths.  Our examples assume that <code>practice</code>
is a subdirectory of your home directory.

<p>Now <code>cd</code> to the directory named <code>practice</code>; <code>practice</code>
is now your <dfn>working directory</dfn>.  (<em>Please note</em>: Although
the full path name of this directory is
<code>/<var>homedir</var>/practice</code>, in our examples we will refer to
this directory as <code>practice</code>; the <var>homedir</var> is presumed.)

<p>In general, you should check that the files to be archived exist where you
think they do (in the working directory) by running <code>ls</code>.  So let's
do it:

<pre>$ <kbd>ls</kbd>
blues	folk	jazz
</pre>

<p>It is very important to make sure there isn't already a file in the
working directory with the archive name you intend to use (in this
case, <code>collection.tar</code>), or that you don't care about its contents. 
Whenever you use <kbd>create</kbd>, <code>tar</code> will erase the current contents
of the file named by <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) if it exists.  <code>tar</code> will not
tell you if you are about to overwrite a file unless you specify an option
which does this See <a href="#backup">backup</a>.  To add files to an existing archive, you
need to use a different option, such as <kbd>-append</kbd> (<kbd>-r</kbd>); see <a href="#append">append</a>
for information on how to do this.

<p><hr>
Node:Creating the archive tutorial, Next:<a rel=next href="#create%20verbose">create verbose</a>, Previous:<a rel=previous href="#prepare%20for%20examples">prepare for examples</a>, Up:<a rel=up href="#create%20tutorial">create tutorial</a>
<p>

<h3><a name="Creating%20the%20archive%20tutorial">Creating the archive</a></h3>

<p>To place the files <code>blues</code>, <code>folk</code>, and <code>jazz</code> into an
archive named <code>collection.tar</code>, use the following command:

<pre>$ <kbd>tar --create --file=collection.tar blues folk jazz</kbd>
</pre>

<p>The order of the arguments is not very important, <em>when using long
option forms</em>.  You could also say:

<pre>$ <kbd>tar blues --create folk --file=collection.tar jazz</kbd>
</pre>

<p>However, you can see that this order is harder to understand; this is
why we will list the arguments in the order that makes the commands
easiest to understand (and we encourage you to do the same when you use
<code>tar</code>, to avoid errors).

<p>Note that the part of the command that says
<kbd>-file=collection.tar</kbd> is considered to be <em>one</em> argument. 
If you substituted any other string of characters for
<kbd>`collection.tar'</kbd>,  then that string would become the name of the
archive file you create.

<p>The order of the options becomes more important when you begin to use
short forms.  With short forms, if you type commands in the wrong order
(even if you type them correctly in all other ways), you may end up with
results you don't expect.  For this reason, it is a good idea to get
into the habit of typing options in the order that makes inherent sense. 
See <a href="#Short%20create">Short create</a>, for more information on this.

<p>In this example, you type the command as shown above: <kbd>-create</kbd> (<kbd>-c</kbd>)
is the subcommand which creates the new archive
(<code>collection.tar</code>), and <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) is the option which lets
you give it the name you chose.  The files <code>blues</code>, <code>folk</code>,
and <code>jazz</code> are now members of the archive <code>collection.tar</code>
(they are <dfn>file name arguments</dfn> to the <kbd>-create</kbd> (<kbd>-c</kbd>) subcommand). 
  Now that they
are are in the archive, they are called <em>archive members</em>, not
files .

<p>When you create an archive, you <em>must</em> specify which files you want
placed in the archive.  If you do not specify any archive members,
<code>tar</code> will complain.

<p>If you now list the contents of the working directory (<kbd>ls</kbd>), you will
find the archive file listed as well as the files you saw previously:

<pre>$ <kbd>ls</kbd>
blues	collection.tar	folk	jazz
</pre>

<p>Creating the archive <code>collection.tar</code> did not destroy the copies of
the files in the directory.

<p>Keep in mind that if you don't indicate any subcommand, <code>tar</code> will not
run and will prompt you for one.  If you don't name any files, <code>tar</code>
will complain.  You must have write access to the working directory,
or else you will not be able to create an archive in that directory.

<p><em>Caution</em>: Do not attempt to use <kbd>-create</kbd> (<kbd>-c</kbd>) to add files to
an existing archive; it will delete the archive and write a new one. 
Use <kbd>-append</kbd> (<kbd>-r</kbd>) instead.  See <a href="#append">append</a>.

<p><hr>
Node:create verbose, Next:<a rel=next href="#Short%20create">Short create</a>, Previous:<a rel=previous href="#Creating%20the%20archive%20tutorial">Creating the archive tutorial</a>, Up:<a rel=up href="#create%20tutorial">create tutorial</a>
<p>

<h3><a name="create%20verbose">Running <kbd>-create</kbd> with <kbd>-verbose</kbd></a></h3>

<p>If you include the <kbd>-verbose</kbd> (<kbd>-v</kbd>) option on the command line,
<code>tar</code> will list the files it is acting on as it is working.  In
verbose mode, the <code>create</code> example above would appear as:

<pre>$ <kbd>tar --create --verbose --file=collection.tar blues folk jazz</kbd>
blues
folk
jazz
</pre>

<p>This example is just like the example we showed which did not use
<kbd>-verbose</kbd> (<kbd>-v</kbd>), except that <code>tar</code> generated the remaining

<p>In the rest of the examples in this chapter, we will frequently use
<code>verbose</code> mode so we can show actions or <code>tar</code> responses that
you would otherwise not see, and which are important for you to
understand what <code>tar</code> does.

<p><hr>
Node:Short create, Next:<a rel=next href="#create%20dir%20tutorial">create dir tutorial</a>, Previous:<a rel=previous href="#create%20verbose">create verbose</a>, Up:<a rel=up href="#create%20tutorial">create tutorial</a>
<p>

<h3><a name="Short%20create">Short forms with <kbd>-create</kbd></a></h3>

<p>As we said before, the <kbd>-create</kbd> (<kbd>-c</kbd>) subcommand is one of the most
basic uses of <code>tar</code>, and you will use it countless times. 
Eventually, you will probably want to use abbreviated (or "short")
forms of options.  A full discussion of the three different forms that
options can take appears in <a href="#Styles">Styles</a>; for now, here is what the
previous example (including the <kbd>-verbose</kbd> (<kbd>-v</kbd>) option) looks like
using short option forms:

<pre>$ <kbd>tar -cvf collection.tar blues folk jazz</kbd>
blues
folk
jazz
</pre>

<p>As you can see, the system responds the same no matter whether you use
long or short option forms.

<p>One difference between using short and long option forms is that, although
the exact placement of arguments following options is no more specific
when using short forms, it is easier to become confused and make a mistake
when using short forms.  For example, suppose you attempted the above
example in the following way:

<pre>$ <kbd>tar -cfv collection.tar blues folk jazz</kbd>
tar: Cannot add file collection.tar: No such file or directory
tar: Error exit delayed from previous errors
$ <kbd>ls</kbd>
blues   folk   jazz   v
$
</pre>

<p>You got error messages and a file called <code>v</code>.  What happened is
that <code>tar</code> tried to make an archive file called <code>v</code>,
containing the files <code>blues</code>, <code>folk</code>, and <code>jazz</code>, because
the <code>v</code> is the closest "file name" to the <kbd>-f</kbd> option, and
is thus taken to be the chosen archive file name.  <code>tar</code> tried
to add a file called <code>collection.tar</code> to the <code>v</code> archive file;
if the file <code>collection.tar</code> did not already exist, <code>tar</code> will
report an error indicating that this file does not exist.  If the file
<code>collection.tar</code> does already exist (e.g., from a previous command
you may have run), then <code>tar</code> will add this file to the archive. 
Because the <kbd>-v</kbd> option did not get registered, <code>tar</code> will not
run under <em>verbose</em> mode, and will not report its progress.

<p>The end result is that you may be quite confused about what happened,
and possibly overwrite a file.  To illustrate this further, we will show
you how an example we showed previously would look using short forms.

<p>This example,

<pre>$ <kbd>tar blues --create folk --file=collection.tar jazz</kbd>
</pre>

<p>is confusing as it is.  When shown using short forms, however, it
becomes much more so:

<pre>$ <kbd>tar blues -c folk -f collection.tar jazz</kbd>
</pre>

<p>It would be very easy to put the wrong string of characters
immediately following the <kbd>-f</kbd>, but doing that could sacrifice
valuable data.

<p>For this reason, we recommend that you pay very careful attention to
the order of options and placement of file and archive names, especially
when using short option forms.  Not having the option name written out
mnemonically can affect how well you remember which option does what, and
therefore where different names have to be placed.  (Placing options in
an unusual order can also cause <code>tar</code> to report an error if you have
set the shell environment variable, <code>POSIXLY_CORRECT</code>; see <a href="#posix">posix</a>,
for more information on this.)

<p><hr>
Node:create dir tutorial, Previous:<a rel=previous href="#Short%20create">Short create</a>, Up:<a rel=up href="#create%20tutorial">create tutorial</a>
<p>

<h3><a name="create%20dir%20tutorial">Archiving directories</a></h3>

<p>You can archive a directory by specifying its directory name as a
file name argument to <code>tar</code>.  The files in the directory will be
archived relative to the working directory, and the directory will be
re-created along with its contents when the archive is extracted.

<p>To archive a directory, first move to its superior directory.  If you
have followed the previous instructions in this tutorial, you should
type:

<pre>$ <kbd>cd ..</kbd>
$
</pre>

<p>This will put you into the directory which contains <code>practice</code>,
that is, your home directory.  Once in the superior directory, you can
specify the subdirectory, <code>practice</code>, as a file name argument.  To
store <code>practice</code> in the new archive file <code>music.tar</code>, type:

<pre>$ <kbd>tar --create --verbose --file=music.tar practice</kbd>
</pre>

<p><code>tar</code> should output:

<pre>practice/
practice/blues
practice/folk
practice/jazz
practice/collection.tar
</pre>

<p>Note that the archive thus created is not in the subdirectory
<code>practice</code>, but rather in the current working directory--the
directory from which <code>tar</code> was invoked.  Before trying to archive a
directory from its superior directory, you should make sure you have
write access to the superior directory itself, not only the directory
you are trying archive with <code>tar</code>.  For example, you will probably
not be able to store your home directory in an archive by invoking
<code>tar</code> from the root directory; See <a href="#absolute-names">absolute-names</a>.  (Note
also that <code>collection.tar</code>, the original archive file, has itself
been archived.  <code>tar</code> will accept any file as a file to be
archived, regardless of its content.  When <code>music.tar</code> is
extracted, the archive file <code>collection.tar</code> will be rewritten
into the file system).

<p>If you give <code>tar</code> a command such as

<pre>$ <kbd>tar --create --file=foo.tar .</kbd>
</pre>

<p><code>tar</code> will report <code>tar: foo.tar is the archive; not dumped</code>. 
This happens because <code>tar</code> creates the archive <code>foo.tar</code>
in the current directory before putting any files into it.  Then, when
<code>tar</code> attempts to add all the files in the directory <code>.</code> to
the archive, it notices that the file <code>foo.tar</code> is the same as the
archive, and skips it.  (It makes no sense to put an archive into itself.) 
<code>tar</code> will continue in this case, and create the archive normally,
except for the exclusion of that one file.  (<em>Please note:</em> Some other
versions of <code>tar</code> are not so clever; they might enter an infinite
loop when this happens.  It is safer, in general, not to depend on
<code>tar</code> behavior, by making sure that the archive is not created
inside a directory that is itself being dumped.)  Some MS-Windows file systems
(notably, Windows 95 VFAT disks) don't support the feature which is
used by <code>tar</code> to detect that the archive is included in itself,
so the archive <em>will</em> be included on those file systems.

<p><hr>
Node:list tutorial, Next:<a rel=next href="#extract%20tutorial">extract tutorial</a>, Previous:<a rel=previous href="#create%20tutorial">create tutorial</a>, Up:<a rel=up href="#tar%20Tutorial">tar Tutorial</a>
<p>

<h2><a name="list%20tutorial">How to list archives</a></h2>

<p>Often, you will find yourself wanting to determine exactly what a
particular archive contains.  You can use the <kbd>-list</kbd> (<kbd>-t</kbd>) subcommand
to get the member names as they currently appear in the archive, as well
as various attributes of the files at the time they were archived.  For
example, you can examine the archive <code>genres.tar</code> that you created
in the last section with the command,

<pre>$ <kbd>tar --list --file=genres.tar</kbd>
</pre>

<p>The output of <code>tar</code> would then be:

<pre>blues
folk
jazz
</pre>

<p>If you use the <kbd>-verbose</kbd> (<kbd>-v</kbd>) option with <kbd>-list</kbd> (<kbd>-t</kbd>), then
<code>tar</code> will print out a listing reminiscent of <kbd>ls&nbsp;-l</kbd>,
showing owner, file size, and so forth.

<p>If you had used <code>verbose</code> mode, the example above would look
like:

<pre>$ <kbd>tar --list --verbose --file=genres.tar folk</kbd>
-rw-rw-rw- myself users 62 1990-05-23 10:55 folk
</pre>

<p>You can specify one or more individual member names as arguments when
using <kbd>list</kbd>.  In this case, <code>tar</code> will only list the
names of members you identify.  For example, <kbd>tar&nbsp;-list&nbsp;-file=afiles.tar&nbsp;apple</kbd> would only print <code>apple</code>.

<ul>
<li><a href="#absolute%20tutorial">absolute tutorial</a>:            Specifying Member Names Correctly

<li><a href="#Listing%20directories">Listing directories</a>:          Listing the contents of a stored directory
</ul>

<p><hr>
Node:absolute tutorial, Next:<a rel=next href="#Listing%20directories">Listing directories</a>, Previous:<a rel=previous href="#list%20tutorial">list tutorial</a>, Up:<a rel=up href="#list%20tutorial">list tutorial</a>
<p>

<h3><a name="absolute%20tutorial">Specifying member names correctly</a></h3>

<p>The archive <code>bfiles.tar</code> would list as follows:

<pre>./birds
baboon
./box
</pre>

<p>Be sure to use a <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) option just as with <kbd>-create</kbd> (<kbd>-c</kbd>)
to specify the name of the archive.

<p>Because <code>tar</code> preserves paths, file names must be specified as they
appear in the archive (that is, relative to the directory from which the
archive was created).  Therefore, it is essential when specifying member
names to <code>tar</code> that you give the exact member names.  For example,
<kbd>tar&nbsp;-list&nbsp;-file=bfiles&nbsp;birds</kbd> would produce an error message
something like <code>tar: birds: Not found in archive</code>, because there is
no member named <code>birds</code>, only one named <code>./birds</code>.  While the
names <code>birds</code> and <code>./birds</code> name the same file, <em>member</em>
names are compared using a simplistic name comparison, in which an exact
match is necessary.  See <a href="#absolute-names">absolute-names</a>.

<p>However, <kbd>tar&nbsp;-list&nbsp;-file=genres.tar&nbsp;folk</kbd> would respond
with <code>folk</code>, because <code>folk</code> is in the archive file
<code>genres.tar</code>.  If you are not sure of the exact file name, try
listing all the files in the archive and searching for the one you
expect to find; remember that if you use <kbd>-list</kbd> (<kbd>-t</kbd>) with no file
names as arguments, <code>tar</code> will print the names of all the members
stored in the specified archive.

<p><hr>
Node:Listing directories, Previous:<a rel=previous href="#absolute%20tutorial">absolute tutorial</a>, Up:<a rel=up href="#list%20tutorial">list tutorial</a>
<p>

<h3><a name="Listing%20directories">Listing the contents of a stored directory</a></h3>

<p>To get information about the contents of an archived directory,
use the directory name as a file name argument in conjunction with
<kbd>-list</kbd> (<kbd>-t</kbd>).  To determine file attributes, include the
<kbd>-verbose</kbd> (<kbd>-v</kbd>) option.

<p>For example, to find out about files in the directory <code>practice</code> in
the archive file <code>music.tar</code>, type:

<pre>$ <kbd>tar --list --verbose --file=music.tar practice</kbd>
</pre>

<p><code>tar</code> responds:

<pre>drwxrwxrwx myself users 0 1990-05-31 21:49 practice/
-rw-rw-rw- myself users 42 1990-05-21 13:29 practice/blues
-rw-rw-rw- myself users 62 1990-05-23 10:55 practice/folk
-rw-rw-rw- myself users 40 1990-05-21 13:30 practice/jazz
-rw-rw-rw- myself users 10240 1990-05-31 21:49 practice/collection.tar
</pre>

<p>When you use a directory name as a file name argument, <code>tar</code> acts on
all the files (including subdirectories) in that directory.

<p><hr>
Node:extract tutorial, Next:<a rel=next href="#Looking%20ahead">Looking ahead</a>, Previous:<a rel=previous href="#list%20tutorial">list tutorial</a>, Up:<a rel=up href="#tar%20Tutorial">tar Tutorial</a>
<p>

<h2><a name="extract%20tutorial">How to extract members from an archive</a></h2>

<p>The act of retrieving members from an archive so they can be used and
manipulated as unarchived files again is called <dfn>extraction</dfn>.  To
extract files from an archive, use the <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) subcommand. 
As with <kbd>-create</kbd> (<kbd>-c</kbd>), specify the name of the archive with
<kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>).  Extracting an archive does not modify the archive in
any way; you can extract it multiple times if you want or need to.

<p>Using <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), you can extract an entire archive, or specific
files.  The files can be directories containing other files, or not.  As
with <kbd>-create</kbd> (<kbd>-c</kbd>) and <kbd>-list</kbd> (<kbd>-t</kbd>), you may use the short or the
long form of the subcommand without affecting the performance.

<p>If you have files in the working directory with the same name as members
that you are about to extract, the files will be overwritten by the newly
extracted members.  <code>tar</code> has new options which will permit you
to keep more than one copy of a file with the same name as an archive is
extracted; for more information about this, consult <a href="#backup">backup</a>.

<ul>
<li><a href="#Extracting%20archives">Extracting archives</a>:          Extracting an entire archive

<li><a href="#Extracting%20files">Extracting files</a>:             Extracting specific files

<li><a href="#Extracting%20directories">Extracting directories</a>:       Extracting files that are directories

<li><a href="#Failing%20commands">Failing commands</a>:             Commands that will fail

<li><a href="#Two%20mistakes">Two mistakes</a>:                 Two dangerous mistakes
</ul>

<p><hr>
Node:Extracting archives, Next:<a rel=next href="#Extracting%20files">Extracting files</a>, Previous:<a rel=previous href="#extract%20tutorial">extract tutorial</a>, Up:<a rel=up href="#extract%20tutorial">extract tutorial</a>
<p>

<h3><a name="Extracting%20archives">Extracting an entire archive</a></h3>

<p>To extract an entire archive, specify the archive file name only, with
no individual file names as arguments.  For example,

<pre>$ <kbd>tar -xvf collection.tar</kbd>
</pre>

<p>produces this:

<pre>-rw-rw-rw- myself users 28 1996-10-18 16:31 jazz
-rw-rw-rw- myself users 21 1996-09-23 16:44 blues
-rw-rw-rw- myself users 20 1996-09-23 16:44 folk
</pre>

<p><hr>
Node:Extracting files, Next:<a rel=next href="#Extracting%20directories">Extracting directories</a>, Previous:<a rel=previous href="#Extracting%20archives">Extracting archives</a>, Up:<a rel=up href="#extract%20tutorial">extract tutorial</a>
<p>

<h3><a name="Extracting%20files">Extracting specific files</a></h3>

<p>To extract specific archive members, give their exact member names as
arguments, as printed by <kbd>-list</kbd> (<kbd>-t</kbd>).  If you have mistakenly deleted
one of the files you had placed in the archive <code>genres.tar</code> earlier
(say, <code>blues</code>), you can extract it from the archive without changing the
archive's structure.  It will be identical to the original file <code>blues</code>
that you deleted.

<p>First, make sure you are in the <code>practice</code> directory, and list the
files in the directory.  Now, delete the file <code>blues</code> and list
the files in the directory again.

<p>You can now extract the member <code>blues</code> from the archive file
<code>genres.tar</code> like this:

<pre>$ <kbd>tar --extract --file=genres.tar blues</kbd>
</pre>

<p>If you list the files in the directory again, you will see that the file
<code>blues</code> has been restored, with its original permissions, creation
time, and owner.  These parameters will be identical to those which the
file had when you originally placed it in the archive; any changes you
may have made before deleting the file from the file system, however,
will <em>not</em> have been made to the archive member.  (If the restoring
user was not also the owner of the archived members, and if the current
<code>umask</code> is compatible with original permissions, the various
permissions would probably be different.)  The archive file
<code>genres.tar</code> is the same as it was before you extracted
<code>blues</code>.  You can confirm this by running <code>tar</code> with
<kbd>-list</kbd> (<kbd>-t</kbd>).

<p>Remember that as with other subcommands, specifying the exact member name
is important.  <kbd>tar&nbsp;-extract&nbsp;-file=bfiles.tar&nbsp;birds</kbd> will fail,
because there is no member named <code>birds</code>.  To extract the member named
<code>./birds</code>, you must specify <kbd>tar&nbsp;-extract&nbsp;-file=bfiles.tar&nbsp;./birds</kbd>.  To find the exact member names of the members of an archive,
use <kbd>-list</kbd> (<kbd>-t</kbd>) (see <a href="#list">list</a>).

<p>If you give the <kbd>-verbose</kbd> (<kbd>-v</kbd>) option, then <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) will
print the names of the archive members as it extracts them.

<p><hr>
Node:Extracting directories, Next:<a rel=next href="#Failing%20commands">Failing commands</a>, Previous:<a rel=previous href="#Extracting%20files">Extracting files</a>, Up:<a rel=up href="#extract%20tutorial">extract tutorial</a>
<p>

<h3><a name="Extracting%20directories">Extracting files that are directories</a></h3>

<p>Extracting directories which are members of an archive is similar to
extracting other files.  The main difference to be aware of is that
if the extracted directory has the same name as any directory already
in the working directory, then files in the extracted directory will
be placed into the directory of the same name.  Likewise, if there are
files in the pre-existing directory with the same names as the members
which you extract, the files from the extracted archive will overwrite
the files already in the pre-existing directory (and possible subdirectories). 
This will happen regardless of whether or not the files in the pre-existing
directory were more recent than those extracted.

<p>If a file was stored with a directory name as part of its file name, and
that directory does not exist under the working directory when the file
is extracted, <code>tar</code> will create the directory.

<p>We can demonstrate how to use <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) to extract a directory
file with an example.  Change to the <code>practice</code> directory if you
weren't there, and remove the files <code>folk</code> and <code>jazz</code>.  Then,
go back to the parent directory and extract the archive
<code>music.tar</code>.  You may either extract the entire archive, or only
the files you just deleted.  To extract the entire archive, don't give
any file names as arguments after the archive name <code>music.tar</code>.  To
extract only the files you deleted, use the following command:

<pre>$ <kbd>tar -xvf music.tar practice/folk practice/jazz</kbd>
</pre>

<p>Because you created the directory with <code>practice</code> as part of the
file names of each of the files by archiving the <code>practice</code>
directory as <code>practice</code>, you must give <code>practice</code> as part
of the file names when you extract those files from the archive.

<p><hr>
Node:Failing commands, Next:<a rel=next href="#Two%20mistakes">Two mistakes</a>, Previous:<a rel=previous href="#Extracting%20directories">Extracting directories</a>, Up:<a rel=up href="#extract%20tutorial">extract tutorial</a>
<p>

<h3><a name="Failing%20commands">Commands that will fail</a></h3>

<p>Here are some sample commands you might try which will not work, and why
they won't work.

<p>If you try to use this command:

<pre>$ <kbd>tar -xvf music.tar folk jazz</kbd>
</pre>

<p>you will get the following response:

<pre>tar: folk: Not found in archive
tar: jazz: Not found in archive
$
</pre>

<p>This is because these files were not originally <em>in</em> the parent
directory <code>..</code> where the archive is located; they were in the
<code>practice</code> directory, and their file names reflect this:

<pre>$ <kbd>tar -tvf music.tar</kbd>
practice/folk
practice/jazz
practice/rock
</pre>

<p>Likewise, if you try to use this command,

<pre>$ <kbd>tar -tvf music.tar folk jazz</kbd>
</pre>

<p>you would get a similar response.  Members with those names are not in the
archive.  You must use the correct member names in order to extract the
files from the archive.

<p>If you have forgotten the correct names of the files in the archive,
use <kbd>tar&nbsp;-list&nbsp;-verbose</kbd> to list them correctly.

<p><hr>
Node:Two mistakes, Previous:<a rel=previous href="#Failing%20commands">Failing commands</a>, Up:<a rel=up href="#extract%20tutorial">extract tutorial</a>
<p>

<h3><a name="Two%20mistakes">Two dangerous mistakes</a></h3>

<p>Here are two dangerous mistakes you should try to avoid which can occur
while using <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>):

<ol type=1 start=1>
</p><li>Do not mistakenly use <code>create</code> instead of <code>extract</code>,
when your intent is to extract the contents of an archive.

<p>This error can occur if you mistype the <kbd>c</kbd> key for the <kbd>x</kbd> key. 
You might do this when you are tired, since the two keys, <kbd>c</kbd> and
<kbd>x</kbd>, are next to each other on a <small>QWERTY</small> keyboard.  If you make
this mistake, instead of unpacking the archive, you will destroy it.

</p><li>Do not mistakenly forget to list the name of the file into which
you are archiving, especially when your intent is to create an
archive with just one file in it.

<p>You might do this by force of habit, by inadvertently adding the <kbd>f</kbd>
key to your cluster of option letters while forgetting to name the
archive.  If you make this mistake, instead of archiving the file, you
will destroy it.
</ol>

<p><hr>
Node:Looking ahead, Previous:<a rel=previous href="#extract%20tutorial">extract tutorial</a>, Up:<a rel=up href="#tar%20Tutorial">tar Tutorial</a>
<p>

<h2><a name="Looking%20ahead">Looking ahead: The rest of this manual</a></h2>

<p>You have now seen how to use the main subcommands available to <code>tar</code>,
and a number of the possible options.  You should be able to take
advantage of the <code>tar</code> program adequately to help yourself in many real situations.

<p>The next two chapters review everything you have learned so far, while going
in depth about every topic, most probably to a greater extent than you really
need for simple day-to-day use.  The remaining chapters explain how
to choose and change file and archive names, and how to use files to store
names of other files which you can then call as arguments to <code>tar</code>
(this can help you save time if you expect to archive the same list of
files a number of times).

<p>If there are too many files to list conveniently on the command line,
you can list the names in a file, and <code>tar</code> will read that file. 
See <a href="#files-from">files-from</a>.

<p>There are various ways of causing <code>tar</code> to skip over certain files
and not archive them.  See <a href="#Choosing">Choosing</a>.

<p><hr>
Node:cpio invocation, Next:<a rel=next href="#pax%20invocation">pax invocation</a>, Previous:<a rel=previous href="#tar%20Tutorial">tar Tutorial</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="cpio%20invocation">Invoking <code>cpio</code></a></h1>

<ul>
<li><a href="#Copy-out%20mode">Copy-out mode</a>:                Copy-out mode

<li><a href="#Copy-in%20mode">Copy-in mode</a>:                 Copy-in mode

<li><a href="#Copy-pass%20mode">Copy-pass mode</a>:               Copy-pass mode

<li><a href="#cpio%20Options">cpio Options</a>:                 Options for <code>cpio</code>
</ul>

<p><hr>
Node:Copy-out mode, Next:<a rel=next href="#Copy-in%20mode">Copy-in mode</a>, Previous:<a rel=previous href="#cpio%20invocation">cpio invocation</a>, Up:<a rel=up href="#cpio%20invocation">cpio invocation</a>
<p>

<h2><a name="Copy-out%20mode">Copy-out mode</a></h2>

<p>In copy-out mode, <code>cpio</code> copies files into an archive.  It reads a
list of filenames, one per line, on the standard input, and writes the
archive onto the standard output.  A typical way to generate the list
of filenames is with the <code>find</code> command; you should give find the
<kbd>-depth</kbd> option to minimize problems with permissions on directories
that are unreadable.  See <a href="#cpio%20Options">cpio Options</a>.

<pre>cpio {-o|--create} [-0acvABLV] [-C bytes] [-H format]
[-M message] [-O [[user@]host:]archive] [-F [[user@]host:]archive]
[--file=[[user@]host:]archive] [--format=format]
[--message=message][--null] [--reset-access-time] [--verbose]
[--dot] [--append] [--block-size=blocks] [--dereference]
[--io-size=bytes] [--help] [--version] &lt; name-list [&gt; archive]
</pre>

<p><hr>
Node:Copy-in mode, Next:<a rel=next href="#Copy-pass%20mode">Copy-pass mode</a>, Previous:<a rel=previous href="#Copy-out%20mode">Copy-out mode</a>, Up:<a rel=up href="#cpio%20invocation">cpio invocation</a>
<p>

<h2><a name="Copy-in%20mode">Copy-in mode</a></h2>

<p>In copy-in mode, <code>cpio</code> copies files out of an archive or lists
the archive contents.  It reads the archive from the standard input. 
Any non-option command line arguments are shell globbing patterns; only
files in the archive whose names match one or more of those patterns are
copied from the archive.  Unlike in the shell, an initial <code>.</code> in a
filename does match a wildcard at the start of a pattern, and a <code>/</code>
in a filename can match wildcards.  If no patterns are given, all files
are extracted.  See <a href="#cpio%20Options">cpio Options</a>.

<pre>cpio {-i|--extract} [-bcdfmnrtsuvBSV] [-C bytes] [-E file]
[-H format] [-M message] [-R [user][:.][group]]
[-I [[user@]host:]archive] [-F [[user@]host:]archive]
[--file=[[user@]host:]archive] [--make-directories]
[--nonmatching] [--preserve-modification-time]
[--numeric-uid-gid] [--rename] [--list] [--swap-bytes] [--swap]
[--dot] [--unconditional] [--verbose] [--block-size=blocks]
[--swap-halfwords] [--io-size=bytes] [--pattern-file=file]
[--format=format] [--owner=[user][:.][group]] [--sparse]
[--no-preserve-owner] [--message=message] [--help] [--version]
[--no-absolute-filenames] [--only-verify-crc] [--quiet] [--silent]
[pattern...] [&lt; archive]
</pre>

<p><hr>
Node:Copy-pass mode, Next:<a rel=next href="#cpio%20Options">cpio Options</a>, Previous:<a rel=previous href="#Copy-in%20mode">Copy-in mode</a>, Up:<a rel=up href="#cpio%20invocation">cpio invocation</a>
<p>

<h2><a name="Copy-pass%20mode">Copy-pass mode</a></h2>

<p>In copy-pass mode, <code>cpio</code> copies files from one directory tree to
another, combining the copy-out and copy-in steps without actually creating
an archive.  It reads the list of files to copy from the standard input;
the directory into which it will copy them is given as a non-option argument. 
See <a href="#cpio%20Options">cpio Options</a>.

<pre>cpio {-p|--pass-through} [-0adlmuvLV] [-R [user][:.][group]]
[--null] [--reset-access-time] [--make-directories] [--link]
[--preserve-modification-time] [--unconditional] [--verbose]
[--dot] [--dereference] [--owner=[user][:.][group]] [--sparse]
[--no-preserve-owner] [--help] [--version] destination-directory
&lt; name-list
</pre>

<p><hr>
Node:cpio Options, Previous:<a rel=previous href="#Copy-pass%20mode">Copy-pass mode</a>, Up:<a rel=up href="#cpio%20invocation">cpio invocation</a>
<p>

<h2><a name="cpio%20Options">Options for <code>cpio</code></a></h2>

<dl>
<dt><kbd>-null</kbd>
<dt><kbd>-0</kbd>
<dd>Read a list of filenames terminated by a <kbd>&lt;NUL&gt;</kbd> character, instead
of a newline, so that files whose names contain newlines can be archived. 
GNU <code>find</code> is one way to produce a list of null-terminated filenames. 
This option may be used in copy-out and copy-pass modes.

<br><dt><kbd>-reset-access-time</kbd>
<dt><kbd>-a</kbd>
<dd>Reset the access times of files after reading them, so that it does not look
like they have just been read.  (This option has no effect on plain DOS,
since DOS filesystem only stores a single time stamp per file.  It does
work on Windows 9X.)

<br><dt><kbd>-append</kbd>
<dt><kbd>-A</kbd>
<dd>Append to an existing archive.  Only works in copy-out mode.  The archive
must be a disk file specified with the <kbd>-O</kbd> or <kbd>-F</kbd> (<kbd>-file</kbd>)
option.

<br><dt><kbd>-swap</kbd>
<dt><kbd>-b</kbd>
<dd>Swap both halfwords of words and bytes of halfwords in the data.  Equivalent
to <kbd>-sS</kbd>.  This option may be used in copy-in mode.  Use this option
to convert 32-bit integers between big-endian and little-endian machines.

<br><dt><kbd>-B</kbd>
<dd>Set the I/O block size to 5120 bytes.  Initially the block size is 512 bytes.

<br><dt><kbd>-block-size=<var>block-size</var></kbd>
<dd>Set the I/O block size to <var>block-size</var> * 512 bytes.

<br><dt><kbd>-c</kbd>
<dd>Use the old portable (ASCII) archive format.

<br><dt><kbd>-io-size=<var>io-size</var></kbd>
<dt><kbd>-C <var>io-size</var></kbd>
<dd>Set the I/O block size to <var>io-size</var> bytes.

<br><dt><kbd>-make-directories</kbd>
<dt><kbd>-d</kbd>
<dd>Create leading directories where needed.

<br><dt><kbd>-pattern-file=<var>file</var></kbd>
<dt><kbd>-E <var>file</var></kbd>
<dd>Read additional patterns specifying filenames to extract or list from
<var>file</var>.  The lines of <var>file</var> are treated as if they had been
non-option arguments to <code>cpio</code>.  This option is used in copy-in mode.

<br><dt><kbd>-nonmatching</kbd>
<dt><kbd>-f</kbd>
<dd>Only copy files that do not match any of the given patterns.

<br><dt><kbd>-file=<var>archive</var></kbd>
<dt><kbd>-F <var>archive</var></kbd>
<dd>Archive filename to use instead of standard input or output.  To use a
tape drive on another machine as the archive, use a filename that starts
with <code><var>HOSTNAME</var>:</code>.  The hostname can be preceded by a username
and an <code>@</code> to access the remote tape drive as that user, if you have
permission to do so (typically an entry in that user's <code>~/.rhosts</code>
file).

<p>Remote archives are not supported on MS-DOS and MS-Windows.

<br><dt><kbd>-force-local</kbd>
<dd>With <kbd>-F</kbd>, <kbd>-I</kbd>, or <kbd>-O</kbd>, take the archive file name to be a
local file even if it contains a colon, which would ordinarily indicate
a remote host name.

<br><dt><kbd>-format=<var>format</var></kbd>
<br><dt><kbd>-H <var>format</var></kbd>
<dd>Use archive format <var>format</var>.  The valid formats are listed below;
the same names are also recognized in all-caps.  The default in copy-in
mode is to automatically detect the archive format, and in copy-out mode
is <code>bin</code>.

<dl>
<dt><code>bin</code>
<dd>The obsolete binary format.

<br><dt><code>odc</code>
<dd>The old (POSIX.1) portable format.

<br><dt><code>newc</code>
<dd>The new (SVR4) portable format, which supports file systems having more
than 65536 i-nodes.

<br><dt><code>crc</code>
<dd>The new (SVR4) portable format with a checksum added.

<br><dt><code>tar</code>
<dd>The old <code>tar</code> format.

<br><dt><code>ustar</code>
<dd>The POSIX.1 <code>tar</code> format.  Also recognizes most <code>tar</code> archives,
many of which are similar, but not identical.

<br><dt><code>hpbin</code>
<dd>The obsolete binary format used by HPUX's <code>cpio</code> (which stores device
files differently).

<br><dt><code>hpodc</code>
<dd>The portable format used by HPUX's <code>cpio</code> (which stores device files
differently). 
</dl>

<br><dt><kbd>-extract</kbd>
<dt><kbd>-i</kbd>
<dd>Run in copy-in mode.  See <a href="#Copy-in%20mode">Copy-in mode</a>.

<br><dt><kbd>-I <var>archive</var></kbd>
<dd>Archive filename to use instead of standard input.  To use a tape drive
on another machine as the archive, use a filename that starts with
<code><var>hostname</var>:</code>.  The hostname can be preceded by a username and
an <code>@</code> to access the remote tape drive as that user, if you have
permission to do so (typically an entry in that user's <code>~/.rhosts</code>
file).

<p>Remote archives are not supported on MS-DOS and MS-Windows.

<br><dt><kbd>-k</kbd>
<dd>Ignored; for compatibility with other versions of <code>cpio</code>.

<br><dt><kbd>-link</kbd>
<dt><kbd>-l</kbd>
<dd>Link files instead of copying them, when possible.

<br><dt><kbd>-dereference</kbd>
<dt><kbd>-L</kbd>
<dd>Copy the file that a symbolic link points to, rather than the symbolic
link itself.

<br><dt><kbd>-preserve-modification-time</kbd>
<dt><kbd>-m</kbd>
<dd>Retain previous file modification times when creating files.

<br><dt><kbd>-message=<var>message</var></kbd>
<dt><kbd>-M <var>message</var></kbd>
<dd>Print <var>message</var> when the end of a volume of the backup media (such
as a tape or a floppy disk) is reached, to prompt the user to insert a
new volume.  If <var>message</var> contains the string <code>%d</code>, it is replaced
by the current volume number (starting at 1).

<br><dt><kbd>-numeric-uid-gid</kbd>
<dt><kbd>-n</kbd>
<dd>Show numeric UID and GID instead of translating them into names when using
the <kbd>-verbose option</kbd>.

<br><dt><kbd>-no-absolute-filenames</kbd>
<dd>Create all files relative to the current directory in copy-in mode, even
if they have an absolute file name in the archive.

<br><dt><kbd>-no-preserve-owner</kbd>
<dd>Do not change the ownership of the files; leave them owned by the user
extracting them.  This is the default for non-root users, so that users
on System V don't inadvertantly give away files.  This option can be used
in copy-in mode and copy-pass mode

<br><dt><kbd>-create</kbd>
<dt><kbd>-o</kbd>
<dd>Run in copy-out mode.  See <a href="#Copy-out%20mode">Copy-out mode</a>.

<br><dt><kbd>-O <var>archive</var></kbd>
<dd>Archive filename to use instead of standard output.  To use a tape
drive on another machine as the archive, use a filename that starts with
<code><var>hostname</var>:</code>.  The hostname can be preceded by a username and
an <code>@</code> to access the remote tape drive as that user, if you have
permission to do so (typically an entry in that user's <code>~/.rhosts</code>
file).

<p>Remote archives are not supported on MS-DOS and MS-Windows.

<br><dt><kbd>-only-verify-crc</kbd>
<dd>Verify the CRC's of each file in the archive, when reading a CRC format
archive. Don't actually extract the files.

<br><dt><kbd>-pass-through</kbd>
<dt><kbd>-p</kbd>
<dd>Run in copy-pass mode.  See <a href="#Copy-pass%20mode">Copy-pass mode</a>.

<br><dt><kbd>-quiet</kbd>
<dt><kbd>-silent</kbd>
<dd>Do not print the number of blocks copied.

<br><dt><kbd>-rename</kbd>
<dt><kbd>-r</kbd>
<dd>Interactively rename files.  For each file in the archive, <code>cpio</code> will
print its name and wait for the user to type a new name.  An empty name
(produced by pressing <kbd>RET</kbd>) means skip the file.

<br><dt><kbd>-rename-batch-file=<var>rename-file</var></kbd>
<dd>Non-interactively rename files.  For each file in the archive, <code>cpio</code>
will read a replacement name from the named <var>rename-file</var>.  In that
file, file names should be separated by newlines.  An empty line causes
<code>cpio</code> to skip the file.

<br><dt><kbd>-owner [<var>user</var>][:.][<var>group</var>]</kbd>
<dt><kbd>-R [<var>user</var>][:.][<var>group</var>]</kbd>
<dd>Set the ownership of all files created to the specified user and/or group
in copy-in and copy-pass modes.  Either the user, the group, or both,
must be present.  If the group is omitted but the <code>:</code> or <code>.</code>
separator is given, use the given user's login group.  Only the super-user
can change files' ownership.

<p>(On MS-DOS and MS-Windows, any user can use this option, since changing
ownership is a no-op on these systems.)

<br><dt><kbd>-swap-bytes</kbd>
<dt><kbd>-s</kbd>
<dd>Swap the bytes of each halfword (pair of bytes) in the files.  This option
can be used in copy-in mode.

<br><dt><kbd>-swap-halfwords</kbd>
<dt><kbd>-S</kbd>
<dd>Swap the halfwords of each word (4 bytes) in the files.  This option may
be used in copy-in mode.

<br><dt><kbd>-sparse</kbd>
<dd>Write files with large blocks of zeros as sparse files.  This option is
used in copy-in and copy-pass modes.

<br><dt><kbd>-list</kbd>
<dt><kbd>-t</kbd>
<dd>Print a table of contents of the input.

<br><dt><kbd>-unconditional</kbd>
<dt><kbd>-u</kbd>
<dd>Replace all files, without asking whether to replace existing newer files
with older files.

<br><dt><kbd>-verbose</kbd>
<dt><kbd>-v</kbd>
<dd>List the files processed, or with <kbd>-t</kbd>, give an <code>ls -l</code> style table
of contents listing.  In a verbose table of contents of a ustar archive,
user and group names in the archive that do not exist on the local system
are replaced by the names that correspond locally to the numeric UID and
GID stored in the archive.

<br><dt><kbd>-dot</kbd>
<dt><kbd>-V</kbd>
<dd>Print a <kbd>.</kbd> for each file processed.

<br><dt><kbd>-version</kbd>
<dd>Print the <code>cpio</code> program version number and exit.

</dl>

<p><hr>
Node:pax invocation, Next:<a rel=next href="#tar%20invocation">tar invocation</a>, Previous:<a rel=previous href="#cpio%20invocation">cpio invocation</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="pax%20invocation">Invoking <code>pax</code></a></h1>

<p>This chapter is not written yet.

<p><hr>
Node:tar invocation, Next:<a rel=next href="#Subcommands">Subcommands</a>, Previous:<a rel=previous href="#pax%20invocation">pax invocation</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="tar%20invocation">Invoking <code>tar</code></a></h1>

<p>This chapter is about how one invokes the <code>tar</code> command, from the
command synopsis (see <a href="#Synopsis">Synopsis</a>).  There are numerous options, and many
styles for writing them.  One option should specify the subcommand <code>tar</code>
should perform (see <a href="#Subcommand%20summary">Subcommand summary</a>); other options are meant to
detail how this subcommand should be performed (see <a href="#Option%20summary">Option summary</a>). 
Non-option arguments are not always interpreted the same way; their
interpretation depends on what the subcommand is.

<p>You will find in this chapter everything about option styles and rules
for writing them (see <a href="#Styles">Styles</a>).  On the other hand, most subcommands
and options are described elsewhere, in other chapters.  Here, you will
find only synthetic descriptions for subcommands and options, together
with pointers to other parts of the <code>tar</code> manual.

<p>Some options are so special they are fully described right in this chapter. 
They have the effect of inhibiting the normal operation of <code>tar</code> or
else they globally alter the amount of feedback the user receives about
what is going on.  This chapter describes the <kbd>-help</kbd> (see <a href="#help">help</a>)
option, as well as <kbd>-version</kbd> (see <a href="#version">version</a>), <kbd>-verbose</kbd> (<kbd>-v</kbd>)
(see <a href="#verbose">verbose</a>), <kbd>-interactive</kbd> (<kbd>-confirmation</kbd>, <kbd>-w</kbd>) (see <a href="#interactive">interactive</a>), and a
few others.

<ul>
<li><a href="#Synopsis">Synopsis</a>:                     General synopsis of <code>tar</code>

<li><a href="#Using%20options">Using options</a>:                Using <code>tar</code> options

<li><a href="#Styles">Styles</a>:                       The three option styles

<li><a href="#Documentation%20and%20help">Documentation and help</a>:       Documentation and troubleshooting

<li><a href="#interactive">interactive</a>:                  Asking for confirmation during subcommands
</ul>

<p><hr>
Node:Synopsis, Next:<a rel=next href="#Using%20options">Using options</a>, Previous:<a rel=previous href="#tar%20invocation">tar invocation</a>, Up:<a rel=up href="#tar%20invocation">tar invocation</a>
<p>

<h2><a name="Synopsis">General synopsis of <code>tar</code></a></h2>

<p>The <code>tar</code> program is invoked as either one of:

<pre>$ <kbd>tar</kbd> <var>option</var><small>...</small> [<var>name</var>]<small>...</small>
$ <kbd>tar</kbd> <var>letter</var><small>...</small> [<var>argument</var>]<small>...</small> [<var>option</var>]<small>...</small> [<var>name</var>]<small>...</small>
</pre>

<p>The second form is for when old options are being used.

<p>You can use <code>tar</code> to store files in an archive, to extract them from
an archive, and to do other types of archive manipulation.  The primary
argument to <code>tar</code>, which is called the <dfn>subcommand</dfn>, specifies
which action to take.  The other arguments to <code>tar</code> are either
<dfn>options</dfn>, which change the way <code>tar</code> performs a subcommand,
or file names or archive members, which specify the files or members
<code>tar</code> is to act on.

<p>You can actually type in arguments in any order, even if in this manual
the options always precede the other arguments, to make examples easier to
understand.  The option stating the operation mode (the <code>tar</code>
subcommand) is usually given first.

<p>Each <var>name</var> in the synopsis above is interpreted as an archive member
name when the subcommand is one of <kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>), <kbd>-delete</kbd>,
<kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), <kbd>-list</kbd> (<kbd>-t</kbd>) or <kbd>-update</kbd> (<kbd>-u</kbd>).  When naming
archive members, you must give the exact name of the member in the
archive, as it is printed by <kbd>-list</kbd> (<kbd>-t</kbd>).  For <kbd>-append</kbd> (<kbd>-r</kbd>)
and <kbd>-create</kbd> (<kbd>-c</kbd>), these <var>name</var> arguments specify the names
of either files or directory hierarchies to place in the archive. 
These files or hierarchies should already exist in the file system
prior to the execution of the <code>tar</code> command.

<p><code>tar</code> interprets relative file names as relative to the
working directory.  <code>tar</code> will make all file names relative
(by removing leading slashes when archiving or restoring files)
unless you specify otherwise (using the <kbd>-absolute-names</kbd> (<kbd>-P</kbd>)
option).  See <a href="#absolute-names">absolute-names</a>, for more information about
<kbd>-absolute-names</kbd> (<kbd>-P</kbd>).

<p>If you give the name of a directory as either a file name or a member
name, then <code>tar</code> acts recursively on all the files and directories
beneath that directory.  For example, the name <code>/</code> identifies all
the files in the filesystem to <code>tar</code>.

<p>The distinction between file names and archive member names is especially
important when shell globbing is used, and is sometimes a source of confusion
for newcomers.  See <a href="#Wildcards">Wildcards</a>, for more information about globbing. 
The problem is that shells can only glob using existing files in the
file system.  Only <code>tar</code> itself can glob on archive members, so when
that is necessary, you must ensure that wildcard characters reach <code>tar</code> without
being interpreted by the shell first.  Using a backslash before <code>*</code>
or <code>?</code>, or putting the whole argument between quotes, is usually
sufficient for this.  (On MS-DOS/MS-Windows, you <strong>must</strong> use
quotes, since the backslash is a directory separator, and cannot be used
to escape-protect wildcard characters.)

<p>Even if <var>name</var>s are often specified on the command line, they
can also be read from a text file in the file system, using the
<kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) option.

<p>If you don't use any file name arguments, <kbd>-append</kbd> (<kbd>-r</kbd>),
<kbd>-delete</kbd> and <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>) will do nothing, while
<kbd>-create</kbd> (<kbd>-c</kbd>) will usually yield a diagnostic and inhibit <code>tar</code>
execution.  The other subcommands of <code>tar</code> (<kbd>-list</kbd> (<kbd>-t</kbd>),
<kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), <kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>), and <kbd>-update</kbd> (<kbd>-u</kbd>)) will act
on the entire contents of the archive.

<p>Besides successful exits, <code>tar</code> may fail for many reasons.  Some reasons
correspond to bad usage, that is, when the <code>tar</code> command is improperly
written.  Errors may also be encountered later, while processing the archive
or the files.  Some errors are recoverable, in which case the failure is
delayed until <code>tar</code> has completed all its work, <code>tar</code> then says:

<pre>tar: Processed all files possible, despite earlier errors
</pre>

<p>just before exiting with a nonzero status.<a rel=footnote href="#fn-6"><sup>6</sup></a>
When <code>tar</code> is executed interactively and reports a recoverable error,
the supplementary time before the prompt reappears, the noise coming from
the disk, or the sight of the actual tape moving, gives some feel to the
user that <code>tar</code> continued its processing.  But when run in scripts
or unattended, the ending message is undoubtly useful.

<p>Some errors are such that it would not be meaningful, or at least would be
risky, to continue processing: <code>tar</code> then aborts processing immediately,
and says so.  All abnormal exits, whether immediate or delayed, should
<em>always</em> be clearly diagnosed on <code>stderr</code>, after a line stating
the nature of the error.  When an error is recoverable, <code>tar</code> attempts
to continue processing as much as possible.  It will then exit with an
error (nonzero) status, which is in fact delayed from the time the error
effectively occurred.

<p><code>tar</code> returns only a few exit statuses.  We are really aiming for
simplicity in that area, for now.<a rel=footnote href="#fn-7"><sup>7</sup></a> If you are not using the <kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>) option,
zero means that everything went well, besides maybe innocuous warnings
(however, see <a href="#ignore-failed-read">ignore-failed-read</a>).  Nonzero means that something
went wrong.  As of today, "nonzero" is almost always 1 or 2, except for
remote subcommands, where it may be 128.  The value 1 is meant to report a
difference (see <a href="#compare">compare</a>), while the value 2 represents all other errors.

<p>The <code>tar</code> program is often used early in a pipe, in which case the
exit status of <code>tar</code> is less easy to obtain, as the error exit of
the whole pipe is the error exit of the last program in the pipeline.  If you
are using <code>bash</code>, check the <code>PIPESTATUS</code> array for <code>tar</code>'s
exit status.  Otherwise, it <em>is</em> possible with <code>sh</code> or <code>ksh</code>
to fetch the exit status of a process in the middle of a pipeline, just
ugly:<a rel=footnote href="#fn-8"><sup>8</sup></a>

<pre>$ <kbd>exec 3&gt;&amp;1</kbd>
$ <kbd>status=`((tar <small>...</small>; echo $? &gt;&amp;4) | tee <small>...</small> &gt;&amp;3) 4&gt;&amp;1`</kbd>
</pre>

<p><hr>
Node:Using options, Next:<a rel=next href="#Styles">Styles</a>, Previous:<a rel=previous href="#Synopsis">Synopsis</a>, Up:<a rel=up href="#tar%20invocation">tar invocation</a>
<p>

<h2><a name="Using%20options">Using <code>tar</code> options</a></h2>

<p><code>tar</code> has about eight operating modes which allow you to perform
a variety of tasks.  You are required to choose one operating mode each
time you employ the <code>tar</code> program, by specifying one and only one
subcommand as an argument to the <code>tar</code> command (see <a href="#Subcommands">Subcommands</a>). 
Depending on the circumstances, you may also wish to customize how the chosen
operating mode behaves.  For example, you may wish to change the way the
output looks, or the format of the files that you wish to archive may
require you to do something special in order to make the archive look right.

<p>You can customize and control <code>tar</code>'s performance by running <code>tar</code>
with one or more options (such as <kbd>-verbose</kbd> (<kbd>-v</kbd>)).  <dfn>options</dfn> are
arguments to <code>tar</code> which are (as their name suggests) optional. 
Depending on the operating mode, you may specify one or more options. 
Different options will have different effects, but in general they all
change details of how <code>tar</code> works on archives, such as archive format,
archive name, or level of user interaction.  Some options make sense with all
operating modes, while others are meaningful only with particular modes. 
You will likely use some options frequently, while you will only use
others infrequently, or not at all.  (A full list of options is available
in see <a href="#All%20options">All options</a>.)

<p>Note that <code>tar</code> options are case sensitive.  For example, the
options <kbd>-T</kbd> and <kbd>-t</kbd> are different; the first requires an
argument for stating the name of a file providing a list of <var>name</var>s,
while the second does not require an argument and is another way to
write <kbd>-list</kbd> (<kbd>-t</kbd>).

<p>In addition to the eight subcommands, there are many options to
<code>tar</code>, and three different styles for writing both: long (mnemonic)
form, short form, and old style.  These styles are discussed below. 
Both the options and the subcommands can be written in any of these three
styles.

<p><hr>
Node:Styles, Next:<a rel=next href="#Documentation%20and%20help">Documentation and help</a>, Previous:<a rel=previous href="#Using%20options">Using options</a>, Up:<a rel=up href="#tar%20invocation">tar invocation</a>
<p>

<h2><a name="Styles">The three option styles</a></h2>

<p>There are three styles for writing subcommands and options to the command
line invoking <code>tar</code>.  The different styles were developed at different
times during the history of <code>tar</code>.  These styles will be presented
below, from the most recent to the oldest.

<p>Some options must take an argument.  (For example, <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) takes the
name of an archive file as an argument.  If you do not supply an archive
file name, <code>tar</code> will use a default which may vary from site to
site; thus, we recommend that you always supply a specific archive file
name in your portable scripts.)  Where you <em>place</em> the arguments
generally depends on which style of options you choose.  We will detail
specific information relevant to each option style in the sections on the
different option styles, below.  The differences are subtle, yet can often
be very important; incorrect option placement can cause you to overwrite
a number of important files.  We urge you to note these differences, and
only use the option style(s) which make(s) the most sense to you until you
feel comfortable with the others.

<ul>
<li><a href="#Long%20options">Long options</a>:                 Long option style

<li><a href="#Short%20options">Short options</a>:                Short option style

<li><a href="#Old%20style">Old style</a>:                    Old option style

<li><a href="#Mixing">Mixing</a>:                       Mixing option styles
</ul>

<p><hr>
Node:Long options, Next:<a rel=next href="#Short%20options">Short options</a>, Previous:<a rel=previous href="#Styles">Styles</a>, Up:<a rel=up href="#Styles">Styles</a>
<p>

<h3><a name="Long%20options">Long option style</a></h3>

<p>Each option has at least one long (or mnemonic) name starting with two
dashes in a row, for example, <kbd>-list</kbd> (<kbd>-t</kbd>).  The long names are clearer than
their short or old equivalents.  It sometimes happens that a
single long option has many different names which are synonymous, such
as <kbd>-compare</kbd> and <kbd>-diff</kbd>.  In addition, long option
names can be given unique abbreviations.  For example, <kbd>-cre</kbd> can
be used in place of <kbd>-create</kbd> (<kbd>-c</kbd>) because there is no other long option
which begins with <code>cre</code>.  (One way to find this out is by trying it
and seeing what happens;<a rel=footnote href="#fn-9"><sup>9</sup></a> if
a particular abbreviation could represent more than one option, <code>tar</code>
will tell you that that abbreviation is ambiguous and you'll know that that
abbreviation won't work.  You may also choose to run <kbd>tar&nbsp;-help</kbd>
to see a list of options.)

<p>Long options are meant to be obvious and easy to remember, and their
meanings are generally easier to discern than those of their
corresponding short options (see below).  For example,

<pre>$ <kbd>tar --create --verbose --blocking-factor=20 --file=/dev/rmt0</kbd>
</pre>

<p>gives a fairly good set of hints about what the command does, even
for those not fully acquainted with <code>tar</code>.

<p>Long options which require arguments take those arguments immediately
following the option name; they are introduced by an equal sign.  For
example, the <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) option (which tells the name of the <code>tar</code>
archive) is given a file such as <code>archive.tar</code> as argument by using
the notation <kbd>-file=archive.tar</kbd> for the long option.

<p><hr>
Node:Short options, Next:<a rel=next href="#Old%20style">Old style</a>, Previous:<a rel=previous href="#Long%20options">Long options</a>, Up:<a rel=up href="#Styles">Styles</a>
<p>

<h3><a name="Short%20options">Short option style</a></h3>

<p>Most options also have a short option name.  Short options start with a
single dash, and are followed by a single character, for example, <kbd>-t</kbd> (which
is equivalent to <kbd>-list</kbd>).  The forms are absolutely identical in
function; they are interchangeable.  Short option names are often preferred
as they are faster to type than long option names.

<p>Short options which require arguments take their arguments immediately
following the option, usually separated by white space.  It is also
possible to stick the argument right after the short option name, using no
intervening space.  For example, you might write <kbd>-f&nbsp;archive.tar</kbd>
or <kbd>-farchive.tar</kbd> instead of using <kbd>-file=archive.tar</kbd>.  Both
<kbd>-file=<var>archive-name</var></kbd> and <kbd>-f&nbsp;<var>archive-name</var></kbd> denote
the option which indicates a specific archive, here named <code>archive.tar</code>.

<p>Short options' letters may be clumped together, but you are not
required to do this (as compared to old options; see below).  When short
options are clumped as a set, use one (single) dash for them all, e.g. 
<kbd>tar&nbsp;-cvf</kbd>.  Only the last option in such a set is allowed
to have an argument.<a rel=footnote href="#fn-10"><sup>10</sup></a>

<p>When the options are separated, the argument for each option which requires
an argument directly follows that option, as is usual for Unix programs. 
For example:

<pre>$ <kbd>tar -c -v -b 20 -f /dev/rmt0</kbd>
</pre>

<p>If you reorder short options' locations, be sure to move any arguments
that belong to them.  If you do not move the arguments properly, you may
end up overwriting files.

<p><hr>
Node:Old style, Next:<a rel=next href="#Mixing">Mixing</a>, Previous:<a rel=previous href="#Short%20options">Short options</a>, Up:<a rel=up href="#Styles">Styles</a>
<p>

<h3><a name="Old%20style">Old option style</a></h3>

<p>Like short options, old options are single letters.  However, old options
must be written together as a single clumped set, without spaces separating
them or dashes preceding them.<a rel=footnote href="#fn-11"><sup>11</sup></a>  This set
of letters must be the first to appear on the command line, after the
<code>tar</code> program name and some whitespace; old options cannot appear
anywhere else.  The letter of an old option is exactly the same letter
as the corresponding short option.  For example, the old option <kbd>t</kbd>
is the same as the short option <kbd>-t</kbd>, and consequently, the same as the
long option <kbd>-list</kbd> (<kbd>-t</kbd>).  So for example, the command <kbd>tar&nbsp;cv</kbd>
specifies the option <kbd>-v</kbd> in addition to the subcommand <kbd>-c</kbd>.

<p>When options that need arguments are given together with the command,
all the associated arguments follow, in the same order as the options. 
Thus, the example given previously could also be written in the old
style as follows:

<pre>$ <kbd>tar cvbf 20 /dev/rmt0</kbd>
</pre>

<p>Here, <code>20</code> is the argument of <kbd>-b</kbd> and <code>/dev/rmt0</code> is
the argument of <kbd>-f</kbd>.

<p>On the other hand, this old-style syntax makes it difficult to match
option letters with their corresponding arguments, and is often
confusing.  In the command <kbd>tar&nbsp;cvbf&nbsp;20&nbsp;/dev/rmt0</kbd>, for example,
<code>20</code> is the argument for <kbd>-b</kbd>, <code>/dev/rmt0</code> is the
argument for <kbd>-f</kbd>, and <kbd>-v</kbd> does not have a corresponding
argument.  Even using short options, as in <kbd>tar&nbsp;-c&nbsp;-v&nbsp;-b&nbsp;20&nbsp;-f&nbsp;/dev/rmt0</kbd>, is clearer, putting all arguments next to the option they
pertain to.

<p>If you want to reorder the letters in the old option argument, be
sure to reorder any corresponding argument appropriately.

<p>This old way of writing <code>tar</code> options can surprise even experienced
users.  For example, the two commands:

<pre>$ <kbd>tar cfz archive.tar.gz file</kbd>
$ <kbd>tar -cfz archive.tar.gz file</kbd>
</pre>

<p>are quite different!  The first example uses <code>archive.tar.gz</code> as
the value for option <kbd>f</kbd> and recognizes the option <kbd>z</kbd>.  The
second example, however, uses <code>z</code> as the value for option
<kbd>f</kbd>--probably not what the user intended.

<p>This example could be corrected in many ways, among which the
following are equivalent:

<pre>$ <kbd>tar -czf archive.tar.gz file</kbd>
$ <kbd>tar -cf archive.tar.gz -z file</kbd>
$ <kbd>tar cf archive.tar.gz -z file</kbd>
</pre>

<p>As far as we know, all <code>tar</code> programs support old options. 
This <code>tar</code> supports them not only for historical reasons, but also
because many people are used to them.  Old options have their own
virtues, like inter-operability in portable scripts, and concise writing.

<p><hr>
Node:Mixing, Previous:<a rel=previous href="#Old%20style">Old style</a>, Up:<a rel=up href="#Styles">Styles</a>
<p>

<h3><a name="Mixing">Mixing option styles</a></h3>

<p>All three styles may be intermixed in a single <code>tar</code> command, so
long as the rules for each style are fully respected.<a rel=footnote href="#fn-12"><sup>12</sup></a>  old-style options and either of the
modern styles of options may be mixed within a single <code>tar</code> command. 
However, old-style options must be introduced as the first arguments only,
following the rule for old options (old options must appear directly
after the <code>tar</code> command and some whitespace).  Modern options may
be given only after all arguments to the old options have been collected. 
If this rule is not respected, a modern option might be falsely interpreted
as the value of the argument to one of the old-style options.

<p>For example, all the following commands are wholly equivalent, and
illustrate the many combinations and orderings of option styles.

<pre>$ <kbd>tar --create --file=archive.tar</kbd>
$ <kbd>tar --create -f archive.tar</kbd>
$ <kbd>tar --create -farchive.tar</kbd>
$ <kbd>tar --file=archive.tar --create</kbd>
$ <kbd>tar --file=archive.tar -c</kbd>
$ <kbd>tar -c --file=archive.tar</kbd>
$ <kbd>tar -c -f archive.tar</kbd>
$ <kbd>tar -c -farchive.tar</kbd>
$ <kbd>tar -cf archive.tar</kbd>
$ <kbd>tar -cfarchive.tar</kbd>
$ <kbd>tar -f archive.tar --create</kbd>
$ <kbd>tar -f archive.tar -c</kbd>
$ <kbd>tar -farchive.tar --create</kbd>
$ <kbd>tar -farchive.tar -c</kbd>
$ <kbd>tar c --file=archive.tar</kbd>
$ <kbd>tar c -f archive.tar</kbd>
$ <kbd>tar c -farchive.tar</kbd>
$ <kbd>tar cf archive.tar</kbd>
$ <kbd>tar f archive.tar --create</kbd>
$ <kbd>tar f archive.tar -c</kbd>
$ <kbd>tar fc archive.tar</kbd>
</pre>

<p>On the other hand, the following commands are <em>not</em> equivalent to
the previous set:

<pre>$ <kbd>tar -f -c archive.tar</kbd>
$ <kbd>tar -fc archive.tar</kbd>
$ <kbd>tar -fcarchive.tar</kbd>
$ <kbd>tar -farchive.tarc</kbd>
$ <kbd>tar cfarchive.tar</kbd>
</pre>

<p>These last examples mean something completely different from what the
user intended (judging by the example in the previous set which uses long
options, whose intent is therefore very clear).  The first four specify
that the <code>tar</code> archive would be a file named <code>-c</code>, <code>c</code>,
<code>carchive.tar</code> or <code>archive.tarc</code>, respectively.  The first two
examples also specify a single non-option, <var>name</var> argument having the
value <code>archive.tar</code>.  The last example contains only old-style option
letters (repeating option <kbd>c</kbd> twice), not all of which are meaningful
(for example, <kbd>.</kbd>, <kbd>h</kbd>, or <kbd>i</kbd>), with no argument value.

<p><hr>
Node:Documentation and help, Next:<a rel=next href="#interactive">interactive</a>, Previous:<a rel=previous href="#Styles">Styles</a>, Up:<a rel=up href="#tar%20invocation">tar invocation</a>
<p>

<h2><a name="Documentation%20and%20help">Documentation and troubleshooting</a></h2>

<ul>
<li><a href="#version">version</a>:                      Knowing the <code>tar</code> version

<li><a href="#help">help</a>:                         Getting the list of possible options

<li><a href="#verbose">verbose</a>:                      Checking <code>tar</code> progress

<li><a href="#checkpoint">checkpoint</a>:                   Being warned of all directories

<li><a href="#show-omitted-dirs">show-omitted-dirs</a>:            Being warned of skipped directories

<li><a href="#totals">totals</a>:                       Sizeing the amount of data written

<li><a href="#block-number">block-number</a>:                 Adding physical addresses to messages
</ul>

<p><hr>
Node:version, Next:<a rel=next href="#help">help</a>, Previous:<a rel=previous href="#Documentation%20and%20help">Documentation and help</a>, Up:<a rel=up href="#Documentation%20and%20help">Documentation and help</a>
<p>

<h3><a name="version">Knowing the <code>tar</code> version</a></h3>

<p>To be careful, the first thing is to check that you are really using the
proper <code>tar</code>.  The <kbd>-version</kbd> option will generate a
message giving confirmation that you are using this <code>tar</code>, with the
precise version you are using.  <code>tar</code> identifies itself and prints the
version number to the standard output, then immediately exits successfully,
without doing anything else, ignoring all other options.  For example,
<kbd>tar&nbsp;-version</kbd> might return:

<pre>tar (Free paxutils) 2.4i
</pre>

<p>The first occurrence of <code>tar</code> in the result above is the program
name in the package (for example, <code>rmt</code> is another program), while
the second occurrence of <code>tar</code> is the name of the package itself,
containing possibly many programs.  The package is currently named
<code>tar</code>, after the name of the main program it contains.<a rel=footnote href="#fn-13"><sup>13</sup></a>

<p><hr>
Node:help, Next:<a rel=next href="#verbose">verbose</a>, Previous:<a rel=previous href="#version">version</a>, Up:<a rel=up href="#Documentation%20and%20help">Documentation and help</a>
<p>

<h3><a name="help">Getting the list of possible options</a></h3>

<p>You might also want to check the spelling or meaning
of some particular <code>tar</code> option, without resorting to this manual,
once you have read it.  <code>tar</code> has a short help
feature, triggerable through the <kbd>-help</kbd> option.  By using this
option, <code>tar</code> will print a usage message listing all available
options on standard output, then exit successfully, without doing
anything else and ignoring all other options.  Even though this is only a
brief summary, it may be several screens long.  So, if you are not
using some kind of scrollable window, you might prefer to use something
like:

<pre>$ <kbd>tar --help | less</kbd>
</pre>

<p>presuming, here, that you like using <code>less</code> for a pager.  Other
popular pagers are <code>more</code> and <code>pg</code>.  If you know about some
<var>keyword</var> which interests you and do not want to read all the
<kbd>-help</kbd> output, another common idiom is:

<pre>$ <kbd>tar --help | grep <var>keyword</var></kbd>
</pre>

<p>to get only the pertinent lines.

<p>The perceptive reader would have noticed some contradiction in the
previous paragraphs.  It is written that both <kbd>-version</kbd> and
<kbd>-help</kbd> print something, and have all other options ignored.  In
fact, they cannot ignore each other, and one of them has to win.  We do
not specify which is stronger; experiment if you really wonder!

<p>The short help output is quite succinct, and you might have to get back
to the full documentation for precise points.  If you are reading this
paragraph, you already have the <code>tar</code> manual in some form.  This manual
is available in printed form, as a kind of small book.  It may be printed out
of the <code>tar</code> distribution, provided you have TeX already installed
somewhere, and a laser printer around.  Just configure the distribution,
execute the command <kbd>make&nbsp;dvi</kbd>, then print <code>doc/tar.dvi</code> the
usual way (contact your local <em>guru</em> to know how).  If <code>tar</code> has
been conveniently installed at your site, this manual is also available
in interactive, hypertextual form as an Info file.  Just call <kbd>info&nbsp;tar</kbd> or, if you do not have the <code>info</code> program handy, use the Info
reader provided within GNU Emacs, and choose <kbd>tar</kbd> from the main Info
menu (with <kbd>m tar &lt;RET&gt;</kbd>).

<p>A short reference to <code>tar</code> in the form of a <code>man</code> page is also
provided.  Currently, it doesn't tell much more than <kbd>tar -help</kbd> does. 
Other <code>man</code> pages exist for <code>tar</code>, written at the time <code>tar</code>
did not install any <code>man</code> pages on its own.  The string <code>tar
(Free paxutils) 2.4i</code> appears in the title of the <em>normal</em>
<code>man</code> page.

<p><hr>
Node:verbose, Next:<a rel=next href="#checkpoint">checkpoint</a>, Previous:<a rel=previous href="#help">help</a>, Up:<a rel=up href="#Documentation%20and%20help">Documentation and help</a>
<p>

<h3><a name="verbose">Checking <code>tar</code> progress</a></h3>

<p>Typically, <code>tar</code> performs most subcommands without reporting any
information to the user except error messages.  When using <code>tar</code> with
many options, particularly ones with complicated or difficult-to-predict
behavior, it is possible to make serious mistakes.  <code>tar</code> provides
several options that make observing its behavior easier.  These options cause
<code>tar</code> to print information as it progresses in its job, and you might
want to use them just to be more careful about what is going on, or
merely to entertain yourself.  If you have encountered a problem when
operating on an archive, however, you may need more information than just
an error message in order to solve the problem.  The following options
can be helpful diagnostic tools.

<p>Normally, the <kbd>-list</kbd> (<kbd>-t</kbd>) command to list an archive prints just
the file names (one per line), and the other commands are silent. 
When used with most subcommands, the <kbd>-verbose</kbd> (<kbd>-v</kbd>) option causes
<code>tar</code> to print the name of each file or archive member as it
is processed.  This and the other options which make <code>tar</code> print
status information can be useful in monitoring <code>tar</code>.

<p>With <kbd>-create</kbd> (<kbd>-c</kbd>) or <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), <kbd>-verbose</kbd> (<kbd>-v</kbd>) used once
just prints the names of the files or members as they are processed. 
Using it twice causes <code>tar</code> to print a longer listing (reminiscent
of <kbd>ls -l</kbd>) for each member.  Since <kbd>-list</kbd> (<kbd>-t</kbd>) already prints
the names of the members, <kbd>-verbose</kbd> (<kbd>-v</kbd>) used once with <kbd>-list</kbd> (<kbd>-t</kbd>)
causes <code>tar</code> to print an <kbd>ls -l</kbd> type listing of the files
in the archive.  The following examples both extract members with
long list output:

<pre>$ <kbd>tar --extract --file=archive.tar --verbose --verbose</kbd>
$ <kbd>tar xvv archive.tar</kbd>
</pre>

<p>Verbose output appears on the standard output except when an archive is
being written to the standard output, as with <kbd>tar -create -file=-
-verbose</kbd> (<kbd>tar cfv -</kbd>, or even <kbd>tar cv</kbd>--if the installer let
standard output be the default archive).  In that case <code>tar</code> writes
verbose output to the standard error stream.

<p>Some people felt the need to produce an archive on standard output,
while still
wishing to segregate verbose output from error output.  A possible
approach (on systems allowing it) would be to use a named pipe to receive
the archive, and to have the consumer process read from that named pipe. 
This has the advantage of leaving standard output free to receive verbose
output, all separate from errors.

<p><hr>
Node:checkpoint, Next:<a rel=next href="#show-omitted-dirs">show-omitted-dirs</a>, Previous:<a rel=previous href="#verbose">verbose</a>, Up:<a rel=up href="#Documentation%20and%20help">Documentation and help</a>
<p>

<h3><a name="checkpoint">Being warned of all directories</a></h3>

<p>The <kbd>-checkpoint</kbd> option prints an occasional message as <code>tar</code>
reads or writes the archive.  In fact, it print directory names while
reading the archive.  It is designed for those who don't need the more
detailed (and voluminous) output of <kbd>-block-number</kbd> (<kbd>-R</kbd>), but do want
visual confirmation that <code>tar</code> is actually making progress.

<p><hr>
Node:show-omitted-dirs, Next:<a rel=next href="#totals">totals</a>, Previous:<a rel=previous href="#checkpoint">checkpoint</a>, Up:<a rel=up href="#Documentation%20and%20help">Documentation and help</a>
<p>

<h3><a name="show-omitted-dirs">Being warned of skipped directories</a></h3>

<p>The <kbd>-show-omitted-dirs</kbd> option, when reading an archive--with
<kbd>-list</kbd> (<kbd>-t</kbd>) or <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), for example--causes a message
to be printed for each directory in the archive which is skipped. 
This happens regardless of the reason for skipping: the directory might
not have been named on the command line (implicitly or explicitly),
or it might be excluded by the use of the <kbd>-exclude=<var>pattern</var></kbd> option, or
for some other reason.

<p><hr>
Node:totals, Next:<a rel=next href="#block-number">block-number</a>, Previous:<a rel=previous href="#show-omitted-dirs">show-omitted-dirs</a>, Up:<a rel=up href="#Documentation%20and%20help">Documentation and help</a>
<p>

<h3><a name="totals">Sizeing the amount of data written</a></h3>

<p>The <kbd>-totals</kbd> option--which is only meaningful when used with
<kbd>-create</kbd> (<kbd>-c</kbd>)--causes <code>tar</code> to print the total amount written to
the archive, after it has been fully created.

<p>Currently, the amount written represents the size of the created archive
before it gets compressed.  One wants to estimate the size of the used portion of a tape
receiving a compressed archive, and as it stands, the option is not as useful
as it should be.  Some later version of <code>tar</code> will change the meaning
of this option to print the total amount written once compression has occurred.

<p><hr>
Node:block-number, Previous:<a rel=previous href="#totals">totals</a>, Up:<a rel=up href="#Documentation%20and%20help">Documentation and help</a>
<p>

<h3><a name="block-number">Adding physical addresses to messages</a></h3>

<p>If <kbd>-block-number</kbd> (<kbd>-R</kbd>) is used, <code>tar</code> prints, along with every
message it would normally produce, the block number within the archive
where the message was triggered (See <a href="#Blocking">Blocking</a>, to understand blocks
and records).  Also, supplementary messages are triggered when reading
blocks full of <code>NUL</code>s, or when hitting end of file on the archive. 
As of now, if the archive is properly terminated with a <code>NUL</code> block,
the reading of the file may stop before end of file is met, so the position
of end of file will not usually show when <kbd>-block-number</kbd> (<kbd>-R</kbd>) is used. 
Note that <code>tar</code> drains the archive before exiting when reading the
archive from a pipe.

<p>This option is especially useful when reading damaged archives, since
it helps pinpoint the damaged sections.  It can also be used with
<kbd>-list</kbd> (<kbd>-t</kbd>) when listing a filesystem backup tape, allowing you to
choose among several backup tapes when retrieving a file later, in
favor of the tape where the file appears earliest (closest to the
front of the tape).

<p>Some later version of <code>tar</code> might use <kbd>-number-blocks</kbd>
instead of <kbd>-block-number</kbd>, so <kbd>-block</kbd> would then expand to
<kbd>-blocking-factor=<var>blocks</var></kbd> (<kbd>-b <var>blocks</var></kbd>) unambiguously.

<p><hr>
Node:interactive, Previous:<a rel=previous href="#Documentation%20and%20help">Documentation and help</a>, Up:<a rel=up href="#tar%20invocation">tar invocation</a>
<p>

<h2><a name="interactive">Asking for confirmation during subcommands</a></h2>

<p>Typically, <code>tar</code> carries out a command without stopping for further
instructions.  In some situations, however, you may want to exclude some
files and archive members from the operation (for instance if disk or storage
space is tight).  You can do this by excluding certain files automatically
(see <a href="#Choosing">Choosing</a>), or by performing a subcommand interactively, using
the <kbd>-interactive</kbd> (<kbd>-confirmation</kbd>, <kbd>-w</kbd>) option.

<p>When the <kbd>-interactive</kbd> (<kbd>-confirmation</kbd>, <kbd>-w</kbd>) option is specified, before reading, writing,
or deleting files, <code>tar</code> first prints a message for each such file,
telling what action it intends to take, then asks for confirmation on
the terminal.  The actions which require confirmation include adding a
file to the archive, extracting a file from the archive, deleting a file
from the archive, and deleting a file from disk.  To confirm the action,
you must type a line of input beginning with <kbd>y</kbd>.  If your input line
begins with anything other than <kbd>y</kbd>, <code>tar</code> skips that file.

<p>If <code>tar</code> is reading the archive from the standard input, <code>tar</code>
opens the file <code>/dev/tty</code> to support the interactive communications.

<p><hr>
Node:Subcommands, Next:<a rel=next href="#Choosing">Choosing</a>, Previous:<a rel=previous href="#tar%20invocation">tar invocation</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="Subcommands"><code>tar</code> subcommands</a></h1>

<p>A long while ago, <code>tar</code> once was a set of related programs,
each dedicated to a particular function, like the creation of a new
archive, listing the contents of an archive, or performing extraction. 
It was done that way in order to have smaller independent programs,
and better limit the memory requirements of each of them, at a time when
computer memory was expensive.  Nowadays, such a split is no longer
necessary, and the single <code>tar</code> program has a few special options,
named <dfn>subcommands</dfn>, meant to set the particular function to be achieved
in a <code>tar</code> run, just as users once had to choose exactly which
program of the <code>tar</code> family they needed for a given job.

<p>This chapter has the purpose of presenting such <code>tar</code> subcommands
or operating modes.  It also introduces many options meant to precisely control,
or fine-tune, the behavior of the subcommands.  The separation between
subcommands and fine-tuning options is not cast in stone, and should
not be overemphasized.  This <code>tar</code> does implement such
precise distinctions internally, of course, but this does not preclude
future changes or adjustments.  In any case, none of these changes, if
they ever occur, should much affect how <code>tar</code> is used in practice.

<p>Besides <kbd>-help</kbd> and <kbd>-version</kbd>, which trigger
special behavior in <code>tar</code>, the most popular subcommands are
<kbd>-list</kbd> (<kbd>-t</kbd>), <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), and <kbd>-create</kbd> (<kbd>-c</kbd>); these are
available in almost all implementations of the <code>tar</code> program. 
The remaining subcommands are <kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>), <kbd>-append</kbd> (<kbd>-r</kbd>),
<kbd>-update</kbd> (<kbd>-u</kbd>),<a rel=footnote href="#fn-14"><sup>14</sup></a>
<kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>), and <kbd>-delete</kbd>.  These remaining subcommands
are often not offered in various <code>tar</code>s, and when available, they
seem to be much less often used than the three popular ones.

<ul>
<li><a href="#list">list</a>:                         How to list archives

<li><a href="#extract">extract</a>:                      How to extract members from an archive

<li><a href="#create">create</a>:                       How to create archives

<li><a href="#Applications">Applications</a>:                 Other uses for <code>tar</code>
</ul>

<p><hr>
Node:list, Next:<a rel=next href="#extract">extract</a>, Previous:<a rel=previous href="#Subcommands">Subcommands</a>, Up:<a rel=up href="#Subcommands">Subcommands</a>
<p>

<h2><a name="list">How to list archives</a></h2>

<p>Frequently, you will find yourself wanting to determine exactly what a
particular archive contains.  You can use the <kbd>-list</kbd> (<kbd>-t</kbd>) subcommand
to get the member names as they currently appear in the archive, as well
as various attributes of the files at the time they were archived.  For
example, you can examine the archive <code>collection.tar</code> that you
created in the last section with the command

<pre>$ <kbd>tar --list --file=collection.tar</kbd>
</pre>

<p>The output of <code>tar</code> would then be:

<pre>blues
folk
jazz
</pre>

<p>The archive <code>bfiles.tar</code> would list as follows:

<pre>./birds
baboon
./box
</pre>

<p>Be sure to use a <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) option, just as with <kbd>-create</kbd> (<kbd>-c</kbd>),
to specify the name of the archive.

<p>If you use the <kbd>-verbose</kbd> (<kbd>-v</kbd>) option with <kbd>-list</kbd> (<kbd>-t</kbd>), then
<code>tar</code> will print out a listing reminiscent of <kbd>ls&nbsp;-l</kbd>,
showing owner, file size, and so forth.

<p>If you had used <kbd>-verbose</kbd> (<kbd>-v</kbd>) mode, the example above would look
like:

<pre>$ <kbd>tar --list --verbose --file=collection.tar</kbd>
-rw-rw-rw- myself users 42 1990-05-21 13:29 blues
-rw-rw-rw- myself users 62 1990-05-23 10:55 folk
-rw-rw-rw- myself users 40 1990-05-21 13:30 jazz
</pre>

<p>You can specify one or more individual member names as arguments when
using <kbd>list</kbd>.  In this case, <code>tar</code> will only list the
names of members you identify.  For example, <kbd>tar&nbsp;-list&nbsp;-file=afiles.tar&nbsp;apple</kbd> would only print <code>apple</code>.

<p>Because <code>tar</code> preserves paths, file names must be specified as they
appear in the archive (that is, relative to the directory from which the
archive was created).  Therefore, it is essential when specifying member
names to <code>tar</code> that you give the exact member names.  For example,
<kbd>tar&nbsp;-list&nbsp;-file=bfiles&nbsp;birds</kbd> would produce an error message
something like <code>tar: birds: Not found in archive</code>, because there is
no member named <code>birds</code>, only one named <code>./birds</code>.  While the
names <code>birds</code> and <code>./birds</code> name the same file, <em>member</em>
names are compared using a simplistic name comparison, in which an exact
match is necessary.  See <a href="#absolute-names">absolute-names</a>.

<p>However, <kbd>tar&nbsp;-list&nbsp;-file=collection.tar&nbsp;folk</kbd> would respond
with <code>folk</code>, because <code>folk</code> is in the archive file
<code>collection.tar</code>.  If you are not sure of the exact file name, try
listing all the files in the archive and searching for the one you
expect to find; remember that if you use <kbd>-list</kbd> (<kbd>-t</kbd>) with no file
names as arguments, <code>tar</code> will print the names of all the members
stored in the specified archive.

<p>As an exception to member name preservation when creating the archive,
<code>tar</code> on MS-DOS/MS-Windows mirrors the DOS-style backslashes into
Unix-style forward slashes.  This is because the bulk of <code>tar</code> code
is deeply entrenched in the Unix world and assumes that forward slashes
are used in too many places.  Converting slashes automatically lets the
users specify files as they are used to on those systems.  But it also
means that you need to remember about this conversion, so you won't be
surprised when <code>tar</code> lists the files differently than what you
typed on the command line.  For example:

<pre>$ <kbd>tar -cvf c:\files\backup\today.tar d:\data\may97 d:\data\june97</kbd>
data/may97
data/june97
$ <kbd>tar -xvf c:\files\backup\today.tar data\may97</kbd>
data/may97
</pre>

<p>In the past, <code>tar</code> showed dates as <code>Nov 21 1996</code>; now it shows
them as <code>1996-11-21</code>.  This is in accordance with the international
standard ISO 8601.<a rel=footnote href="#fn-15"><sup>15</sup></a>

<p>Sometime in the future, local date formats will become readily
available, including the civilian American month-day-year format. 
However, as a general rule, we suggest that you use the ISO 8601 date
format which lists units of time in a larger-to-smaller order.

<p>For more information, see
<a href="http://www.ft.uni-erlangen.de/~mskuhn/iso-time.html">http://www.ft.uni-erlangen.de/~mskuhn/iso-time.html</a>, which
contains a detailed explanation of the ISO 8601 standard.

<ul>
<li><a href="#Reading">Reading</a>:                      Options to help read archives

<li><a href="#compare">compare</a>:                      Comparing members with the file system
</ul>

<p><hr>
Node:Reading, Next:<a rel=next href="#compare">compare</a>, Previous:<a rel=previous href="#list">list</a>, Up:<a rel=up href="#list">list</a>
<p>

<h3><a name="Reading">Options to help read archives</a></h3>

<p>If you're not sure of the blocking factor of an archive, you can read the
archive by specifying <kbd>-read-full-records</kbd> (<kbd>-B</kbd>) and <kbd>-blocking-factor=<var>blocks</var></kbd> (<kbd>-b <var>blocks</var></kbd>),
using a blocking factor larger than what the archive uses.  This lets
you avoid having to determine the blocking factor of an archive. 
See <a href="#blocking-factor">blocking-factor</a>.

<ul>
<li><a href="#read-full-records">read-full-records</a>:            Reading full records

<li><a href="#ignore-zeros">ignore-zeros</a>:                 Ignoring blocks of zeros

<li><a href="#ignore-failed-read">ignore-failed-read</a>:           Ignoring read failures
</ul>

<p><hr>
Node:read-full-records, Next:<a rel=next href="#ignore-zeros">ignore-zeros</a>, Previous:<a rel=previous href="#Reading">Reading</a>, Up:<a rel=up href="#Reading">Reading</a>
<p>

<h4><a name="read-full-records">Reading full records</a></h4>

<p>The <kbd>-read-full-records</kbd> (<kbd>-B</kbd>) option is used in conjunction with
<kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) to read an archive which contains incomplete records,
or one which has a blocking factor less than the one specified.

<p>If <kbd>-read-full-records</kbd> (<kbd>-B</kbd>) is used, <code>tar</code> will not panic if an
attempt to read a record from the archive does not return a full record. 
Instead, <code>tar</code> will keep reading until it has obtained a full
record.

<p>This option is turned on by default when <code>tar</code> is reading
an archive from standard input, or from a remote machine.  This is
because on BSD Unix systems, a read of a pipe will return however
much happens to be in the pipe, even if it is less than <code>tar</code>
requested.  If this option was not used, <code>tar</code> would fail as
soon as it read an incomplete record from the pipe.

<p>This option is also useful with the commands for updating an archive.

<p>Normally, <code>tar</code> will request data in full record increments from
an archive storage device.  If the device cannot return a full record,
<code>tar</code> will report an error.  However, some devices do not always return
full records, or do not require the last record of an archive to be padded
out to the next record boundary.  To keep reading until you obtain a full
record, or to accept an incomplete record if it contains an end-of-archive
marker, specify the <kbd>-read-full-records</kbd> (<kbd>-B</kbd>) option in conjunction with
the <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) or <kbd>-list</kbd> (<kbd>-t</kbd>) subcommands.  See <a href="#read-full-records">read-full-records</a>.

<p>The <kbd>-read-full-records</kbd> (<kbd>-B</kbd>) option is turned on by default when <code>tar</code>
reads an archive from standard input, or from a remote machine.  This is
because on BSD Unix systems, attempting to read a pipe returns however
much happens to be in the pipe, even if it is less than was requested. 
If this option were not enabled, <code>tar</code> would fail as soon as it read
an incomplete record from the pipe.

<p><hr>
Node:ignore-zeros, Next:<a rel=next href="#ignore-failed-read">ignore-failed-read</a>, Previous:<a rel=previous href="#read-full-records">read-full-records</a>, Up:<a rel=up href="#Reading">Reading</a>
<p>

<h4><a name="ignore-zeros">Ignoring blocks of zeros</a></h4>

<p>Normally, <code>tar</code> stops reading when it encounters a block of zeros
between file entries (which usually indicates the end of the archive). 
POSIX mandates two blocks of zeros for representing the end of the archive. 
Some <code>tar</code> programs produce two such blocks on write and expect two on
read, others produce one and expect one.  This <code>tar</code> produces two and
expects one, but is careful, while reading a pipe, to fully drain it until
the end of file.  This avoids spurious messages about <cite>broken pipes</cite>.

<p>Yet there are many <code>tar</code> programs around and many ways to produce
compressed archives, and also many ways to read them.  It happens that
when <code>gunzip</code> and <code>tar</code> collaborate to explode an archive,
<code>gunzip</code> quits while <code>tar</code> still expects a full-sized record,
with proper padding after the end of archive block.  This surely caused
a few headaches to users observing the breaking of the pipe within their
<code>sh</code> scripts, and yet unable to reproduce the problem interactively,
one line at a time, within their <code>csh</code> shell.  Contrarily to <code>sh</code>,
<code>csh</code> remains silent about broken pipes!

<p>The <kbd>-ignore-zeros</kbd> (<kbd>-i</kbd>) option causes <code>tar</code> to ignore blocks of
zeros in the archive and to read until the real end of the archive file. 
<kbd>-ignore-zeros</kbd> (<kbd>-i</kbd>) allows <code>tar</code> to completely read an archive
which contains a block of zeros before the end (for example, a damaged archive,
or one which was created by <code>cat</code>-ing several archives together).

<p>The <kbd>-ignore-zeros</kbd> (<kbd>-i</kbd>) option is turned off by default because many
versions of <code>tar</code> write garbage after the end-of-archive entry, since
that part of the media is normally not supposed to be read.  The garbage
is likely to be duplicate copies of the previous chunk of the archive,
which will sometimes cause files to be overwritten or truncated since it
may look like valid new archived files.

<p><hr>
Node:ignore-failed-read, Previous:<a rel=previous href="#ignore-zeros">ignore-zeros</a>, Up:<a rel=up href="#Reading">Reading</a>
<p>

<h4><a name="ignore-failed-read">Ignoring read failures</a></h4>

<p>When the <kbd>-ignore-failed-read</kbd> option is given, <code>tar</code> will
not exit with an error (nonzero) status, for the sole reason of having
encountered unreadable files or directories.

<p>When backing up a living file system, there is a time window between the
phase when <code>tar</code> scans directories and the phase when it tries to
open files to dump them.  It is possible, and even common, for the file to
disappear during this window.  The <kbd>-ignore-failed-read</kbd> option is a
way to ask <code>tar</code> not to report such problems as an error set in the
exit status once the dump is completed.  Diagnostics are still reported,
as the option does not turn them off.

<p>A disappearing file is just a stronger case of the following problem.  When a
file shrinks or grows while being backed up, <code>tar</code> makes some stunts
to ensure the integrity of the archive, so the file length in the header
already written does not lie about what is found in the archive.  This might
imply padding the file with zeroes up to the proper length, or writing less
than the actual file contents.  In such cases, <code>tar</code> protected the
integrity of the archive, but surely not the integrity of the file, which
just cannot be restored properly.  The <kbd>-ignore-failed-read</kbd> more
or less means to not return an error and continue processing even when file
integrity is known to be lost, as long as the archive integrity is preserved.

<p>The {No Value For "-ignore-failed-read"} also inhibits an error exit also for
failed opening of directories, files for which dumping type is not known,
or with the <kbd>-remove-files</kbd> option, failed removal of files after dump.

<p><hr>
Node:compare, Previous:<a rel=previous href="#Reading">Reading</a>, Up:<a rel=up href="#list">list</a>
<p>

<h3><a name="compare">Comparing members with the file system</a></h3>

<p>The <kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>) subcommand compares
specified archive members against files with the same names, and then
reports differences in file size, mode, owner, modification date and
contents.  You should <em>only</em> specify archive member names, not file
names.  If you do not name any members, then <code>tar</code> will compare the
entire archive.  If a file is represented in the archive but does not
exist in the file system, <code>tar</code> reports a difference.

<p>You have to specify the record size of the archive when modifying an
archive with a non-default record size.

<p><code>tar</code> ignores files in the file system that do not have
corresponding members in the archive.

<p>The following example compares the archive members <code>rock</code>,
<code>blues</code>, and <code>funk</code> in the archive <code>bluesrock.tar</code> with
files of the same name in the file system.  (Note that there is no file
<code>funk</code>; <code>tar</code> will report an error message.)

<pre>$ <kbd>tar --compare --file=bluesrock.tar rock blues funk</kbd>
rock
blues
funk: File does not exist
</pre>

<p>If the file in the archive is a link, <code>tar</code> may have a different
error message, such as

<pre>funk: Does not exist
</pre>

<p>The intent behind the <kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>) option is to check whether the
archive represents the current state of files on disk, more than to validate
the integrity of the archive media.  For this latter goal, See <a href="#verify">verify</a>.

<p>Some filesystems, such as the FAT and VFAT used on MS-DOS and
MS-Windows, only maintain file modification times up to the nearest even
second.  <code>tar</code> compiled for such systems knows about this, and
doesn't report a difference in mod times unless it is larger than one
second.  But if you run <code>tar</code> on Unix and your files reside on a
FAT disk (via some network interface), you could have some false alarms
in this case.

<p><hr>
Node:extract, Next:<a rel=next href="#create">create</a>, Previous:<a rel=previous href="#list">list</a>, Up:<a rel=up href="#Subcommands">Subcommands</a>
<p>

<h2><a name="extract">How to extract members from an archive</a></h2>

<p>Creating an archive is only half the job--there is no point in storing
files in an archive if you can't retrieve them.  The act of retrieving
members from an archive so they can be used and manipulated as
unarchived files again is called <dfn>extraction</dfn>.  To extract files
from an archive, use the <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) subcommand.  As with
<kbd>-create</kbd> (<kbd>-c</kbd>), specify the name of the archive with <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>). 
Extracting an archive does not modify the archive in any way; you can
extract it multiple times if you want or need to.

<p>Using <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), you can extract an entire archive, or specific
files.  The files can be directories containing other files, or not.  As
with <kbd>-create</kbd> (<kbd>-c</kbd>) and <kbd>-list</kbd> (<kbd>-t</kbd>), you can use the short or the
long form of the subcommand without affecting the performance.

<ul>
<li><a href="#extract%20options">extract options</a>:              Options used for extraction

<li><a href="#Writing">Writing</a>:                      Changing how <code>tar</code> writes files

<li><a href="#Preventing%20overwrite">Preventing overwrite</a>:         Options to prevent overwriting files

<li><a href="#Unlinking">Unlinking</a>:                    Options to destroy files

<li><a href="#Attributes">Attributes</a>:                   Handling file attributes

<li><a href="#Scarce">Scarce</a>:                       Coping with scarce resources
</ul>

<p><hr>
Node:extract options, Next:<a rel=next href="#Writing">Writing</a>, Previous:<a rel=previous href="#extract">extract</a>, Up:<a rel=up href="#extract">extract</a>
<p>

<h3><a name="extract%20options">Options used for extraction</a></h3>

<p>The previous chapter showed how to use <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) to extract
an archive into the filesystem.  Various options cause <code>tar</code> to
extract more information than just file contents, such as the owner,
the permissions, the modification date, and so forth.  This section
presents options to be used with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) when certain special
considerations arise.  You can review the information presented in
<a href="#extract">extract</a> for more basic information about the
<kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) subcommand.

<p>Within a <code>tar</code> archive, a socket is stored as a pipe.

<p>When archives created on Unix are extracted on MS-DOS and MS-Windows
3.x, several problems pop up due to their incompatibilities with the
Unix filesystem.  <code>tar</code> has several tricks up its sleeves to
overcome such problems:

<ul>
<li>Illegal characters in file names:
the MS-DOS filesystem disallows certain characters from appearing in a file
name.  Except on Windows 9X, it also doesn't allow file names with a
leading dot and file names with more that a single dot in the basename
of the file.

<p><code>tar</code> tries to repair such names automatically, by replacing
the offending characters with legal ones.  For example, <code>.emacs</code> is
exracted as <code>_emacs</code>, <code>foo.bar.c</code> will be converted to
<code>foo_bar.c</code>, <code>lost+found</code> will become <code>lost_found</code>, and
so forth. 
(<code>tar</code> even tries to be intelligent by treating some cases
specially; for example, files which end with <code>.c++</code> are extracted
as <code>.cxx</code>.)

<p>When the file is thus renamed, <code>tar</code> will print a message to that
effect when operating verbosely (see <a href="#verbose">verbose</a>).  Note that if a
directory needs to be renamed, <code>tar</code> will print such a message for
all the files in that directory.

</p><li>DOS device names:
MS-DOS and MS-Windows define their own reserved names for character
devices.  For example, the console device is <code>CON</code>, the printer
device is <code>PRN</code>, the serial port device is <code>AUX</code>, and so forth.

<p>These names are special on DOS, in that files with these names, if they
exist in any directory, are inaccessible: the device driver will
intercept any file-related call before the filesystem ever sees it. 
(That's because MS-DOS wants to create an illusion that the devices are
present in every directory; in contrast, on Unix the devices live under
a special directory called <code>/dev</code>.)

<p>When archives created on Unix are unpacked on MS-DOS, they might include
files with these "forbidden" names, such as <code>prn.txt</code> or
<code>aux.c</code>.  Trying to extract such files will lead to crashes, system
wedges, and other atrocities, as the device drivers will try to
interpret the data they get and act on it (for example, some devices are
read-only, and don't know how to handle incoming data).

<p>Therefore, <code>tar</code> checks every file name it is about to extract, and
if it refers to a character device, <code>tar</code> changes that file's name
by prepending an underscore <code>_</code> to it; thus, <code>aux.c</code> will be
extracted as <code>_aux.c</code>.  (Actually, <code>tar</code> tries to prepend up
to 2 underscore characters, each time checking if the new name is a
regular file.  If both attempts are unsuccessful, <code>tar</code> will print
an error message and refuse to extract that file.)

<p>As with illegal characters, <code>tar</code> announces each renamed file when
under verbose operation. 
</ul>

<p><hr>
Node:Writing, Next:<a rel=next href="#Preventing%20overwrite">Preventing overwrite</a>, Previous:<a rel=previous href="#extract%20options">extract options</a>, Up:<a rel=up href="#extract">extract</a>
<p>

<h3><a name="Writing">Changing how <code>tar</code> writes files</a></h3>

<p><hr>
Node:Preventing overwrite, Next:<a rel=next href="#Unlinking">Unlinking</a>, Previous:<a rel=previous href="#Writing">Writing</a>, Up:<a rel=up href="#extract">extract</a>
<p>

<h3><a name="Preventing%20overwrite">Options to prevent overwriting files</a></h3>

<p>Normally, <code>tar</code> writes extracted files into the file system without
regard to the files already on the system; that is, files with the same
names as archive members are overwritten when the archive is extracted. 
If the name of a corresponding file name is a symbolic link, the file
pointed to by the symbolic link will be overwritten instead of the
symbolic link itself (if this is possible).  Moreover, special devices,
empty directories, and even symbolic links are automatically removed if
they are found to be in the way of extraction.

<p>To prevent <code>tar</code> from extracting an archive member from an archive
if doing so will overwrite a file in the file system, use
<kbd>-keep-old-files</kbd> (<kbd>-k</kbd>) in conjunction with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>).  When
this option is specified, <code>tar</code> will report an error stating the
name of the file in conflict instead of overwriting the file with the
corresponding extracted archive member.

<p>The <kbd>-unlink-first</kbd> (<kbd>-U</kbd>) option removes existing files, symbolic links,
empty directories, devices, and so forth, <em>prior</em> to extracting over them. 
This could take care of several situations where overwriting files is
undesirable.

<p>One such situation occurs when the archive includes a regular file whereas
the filesystem has a symbolic link by the same name.  Using this option
will prevent <code>tar</code> from overwriting the file to which the symbolic
link points by the contents of an extracted file, since the link itself
is removed prior to the extraction.

<p>Another situation is with overwriting a running program's executable
file.  On some systems, the backing store for the executable <em>is</em>
the original program file; overwriting it while the program runs could
lead to segmentation violation and other crashes.  You could use the
<kbd>-unlink-first</kbd> (<kbd>-U</kbd>) option to prevent such woes when extracting
arbitrary executables over currently running copies.  Note that if
something goes wrong with the extraction and you <em>did</em> use this
option, you might end up with no file at all.  Without this option, if
something goes wrong with the extraction, the existing file is not
overwritten, and is preserved.  (If you want to be safe either way, use
both <kbd>-unlink-first</kbd> (<kbd>-U</kbd>) and <kbd>-backup</kbd>[=<var>method</var>]; See <a href="#backup">backup</a>.)

<p>If you specify the <kbd>-recursive-unlink</kbd> option, <code>tar</code> removes
<em>anything</em> that keeps you from extracting a file as far as current
permissions will allow it.  This could include removal of the contents
of a full directory hierarchy.  For example, someone using this feature
may be very surprised at the results when extracting something over a
directory entry from the archive.  This option can be dangerous; be very
aware of what you are doing if you choose to use it.

<p>Without <kbd>-recursive-unlink</kbd>, <code>tar</code> silently overwrites
non-directories, but will never overwrite existing non-empty
directories.

<p>One especially nasty subtlety with both <kbd>-unlink-first</kbd> (<kbd>-U</kbd>) and
<kbd>-recursive-unlink</kbd> options happens on filesystems which
silently truncate the names of the files in the archive when they are
extracted to the file system.  (MS-DOS and MS-Windows 3.X are two
notorious examples.)  In such a case, <code>tar</code> might accidentally delete
a file or a directory which has nothing to do with the extracted file,
simply because their names are the same after truncation.  We recommend
that you not use these two options on such filesystems.  In fact, we recommend
that if you unpack on MS-DOS archives which were created on Unix, you
<em>always</em> use either <kbd>-keep-old-files</kbd> (<kbd>-k</kbd>) or <kbd>-backup</kbd>[=<var>method</var>],
to prevent the overwriting of existing files due to file name truncation. 
See <a href="#backup">backup</a>.

<ul>
<li><a href="#keep-old-files">keep-old-files</a>:               Keeping old files

<li><a href="#to-stdout">to-stdout</a>:                    Writing to standard output

<li><a href="#backup">backup</a>:                       Backup options

<li><a href="#suffix">suffix</a>:                       Deciding the backup file suffixes
</ul>

<p><hr>
Node:keep-old-files, Next:<a rel=next href="#to-stdout">to-stdout</a>, Previous:<a rel=previous href="#Preventing%20overwrite">Preventing overwrite</a>, Up:<a rel=up href="#Preventing%20overwrite">Preventing overwrite</a>
<p>

<h4><a name="keep-old-files">Keeping old files</a></h4>

<p>The <kbd>-keep-old-files</kbd> (<kbd>-k</kbd>) option prevents <code>tar</code> from overwriting
existing files with archive members having the same name.  The
<kbd>-keep-old-files</kbd> (<kbd>-k</kbd>) option is meaningless with <kbd>-list</kbd> (<kbd>-t</kbd>). 
Prevents <code>tar</code> from overwriting files in the file system during
extraction.

<p><hr>
Node:to-stdout, Next:<a rel=next href="#backup">backup</a>, Previous:<a rel=previous href="#keep-old-files">keep-old-files</a>, Up:<a rel=up href="#Preventing%20overwrite">Preventing overwrite</a>
<p>

<h4><a name="to-stdout">Writing to standard output</a></h4>

<p>To write the extracted files to the standard output, instead of
creating the files on the file system, use <kbd>-to-stdout</kbd> (<kbd>-O</kbd>) in
conjunction with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>).  This option is useful if you are
extracting files to send them through a pipe, and do not need to
preserve them in the file system.  You might need to use this option to
browse one or more files with a pager such as <code>less</code>, or if you
want the extracted file to have another name on the file system.

<p>If you extract multiple members, they appear on standard output concatenated,
in the order they are found in the archive.

<p>When this option is used, <code>tar</code> is careful to not alter the file system. 
<code>tar</code> writes the contents of the files extracted to its standard output. 
This may be useful if you are only extracting the files in order to send
them through a pipe.  This option is only meaningful with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>).

<p><hr>
Node:backup, Next:<a rel=next href="#suffix">suffix</a>, Previous:<a rel=previous href="#to-stdout">to-stdout</a>, Up:<a rel=up href="#Preventing%20overwrite">Preventing overwrite</a>
<p>

<h4><a name="backup">Backup options</a></h4>

<p><code>tar</code> offers options for making backups of files before writing new
versions.  These options control the details of these backups.  They may
apply to the archive itself before it is created or rewritten, as well
as to individual extracted members.  Other free programs (GNU <code>cp</code>,
<code>install</code>, <code>ln</code>, and <code>mv</code>, for example) offer similar options.

<p>Backup options may prove unexpectedly useful when extracting archives
containing many members having identical names, or when extracting archives
on systems having file name limitations, making different members appear
as having similar names through the side-effect of name truncation. 
(This is true only if we have a good scheme for truncated backup names,
of which we are not sure at all: we suspect work is needed in this area. 
The MS-DOS/MS-Windows version works with numbered backups even when file
names are truncated.)  When any existing file is backed up before being
overwritten by extraction, clashing files are automatically renamed to
be unique, and the true name is kept for only the last file of a series of
clashing files.  By using verbose mode, users may track exactly what happens. 
We recommend that you <strong>always</strong> use numbered backups when unpacking
archives on MS-DOS and on other systems that have file name limitations.

<p>When <code>tar</code> is given the <kbd>-backup</kbd>[=<var>method</var>] option, it makes backups of
files that are about to be overwritten or removed.  Without this option,
the original versions are destroyed.  However, See <a href="#keep-old-files">keep-old-files</a>.

<p>At the detail level, some decisions are still experimental, and may
change in the future.  We are awaiting comments from our users.  So please
do not get in the habit of depending blindly on the details of the backup features. 
For example, currently, directories themselves are never renamed through
using these options, so extracting a file over a directory still has
good chances to fail.  Also, backup options apply to created archives,
not only to extracted members.  For created archives, backups will not
be attempted when the archive is a block or character device, or when it
refers to a remote file.

<p>For the sake of simplicity and efficiency, backups are made by renaming old
files prior to creation or extraction, and not by copying.  The original
name is restored if the file creation fails.  If a failure occurs after a
partial extraction of a file, both the backup and the partially extracted
file are kept.

<p>Some people express the desire to <em>always</em> use the <kbd>-backup</kbd>[=<var>method</var>]
option by defining some kind of alias or script.  This is not as easy
as one may think, due to the fact that old-style options should appear first
and consume arguments a bit unpredictably for an alias or script.  But
if you are ready to give up using old-style options, you may resort to
using something like a (Bourne shell) function here:

<pre>$ <kbd>tar () { /usr/local/bin/tar --backup $*; }</kbd>
</pre>

<p>The <kbd>-backup</kbd>[=<var>method</var>] option also accepts an optional value,
<var>method</var>, which determines the type of backups that will be made.  If this value is
not given, the value of the <code>VERSION_CONTROL</code> environment variable
is used.  And if <code>VERSION_CONTROL</code> is not set, the default backup
method is <kbd>existing</kbd>.

<p>This value corresponds to the Emacs variable <code>version-control</code>; the
same values for <var>method</var> are accepted as in Emacs.  The values also
have more descriptive names.  Here are the valid <var>method</var>s (unique
abbreviations are accepted):

<dl>
<dt><kbd>t</kbd>
<dt><kbd>numbered</kbd>
<dd>Always make numbered backups.

<br><dt><kbd>nil</kbd>
<dt><kbd>existing</kbd>
<dd>Make numbered backups of files that already have them, simple backups
of the others.

<br><dt><kbd>never</kbd>
<dt><kbd>simple</kbd>
<dd>Always make simple backups.

</dl>

<p><hr>
Node:suffix, Previous:<a rel=previous href="#backup">backup</a>, Up:<a rel=up href="#Preventing%20overwrite">Preventing overwrite</a>
<p>

<h4><a name="suffix">Deciding the backup file suffixes</a></h4>

<p>The <kbd>-suffix=<var>suffix</var></kbd> option informs <code>tar</code> about the <var>suffix</var>
which should be appended to each backup file made when <kbd>-backup</kbd>[=<var>method</var>]
is used.  If the <kbd>-suffix=<var>suffix</var></kbd> option is not specified, the value
of the <code>SIMPLE_BACKUP_SUFFIX</code> environment variable is used.  And if
<code>SIMPLE_BACKUP_SUFFIX</code> is not set, the default is <code>~</code>, just as
in Emacs.

<p><hr>
Node:Unlinking, Next:<a rel=next href="#Attributes">Attributes</a>, Previous:<a rel=previous href="#Preventing%20overwrite">Preventing overwrite</a>, Up:<a rel=up href="#extract">extract</a>
<p>

<h3><a name="Unlinking">Options to destroy files</a></h3>

<p>Some people argue that <code>tar</code> should not hesitate to overwrite files
with other files when extracting.  When extracting a <code>tar</code> archive, they
expect to see a faithful copy of the state of the filesystem when the archive
was created.  It is debatable that this would always be proper behavior. 
For example, suppose one has an archive in which <code>usr/local</code> is a
link to <code>usr/local2</code>.  Since the archive was created, maybe the site
removed the link and renamed the whole hierarchy from <code>/usr/local2</code>
to <code>/usr/local</code>.  Such things happen all the time.  We guess it would
not be welcome at all, in the typical case, for <code>tar</code> to remove the
whole hierarchy just to make room for the link to be reinstated, unless it
<em>also</em> simultaneously restores the full <code>/usr/local2</code>, of course!

<p>By default, <code>tar</code> errs on the side of caution.  Some options
allow users to change its behavior.  When no special options are
given for this, <code>tar</code> removes single files when extracting over them,
usually follows symbolic links when found, and does not destroy directories.

<ul>
<li><a href="#unlink-first">unlink-first</a>:                 Removing files prior to extraction

<li><a href="#recursive-unlink">recursive-unlink</a>:             Removing whole directories
</ul>

<p><hr>
Node:unlink-first, Next:<a rel=next href="#recursive-unlink">recursive-unlink</a>, Previous:<a rel=previous href="#Unlinking">Unlinking</a>, Up:<a rel=up href="#Unlinking">Unlinking</a>
<p>

<h4><a name="unlink-first">Removing files prior to extraction</a></h4>

<p>The <kbd>-unlink-first</kbd> (<kbd>-U</kbd>) option tells <code>tar</code> to try removing files
before extracting over them, instead of trying to overwrite them.

<p><hr>
Node:recursive-unlink, Previous:<a rel=previous href="#unlink-first">unlink-first</a>, Up:<a rel=up href="#Unlinking">Unlinking</a>
<p>

<h4><a name="recursive-unlink">Removing whole directories</a></h4>

<p>When the <kbd>-recursive-unlink</kbd> option is specified, <code>tar</code>
tries to remove files and directory hierarchies before extracting over them. 
<strong>This is a dangerous option!</strong>

<p>So, <code>tar</code> is indeed able to remove a whole hierarchy to reestablish a
symbolic link, for example, but <em>only if</em> <kbd>-recursive-unlink</kbd>
is specified to allow this behavior.

<p><hr>
Node:Attributes, Next:<a rel=next href="#Scarce">Scarce</a>, Previous:<a rel=previous href="#Unlinking">Unlinking</a>, Up:<a rel=up href="#extract">extract</a>
<p>

<h3><a name="Attributes">Handling file attributes</a></h3>

<ul>
<li><a href="#touch">touch</a>:                        Setting modification times

<li><a href="#same-owner">same-owner</a>:                   Restoring file ownership

<li><a href="#same-permissions">same-permissions</a>:             Setting access permissions

<li><a href="#no-attributes">no-attributes</a>:                Leaving file attributes alone
</ul>

<p><hr>
Node:touch, Next:<a rel=next href="#same-owner">same-owner</a>, Previous:<a rel=previous href="#Attributes">Attributes</a>, Up:<a rel=up href="#Attributes">Attributes</a>
<p>

<h4><a name="touch">Setting modification times</a></h4>

<p>Normally, <code>tar</code> sets the modification times of extracted files to
the modification times recorded for the files in the archive, but
limits the permissions of extracted files by the current <code>umask</code>
setting.

<p>To set the modification times of extracted files to the time when
the files were extracted, use the <kbd>-touch</kbd> (<kbd>-m</kbd>) option in
conjunction with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>).

<p>In fact, <kbd>-touch</kbd> (<kbd>-m</kbd>) sets the modification time of extracted archive
members to the time they were extracted, not the time recorded for them
in the archive.  Use in conjunction with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>).

<p>The <kbd>-touch</kbd> (<kbd>-m</kbd>) option does not extract file modification time. 
When this option is used, <code>tar</code> leaves the modification time
of the files it extracts as the time when the files were extracted,
instead of setting it to the time recorded in the archive.

<p>This option is meaningless with <kbd>-list</kbd> (<kbd>-t</kbd>).

<p><hr>
Node:same-owner, Next:<a rel=next href="#same-permissions">same-permissions</a>, Previous:<a rel=previous href="#touch">touch</a>, Up:<a rel=up href="#Attributes">Attributes</a>
<p>

<h4><a name="same-owner">Restoring file ownership</a></h4>

<p>The <kbd>-same-owner</kbd> option invites <code>tar</code> to create extracted
files with the same ownership they have in the archive, if this is possible.

<p>When using <code>tar</code> as super-user at extraction time, ownership is always restored. 
So this option is meaningful only for non-root users, when <code>tar</code> is
executed on those systems able to give files away.  This is considered as
a security flaw by many people, at least because it makes quite difficult
to correctly charge users for the disk space they occupy.  Also, the
<code>suid</code> or <code>sgid</code> attributes of files are easily and silently
lost when files are given away.

<p>When writing an archive, <code>tar</code> writes the user ID and user name
separately.  If it can't find a user name (because the user ID is not
in <code>/etc/passwd</code>), it does not write one.  When restoring,
and doing a <code>chmod</code>, as when you use <kbd>-same-permissions</kbd> (<kbd>-preserve-permissions</kbd>, <kbd>-p</kbd>),
() it tries to look up the name (if one was written)
in <code>/etc/passwd</code>.  If it fails, then it uses the user ID stored in
the archive instead.

<p><hr>
Node:same-permissions, Next:<a rel=next href="#no-attributes">no-attributes</a>, Previous:<a rel=previous href="#same-owner">same-owner</a>, Up:<a rel=up href="#Attributes">Attributes</a>
<p>

<h4><a name="same-permissions">Setting access permissions</a></h4>

<p>The <kbd>-same-permissions</kbd> (<kbd>-preserve-permissions</kbd>, <kbd>-p</kbd>) option requests the extraction of all
protection information.  This option causes <code>tar</code> to set the modes
(access permissions) of extracted files exactly as recorded in the archive. 
If this option is not used, the current <code>umask</code> setting limits the
permissions on extracted files.

<p>To set the modes (access permissions) of extracted files to those
recorded for those files in the archive, use <kbd>-same-permissions</kbd> (<kbd>-preserve-permissions</kbd>, <kbd>-p</kbd>)
in conjunction with the <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) subcommand.

<p>The {No Value For "same-permission"} option asks that the modes of
extracted archive members be those recorded in the archive, ignoring
current umask settings.  Use in conjunction with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>).

<p>This option is meaningless with <kbd>-list</kbd> (<kbd>-t</kbd>).

<p><hr>
Node:no-attributes, Previous:<a rel=previous href="#same-permissions">same-permissions</a>, Up:<a rel=up href="#Attributes">Attributes</a>
<p>

<h4><a name="no-attributes">Leaving file attributes alone</a></h4>

<p>The experimental <kbd>-no-attributes</kbd> option has the effect of
inhibiting all attempts at restoring file attributes, like owner, group,
mode, or time stamps.  In this case, <code>tar</code> lets the underlying system
handle such things, and does not try to intervene in any way.

<p><hr>
Node:Scarce, Previous:<a rel=previous href="#Attributes">Attributes</a>, Up:<a rel=up href="#extract">extract</a>
<p>

<h3><a name="Scarce">Coping with scarce resources</a></h3>

<ul>
<li><a href="#starting-file">starting-file</a>:                Starting file

<li><a href="#same-order">same-order</a>:                   Same order

<li><a href="#preserve">preserve</a>:                     Preserving permissions and order
</ul>

<p><hr>
Node:starting-file, Next:<a rel=next href="#same-order">same-order</a>, Previous:<a rel=previous href="#Scarce">Scarce</a>, Up:<a rel=up href="#Scarce">Scarce</a>
<p>

<h4><a name="starting-file">Starting file</a></h4>

<p>Part of an archive may be skipped through the usage of the
<kbd>-starting-file=<var>name</var></kbd> (<kbd>-K <var>name</var></kbd>) option.  It forces the chosen subcommand to start
in the middle of an archive.  Use in conjunction with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>)
or <kbd>-list</kbd> (<kbd>-t</kbd>).

<p>If a previous attempt to extract files failed due to lack of disk space,
you can use <kbd>-starting-file=<var>name</var></kbd> (<kbd>-K <var>name</var></kbd>) to start extracting only after member
<var>name</var> of the archive.  This assumes, of course, that there is now
free space, or that you are now extracting into a different file system. 
(You could also choose to suspend <code>tar</code>, remove unnecessary files
from the file system, and then restart the same <code>tar</code> subcommand. 
In this case, <kbd>-starting-file=<var>name</var></kbd> (<kbd>-K <var>name</var></kbd>) is not necessary.  See <a href="#incremental">incremental</a>,
See <a href="#interactive">interactive</a>, and <a href="#exclude">exclude</a>.)

<p><hr>
Node:same-order, Next:<a rel=next href="#preserve">preserve</a>, Previous:<a rel=previous href="#starting-file">starting-file</a>, Up:<a rel=up href="#Scarce">Scarce</a>
<p>

<h4><a name="same-order">Same order</a></h4>

<p>The <kbd>-same-order</kbd> (<kbd>-preserve-order</kbd>, <kbd>-s</kbd>) option allows <code>tar</code> to process large lists
of file names on machines with small amounts of memory.  Use in conjunction
with <kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>), <kbd>-list</kbd> (<kbd>-t</kbd>), or <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>).

<p>The <kbd>-same-order</kbd> (<kbd>-preserve-order</kbd>, <kbd>-s</kbd>) option tells <code>tar</code> that the list of file
names to be listed or extracted is sorted in the same order as the
files in the archive.  This allows a large list of names to be used,
even on a small machine that would not otherwise be able to hold all
the names in memory at the same time.  Such a sorted list can easily be
created by running <kbd>tar -t</kbd> on the archive and editing its output.

<p>This option is probably never needed on modern computer systems.

<p><hr>
Node:preserve, Previous:<a rel=previous href="#same-order">same-order</a>, Up:<a rel=up href="#Scarce">Scarce</a>
<p>

<h4><a name="preserve">Preserving permissions and order</a></h4>

<p>Bizarrely, the <kbd>-preserve</kbd> option is the same as using both
<kbd>-same-permissions</kbd> (<kbd>-preserve-permissions</kbd>, <kbd>-p</kbd>) and <kbd>-same-order</kbd> (<kbd>-preserve-order</kbd>, <kbd>-s</kbd>) simultaneously.

<p>The <kbd>-preserve</kbd> option has no equivalent short option name.  It is
really equivalent to <kbd>-same-permissions</kbd> (<kbd>-preserve-permissions</kbd>, <kbd>-p</kbd>) plus <kbd>-same-order</kbd> (<kbd>-preserve-order</kbd>, <kbd>-s</kbd>).

<p><hr>
Node:create, Next:<a rel=next href="#Applications">Applications</a>, Previous:<a rel=previous href="#extract">extract</a>, Up:<a rel=up href="#Subcommands">Subcommands</a>
<p>

<h2><a name="create">How to create archives</a></h2>

<p>One of the basic subcommands of <code>tar</code> is <kbd>-create</kbd> (<kbd>-c</kbd>), which
you use to create a <code>tar</code> archive.  We will explain
<kbd>-create</kbd> (<kbd>-c</kbd>) first because, in order to learn about the other
subcommands, you will find it useful to have an archive available to
practice on.

<p>To make this easier, in this section you will first create a directory
containing three files.  Then we will show you how to create an
<em>archive</em> inside the new directory.  Both the directory and
the archive are specifically for you to practice on.  The rest of this
chapter and the next chapter will show many examples using this
directory and the files you will create: some of those files may be
other directories and other archives.

<p>The three files you will archive in this example are called
<code>blues</code>, <code>folk</code>, and <code>jazz</code>.  The archive is called
<code>collection.tar</code>.

<p>This section will proceed slowly, detailing how to use <kbd>-create</kbd> (<kbd>-c</kbd>)
in <code>verbose</code> mode, and showing examples using both short and long
forms.  In the rest of the tutorial, and in the examples in the next
chapter, we will proceed at a slightly quicker pace.  This section
moves more slowly to allow beginning users to understand how
<code>tar</code> works.

<p>Creating an empty archive would have a kind of elegance.  One can
initialize an empty archive and later use <kbd>-append</kbd> (<kbd>-r</kbd>) for adding
all members.  Some applications would not welcome making an exception
in the way of adding the first archive member.

<p>There is little or no reason to create an empty archive, but you can if
you wish.  (In itself, an empty archive is useless, but later you can
use <kbd>-append</kbd> (<kbd>-r</kbd>) to add members.  There are no actions using an
empty archive that you cannot do as well or better with a regular
archive.)  Moreover, there have been reports that some versions of
<code>tar</code> have trouble with an empty archive on magnetic tapes.

<p>Consequently, <code>tar</code> will not create an empty archive directly;
specifically, <code>tar</code> will not create an archive if you specify
the <kbd>-create</kbd> (<kbd>-c</kbd>) option but fail to specify <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>)
and do not provide any arguments besides options.

<p>If, after considering all this, you should want to create an empty
archive, you must specify a value for the <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) option
that has no names in it, as in the following example:

<pre>$ <kbd>tar --create --file=empty-archive.tar --files-from=/dev/null</kbd>
$ <kbd>tar cfT empty-archive.tar /dev/null</kbd>
</pre>

<p>On the other hand, many people reported that it is dangerously easy for
<code>tar</code> to destroy a magnetic tape with an empty archive.<a rel=footnote href="#fn-16"><sup>16</sup></a>  The two
most common errors are:

<ol type=1 start=1>
</p><li>Mistakingly using <code>create</code> instead of <code>extract</code>, when the intent
was to extract the full contents of an archive.  This error is likely: keys
<kbd>c</kbd> and <kbd>x</kbd> are right next ot each other on the QWERTY keyboard. 
Instead of being unpacked, the archive then gets wholly destroyed. 
When users speak about <dfn>exploding</dfn> an archive, they usually mean
something else <small>...</small> Ahem!

<li>Forgetting the argument to <code>file</code>, when the intent was to create
an archive with a single file in it.  This error is likely because a
tired user can easily add the <kbd>f</kbd> key to the cluster of option
letters, by the mere force of habit, without realizing the full
consequences of doing so.  The usual consequence is that the single
file, which was meant to be archived, is instead destroyed.
</ol>

<p>So, recognizing the likelihood and the catastrophic nature of these
errors, <code>tar</code> now distances itself from elegance, and
cravenly refuses to create an archive when <kbd>-create</kbd> (<kbd>-c</kbd>) option is
given, there are no arguments besides options, and <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>)
option is <em>not</em> used.  Observe:

<pre>$ <kbd>tar c</kbd>
tar: Cravenly refusing to create an empty archive
Try `tar --help' for more information.
$ <kbd>tar cf foo</kbd>
tar: Cravenly refusing to create an empty archive
Try `tar --help' for more information.
</pre>

<p>To get around the cautiousness of
<code>tar</code> and nevertheless create an archive with nothing in it,
one may still use, as the value for the <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) option,
a file with no names in it, as shown in the following commands:

<pre>$ <kbd>tar --create --file=empty-archive.tar --files-from=/dev/null</kbd>
$ <kbd>tar cfT empty-archive.tar /dev/null</kbd>
</pre>

<ul>
<li><a href="#name-prefix">name-prefix</a>:                  Using name prefixes

<li><a href="#atime-preserve">atime-preserve</a>:               Preserving last access time

<li><a href="#remove-files">remove-files</a>:                 Removing files

<li><a href="#append">append</a>:                       How to add files to existing archives

<li><a href="#update">update</a>:                       Updating an archive
</ul>

<p><hr>
Node:name-prefix, Next:<a rel=next href="#atime-preserve">atime-preserve</a>, Previous:<a rel=previous href="#create">create</a>, Up:<a rel=up href="#create">create</a>
<p>

<h3><a name="name-prefix">Using name prefixes</a></h3>

<p>Sometimes the directory structure you want an archive to create when you
unpack it is different from the directory structure you built it in.

<p>This is often true when you are using a <code>tar</code> production in a
makefile, to build distribution archives in a source-code directory. 
The most convenient way to do this would be with a command like the
following:

<pre>$ <kbd>tar --create --file=distribution.tar *</kbd>
</pre>

<p>But this makes an archive that will unpack as a lot of individual files,
which is usually not what you want.  Assuming your build directory is
named `project', you might do something like

<pre>$ <kbd>tar --directory=.. --create --file=distribution.tar project</kbd>
</pre>

<p>But this means you will be stuck with the name of your build directory
as the top-level name of the distribution archive.  Often you would like
your distribution archive to unpack into a single directory, but with
a synthetic top-level directory name (perhaps including a version number).

<p>You can get this effect with the <kbd>-name-prefix=<var>prefix</var></kbd> option.  Its
argument is a name prefix which gets prepended to each file name entry
in an archive as it is added to the archive.

<p>For example, if you say

<pre>$ <kbd>tar --name-prefix='project-5.23/' --create --file=collection.tar *</kbd>
</pre>

<p>you will make an archive of all the files and directories in the
current directory, but it will extract into the single subdirectory
<code>project-5.23</code>.

<p>Note that you will almost always want the argument of
<kbd>-name-prefix=<var>prefix</var></kbd> to end with a directory delimiter (forward slash
under Unix-like operating systems, forward slash or backslash under DOS). 
Otherwise you will make an archive in which each file has a prefix
welded directly to the first segment of its name.  While this capability
is there for full generality, it is probably not what you want.

<p><hr>
Node:atime-preserve, Next:<a rel=next href="#remove-files">remove-files</a>, Previous:<a rel=previous href="#name-prefix">name-prefix</a>, Up:<a rel=up href="#create">create</a>
<p>

<h3><a name="atime-preserve">Preserving last access time</a></h3>

<p>When <code>tar</code> reads files, their access time gets updated.  To have
<code>tar</code> attempt to set the access times back to what they were before
they were read, use the <kbd>-atime-preserve</kbd> option.  This doesn't work
for files that you don't own, unless you're root, and it doesn't interact
nicely with incremental dumps (see <a href="#Backups">Backups</a>), but it is good enough
for some purposes.

<p>This options also preserves the modification time field, which has no
effect unless the file is being modified simultaneously by another program. 
As such, it also can eliminate evidence of reading or writing of the file
by another program, if the access happens between the beginning and ending
of <code>tar</code> reading the file.

<p>A drawback of the <kbd>-atime-preserve</kbd> option is that it alters the
<code>ctime</code> of the dumped files.  Some system administrators value
<code>ctime</code> much more than <code>atime</code>.<a rel=footnote href="#fn-17"><sup>17</sup></a>  They should ponder carefully
the advantages and disadvantages before using this option in system backups.

<p>This option doesn't have any effect on MS-DOS, since <code>atime</code> is not
supported by the DOS FAT file system.  (It <em>does</em> work on MS-Windows
9X.)

<p><hr>
Node:remove-files, Next:<a rel=next href="#append">append</a>, Previous:<a rel=previous href="#atime-preserve">atime-preserve</a>, Up:<a rel=up href="#create">create</a>
<p>

<h3><a name="remove-files">Removing files</a></h3>

<p>The effect of the <kbd>-remove-files</kbd> option is to remove files once
they have been added to the archive.

<p><hr>
Node:append, Next:<a rel=next href="#update">update</a>, Previous:<a rel=previous href="#remove-files">remove-files</a>, Up:<a rel=up href="#create">create</a>
<p>

<h3><a name="append">How to add files to existing archives</a></h3>

<p>If you want to add files to an existing archive, you don't need to
create a new archive; you can use <kbd>-append</kbd> (<kbd>-r</kbd>).  The archive must
already exist in order to use <kbd>-append</kbd> (<kbd>-r</kbd>).  (A related subcommand
is the <kbd>-update</kbd> (<kbd>-u</kbd>) subcommand; you can use this to add newer
versions of archive members to an existing archive.  To learn how to
do this with <kbd>-update</kbd> (<kbd>-u</kbd>), refer to <a href="#update">update</a>.)

<p>If you use <kbd>-append</kbd> (<kbd>-r</kbd>) to add a file to an archive which already
contains a member with the same name, then the
old member is not deleted.  What does happen, however, is somewhat
complex.  <code>tar</code> <em>allows</em> you to have infinite numbers of
archive members
with the same name.  Some subcommands treat these same-named members no
differently than any other set of archive members: for example, if you
view an archive with <kbd>-list</kbd> (<kbd>-t</kbd>), you will see all of those members
listed, with their modification times, owners, etc.

<p>Other subcommands don't deal with these members as well as you might
prefer; if you were to use <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) to extract the archive,
only the most recently added copy of a member with the same name as
other members would end up in the working directory.  This is because
<kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) extracts an archive in the order the members appeared
in the archive; the most recently archived members will be extracted
last.  Additionally, an extracted member will <em>overwrite</em> a file of
the same name which existed in the directory already, and <code>tar</code>
will not prompt you about this.  Thus, only the most recently archived
member will end up being extracted, as it will overwrite the one
extracted before it, and so on.  (One way of extracting all of the
members without overwriting them is to use the <kbd>-backup</kbd>[=<var>method</var>]
option; see <a href="#backup">backup</a>.)

<p>Other than using <kbd>-backup</kbd>[=<var>method</var>], there are a few additional ways to
get around this.

<p>If you want to replace an archive member, use <kbd>-delete</kbd> to
delete the member you want to remove from the archive, and then use
<kbd>-append</kbd> (<kbd>-r</kbd>) to add the member you want to be in the archive. 
(Replacing one member with another will not work on certain types of
media, such as tapes; see <a href="#delete">delete</a> and <a href="#Media">Media</a>, for more
information.)  Note that you cannot change the order of the archive;
the most recently added member will still appear last.  In this sense,
you cannot truly "replace" one member with another.

<ul>
<li><a href="#Appending%20files">Appending files</a>:              Appending files to an archive

<li><a href="#Multiple%20files">Multiple files</a>:               Multiple files with the same name
</ul>

<p><hr>
Node:Appending files, Next:<a rel=next href="#Multiple%20files">Multiple files</a>, Previous:<a rel=previous href="#append">append</a>, Up:<a rel=up href="#append">append</a>
<p>

<h4><a name="Appending%20files">Appending files to an archive</a></h4>

<p>The simplest way to add a file to an already existing archive is the
<kbd>-append</kbd> (<kbd>-r</kbd>) subcommand, which writes specified files into the
archive whether or not they are already among the archived files.  When
you use <kbd>-append</kbd> (<kbd>-r</kbd>), you <em>must</em> specify file name arguments, as
there is no default.  If you specify a file that already exists in the
archive, another copy of the file will be added to the end of the
archive.  As with other subcommands, the member names of the newly added
files will be exactly the same as their names given on the command line
(except that backslashes in MS-DOS file names are mirrored to Unix-style
forward slashes).  The <kbd>-verbose</kbd> (<kbd>-v</kbd>) option will print out the
names of the files as they are written into the archive.

<p><kbd>-append</kbd> (<kbd>-r</kbd>) cannot be performed on some tape drives, unfortunately,
due to deficiencies in the formats those tape drives use.  The archive
must be a valid <code>tar</code> archive, or else the results of using this
subcommand will be unpredictable.  See <a href="#Media">Media</a>.

<p>To demonstrate use of <kbd>-append</kbd> (<kbd>-r</kbd>) to add a file to an archive,
create a file called <code>rock</code> in the <code>practice</code> directory. 
Make sure you are in the <code>practice</code> directory.  Then, run the
following <code>tar</code> command to add <code>rock</code> to
<code>collection.tar</code>:

<pre>$ <kbd>tar --append --file=collection.tar rock</kbd>
</pre>

<p>If you now use the <kbd>-list</kbd> (<kbd>-t</kbd>) subcommand, you will see that
<code>rock</code> has been added to the archive:

<pre>$ <kbd>tar --list --file=collection.tar</kbd>
jazz
blues
folk
rock
</pre>

<p><hr>
Node:Multiple files, Previous:<a rel=previous href="#Appending%20files">Appending files</a>, Up:<a rel=up href="#append">append</a>
<p>

<h4><a name="Multiple%20files">Multiple files with the same name</a></h4>

<p>You can use <kbd>-append</kbd> (<kbd>-r</kbd>) to add copies of files which have been
updated since the archive was created.  (However, we do not recommend
doing this, since there is another <code>tar</code> option called
<kbd>-update</kbd> (<kbd>-u</kbd>); see <a href="#update">update</a>, for more information.  We describe this
use of <kbd>-append</kbd> (<kbd>-r</kbd>) here for the sake of completeness.)

<p>When you extract the archive, the older version will effectively be lost. 
This happens because files are extracted from an archive in the order in
which they were archived.  Thus, when the archive is extracted, a file
archived later in time will overwrite a file of the same name which was
archived earlier, even though the older version of the file will remain
in the archive unless you delete all versions of the file.

<p>Suppose you change the file <code>blues</code> and then append the changed
version to <code>collection.tar</code>.  As you saw above, the original
<code>blues</code> is in the archive <code>collection.tar</code>.  If you change the
file and append the new version of the file to the archive, there will
be two copies in the archive.  When you extract the archive, the older
version of the file will be extracted first, and then overwritten by the
newer version when it is extracted.

<p>You can append the new, changed copy of the file <code>blues</code> to the
archive in this way:

<pre>$ <kbd>tar --append --verbose --file=collection.tar blues</kbd>
blues
</pre>

<p>Because you specified the <kbd>-verbose</kbd> (<kbd>-v</kbd>) option, <code>tar</code> has
printed the name of the file being appended as it was acted on.  Now
list the contents of the archive:

<pre>$ <kbd>tar --list --verbose --file=collection.tar</kbd>
-rw-rw-rw- myself users 28 1996-10-18 16:31 jazz
-rw-rw-rw- myself users 21 1996-09-23 16:44 blues
-rw-rw-rw- myself users 20 1996-09-23 16:44 folk
-rw-rw-rw- myself users 20 1996-09-23 16:44 rock
-rw-rw-rw- myself users 58 1996-10-24 18:30 blues
</pre>

<p>The newest version of <code>blues</code> is now at the end of the archive
(note the different creation dates and file sizes).  If you extract
the archive, the older version of the file <code>blues</code> will be
overwritten by the newer version.  You can confirm this by extracting
the archive and running <code>ls</code> on the directory.  See <a href="#Writing">Writing</a>,
for more information.  (<em>Please note:</em> This is the case unless
you employ the <kbd>-backup</kbd>[=<var>method</var>] option; .)

<p><hr>
Node:update, Previous:<a rel=previous href="#append">append</a>, Up:<a rel=up href="#create">create</a>
<p>

<h3><a name="update">Updating an archive</a></h3>

<p>In the previous section, you learned how to use <kbd>-append</kbd> (<kbd>-r</kbd>) to add
a file to an existing archive.  A related subcommand is
<kbd>-update</kbd> (<kbd>-u</kbd>).  The <kbd>-update</kbd> (<kbd>-u</kbd>) subcommand updates a <code>tar</code>
archive by comparing the date of the specified archive members against
the date of the file with the same name.  If the file has been modified
more recently than the archive member, then the newer version of the
file is added to the archive (as with <kbd>-append</kbd> (<kbd>-r</kbd>)).

<p>Unfortunately, you cannot use <kbd>-update</kbd> (<kbd>-u</kbd>) with magnetic tape drives. 
The command will fail.

<p>Both <kbd>-update</kbd> (<kbd>-u</kbd>) and <kbd>-append</kbd> (<kbd>-r</kbd>) work by adding to the end
of the archive.  When you extract a file from the archive, only the
version stored last will wind up in the file system, unless you use
the <kbd>-backup</kbd>[=<var>method</var>] option ().

<ul>
<li><a href="#How%20to%20update">How to update</a>:                How to update members of an archive

<li><a href="#Unsuitability%20of%20update">Unsuitability of update</a>:      Updating does not always work
</ul>

<p><hr>
Node:How to update, Next:<a rel=next href="#Unsuitability%20of%20update">Unsuitability of update</a>, Previous:<a rel=previous href="#update">update</a>, Up:<a rel=up href="#update">update</a>
<p>

<h4><a name="How%20to%20update">How to update members of an archive</a></h4>

<p>You must use file name arguments with the <kbd>-update</kbd> (<kbd>-u</kbd>) subcommand. 
If you don't specify any files, <code>tar</code> won't act on any files and
won't tell you that it didn't do anything (which might end up confusing
you).

<p>To see the <kbd>-update</kbd> (<kbd>-u</kbd>) option at work, create a new file,
<code>classical</code>, in your practice directory, and some extra text to the
file <code>blues</code>, using any text editor.  Then invoke <code>tar</code> with
the <kbd>update</kbd> subcommand and the <kbd>-verbose</kbd> (<kbd>-v</kbd>) option specified,
using the names of all the files in the practice directory as file name
arguments:

<pre>$ <kbd>tar --update -v -f collection.tar blues folk rock classical</kbd>
blues
classical
$
</pre>

<p>Because we have specified verbose mode, <code>tar</code> prints out the names
of the files it is working on, which in this case are the names of the
files that needed to be updated.  If you run <kbd>tar -list</kbd> and look
at the archive, you will see <code>blues</code> and <code>classical</code> at its
end.  There will be a total of two versions of the member <code>blues</code>;
the one at the end will be newer and larger, since you added text before
updating it.

<p>(The reason <code>tar</code> does not overwrite the older file when updating
it is because writing to the middle of a section of tape is a difficult
process.  Tapes are not designed to get data inserted in their middle;
doing so would destroy any data after the place you write.  See <a href="#Media">Media</a>,
for more information about tapes.)

<p><kbd>-update</kbd> (<kbd>-u</kbd>) is not suitable for performing backups for two
reasons: it does not change directory content entries, and it lengthens
the archive every time it is used.  The <code>tar</code> options intended
specifically for backups are more efficient.  If you need to run
backups, please consult <a href="#Backups">Backups</a>.

<p><hr>
Node:Unsuitability of update, Previous:<a rel=previous href="#How%20to%20update">How to update</a>, Up:<a rel=up href="#update">update</a>
<p>

<h4><a name="Unsuitability%20of%20update">Updating does not always work</a></h4>

<p>Sometimes, you may have a situation for which you would think usign
<kbd>-update</kbd> (<kbd>-u</kbd>) would be ideal; unfortunately, this is not always the
case.  Two situations for which <kbd>-update</kbd> (<kbd>-u</kbd>) is unsuitable are
updating an archive stored on a magnetic tape, and making
a backup.  Other subcommands and options provide more appropriate
solutions in these situations.

<p><code>tar</code> does not overwrite the older file when updating an archive. 
This is because writing to the middle of a section of tape is a
difficult process.  Tapes are not really designed to go backward
(although some have the capability), and their linear nature makes
inserting data into the middle of a tape impossible, even if there is
room at the end of the tape.  In this way, tapes differ from other kinds
of storage media, such as floppy diskettes and hard drives. 
See <a href="#Media">Media</a>, for more information about tapes and other kinds of storage
media.

<p><kbd>-update</kbd> (<kbd>-u</kbd>) is not suitable for performing backups for two reasons:
it does not change directory content entries, and it lengthens the
archive every time it is used.  The <code>tar</code> options intended
specifically for backups are more efficient.  If you need to run
backups, please consult <a href="#Backups">Backups</a>.

<p><hr>
Node:Applications, Previous:<a rel=previous href="#create">create</a>, Up:<a rel=up href="#Subcommands">Subcommands</a>
<p>

<h2><a name="Applications">Other uses for <code>tar</code></a></h2>

<p>You can easily use archive files to transport a group of files from
one system to another: put all relevant files into an archive on one
computer system, transfer the archive to another system, and extract
the contents there.  The basic transfer medium might be magnetic tape,
Internet FTP, or even electronic mail (though you must encode the
archive with <code>uuencode</code> in order to transport it properly by
mail).  Both machines do not have to use the same operating system, as
long as they both support the <code>tar</code> program.

<p>For example, here is how you might copy a directory's contents from
one disk to another, while preserving the dates, modes, owners, and
link-structure of all the files therein.  In this case, the transfer
medium is a <dfn>pipe</dfn>, which is a Unix redirection mechanism:

<pre>$ <kbd>cd&nbsp;sourcedir;&nbsp;tar&nbsp;--create&nbsp;--file=-&nbsp;.&nbsp;|&nbsp;(cd&nbsp;targetdir;&nbsp;tar&nbsp;--extract&nbsp;--file=-)</kbd>
</pre>

<p>The command also works using short option forms:

<pre>$ <kbd>cd sourcedir; tar -cf - . | (cd targetdir; tar -xf -)</kbd>
</pre>

<p>If you are really confident you are using <code>tar</code> and that standard
input and output were not overridden by something else as the default archive
at your installation, you might write the above examples more simply:

<pre>$ <kbd>cd sourcedir; tar --create . | (cd targetdir; tar --extract)</kbd>
$ <kbd>cd sourcedir; tar -c . | (cd targetdir; tar -x)</kbd>
</pre>

<p>This is one of the easiest methods to transfer a <code>tar</code> archive.

<ul>
<li><a href="#concatenate">concatenate</a>:                  Combining archives with <code>tar</code>

<li><a href="#Using%20cat%20with%20archives">Using cat with archives</a>:      Combining archives with <code>cat</code>

<li><a href="#delete">delete</a>:                       Removing archive members from an archive
</ul>

<p><hr>
Node:concatenate, Next:<a rel=next href="#Using%20cat%20with%20archives">Using cat with archives</a>, Previous:<a rel=previous href="#Applications">Applications</a>, Up:<a rel=up href="#Applications">Applications</a>
<p>

<h3><a name="concatenate">Combining archives with <code>tar</code></a></h3>

<p>Sometimes it may be convenient to add a second archive onto the end of
an archive rather than adding individual files to the archive.  To add
the contents of one or more archives to the end of another archive, you
should use the <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>) subcommand.

<p>To use <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>), name two archives to be concatenated on the
command line.  (Nothing happens if you don't list any.)  The members,
and their member names, will be copied verbatim from those archives.  If
this causes multiple members to have the same name, it does not delete
any members; all the members with the same name coexist.  For
information on how this affects reading the archive, .

<p>To demonstrate how <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>) works, create two small archives
called <code>bluesrock.tar</code> and <code>folkjazz.tar</code>, using the relevant
files from <code>practice</code>:

<pre>$ <kbd>tar -cvf bluesrock.tar blues rock</kbd>
blues
rock
$ <kbd>tar -cvf folkjazz.tar folk jazz</kbd>
folk
jazz
</pre>

<p>If you like, you can run <kbd>tar -list</kbd> to make sure the archives
contain what they are supposed to:

<pre>$ <kbd>tar -tvf bluesrock.tar</kbd>
-rw-rw-rw- myself users 105 1997-01-21 19:42 blues
-rw-rw-rw- myself users  33 1997-01-20 15:34 rock
$ <kbd>tar -tvf folkjazz.tar</kbd>
-rw-rw-rw- myself users 20 1996-09-23 16:44 folk
-rw-rw-rw- myself users 65 1997-01-30 14:15 jazz
</pre>

<p>We can concatenate these two archives with <code>tar</code>:

<pre>$ <kbd>tar --concatenate --file=bluesrock.tar jazzfolk.tar</kbd>
</pre>

<p>If you now list the contents of the <code>bluesrock.tar</code>, you will see
that now it also contains the archive members of <code>jazzfolk.tar</code>:

<pre>$ <kbd>tar --list --file=bluesrock.tar</kbd>
blues
rock
jazz
folk
</pre>

<p>When you use <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>), the source and target archives must
already exist and must have been created using compatible format parameters
().  The new, concatenated archive
will be called by the same name as the first archive listed on the command
line.

<p>Like <kbd>-append</kbd> (<kbd>-r</kbd>), this subcommand cannot be performed on some
tape drives, due to deficiencies in the formats those tape drives use.

<p>It may seem more intuitive to you to try to use <code>cat</code> to
concatenate two archives instead of using the <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>)
subcommand; after all, <code>cat</code> is the utility for combining files.

<p>However, <code>tar</code> archives incorporate an end-of-file marker which
must be removed if the concatenated archives are to be read properly as
one archive.  <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>) removes the end-of-archive marker
from the target archive before each new archive is appended.  If you use
<code>cat</code> to combine the archives, the result will not be a valid
<code>tar</code> format archive.  If you need to retrieve files from an
archive that was added to using the <code>cat</code> utility, use the
<kbd>-ignore-zeros</kbd> (<kbd>-i</kbd>) option.  See <a href="#ignore-zeros">ignore-zeros</a>, for further
information on dealing with archives improperly combined using the
<code>cat</code> utility.

<p>You must specify the source archives using <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>)
(see <a href="#file">file</a>).  If you do not specify the target archive, <code>tar</code>
uses the value of the environment variable <code>TAPE</code>, or, if this has
not been set, the default archive name.  If the default archive name is
the standard output, <code>tar</code> will print an error message.

<ul>
<li><a href="#Using%20cat%20with%20archives">Using cat with archives</a>:      Combining archives with <code>cat</code>
</ul>

<p><hr>
Node:Using cat with archives, Next:<a rel=next href="#delete">delete</a>, Previous:<a rel=previous href="#concatenate">concatenate</a>, Up:<a rel=up href="#Applications">Applications</a>
<p>

<h3><a name="Using%20cat%20with%20archives">Combining archives with <code>cat</code></a></h3>

<p>It may seem more intuitive to you to try to use <code>cat</code> to
concatenate two archives instead of using the <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>)
subcommand; after all, <code>cat</code> is the utility for combining files. 
However, <code>tar</code> archives incorporate an end-of-file marker which
must be removed if the concatenated archives are to be read properly as
one archive.  <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>) removes the end-of-archive marker
from the target archive before each new archive is appended.

<p>Therefore, if you use <code>cat</code> to combine the archives, the result
will not be a valid <code>tar</code> format archive.  If you need to retrieve
files from an archive that was added to using the <code>cat</code> utility,
use the <kbd>-ignore-zeros</kbd> (<kbd>-i</kbd>) option.  See <a href="#ignore-zeros">ignore-zeros</a>, for further
information on dealing with archives improperly combined using the
<code>cat</code> shell utility.

<p>You must specify the names of the archives that will be concatenated
using <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) (see <a href="#file">file</a>).  If you do not
specify the target archive (the archive to which you will concatenate
other archives), <code>tar</code> uses the value of the environment variable
<code>TAPE</code>, or, if this has not been set, the default archive name.

<p><hr>
Node:delete, Previous:<a rel=previous href="#Using%20cat%20with%20archives">Using cat with archives</a>, Up:<a rel=up href="#Applications">Applications</a>
<p>

<h3><a name="delete">Removing archive members from an archive</a></h3>

<p>You can remove members from an archive by using the <kbd>-delete</kbd>
option.  Specify the name of the archive with <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) and then
specify the names of the members to be deleted; if you list no member
names, nothing will be deleted.  The <kbd>-verbose</kbd> (<kbd>-v</kbd>) option will
cause <code>tar</code> to print the names of the members as they are deleted. 
As with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), you must give the exact member names when
using <kbd>-delete</kbd>.  <kbd>-delete</kbd> will remove all versions of
the named file from the archive.  The <kbd>-delete</kbd> subcommand can run
very slowly.

<p>Unlike other subcommands, <kbd>-delete</kbd> has no short form.

<p>The <kbd>-delete</kbd> subcommand will rewrite the archive.  You can only
use <kbd>-delete</kbd> on an archive if the archive device allows you to
write to any point on the media at any time, that is, if it is a
random-access device like a hard disk. 
The <kbd>-delete</kbd> subcommand does not work on magnetic tapes.  Do not
try to delete an archive member
from a magnetic tape; the action will not succeed, and you will be
likely to scramble the archive and damage your tape.  There is no safe
way (except by completely rewriting the archive) to delete files from
most kinds of magnetic tape.  See <a href="#Media">Media</a>.

<p>To delete all versions of the file <code>blues</code> from the archive
<code>collection.tar</code> in the <code>practice</code> directory, make sure you
are in that directory, and then:

<pre>$ <kbd>tar --list --file=collection.tar</kbd>
jazz
blues
folk
rock
blues
blues
classical
$ <kbd>tar --delete --file=collection.tar blues</kbd>
$ <kbd>tar --list --file=collection.tar</kbd>
jazz
folk
rock
classical
$
</pre>

<p>The <kbd>-delete</kbd> option has been reported to work properly when
<code>tar</code> acts as a filter from <code>stdin</code> to <code>stdout</code>.

<p><hr>
Node:Choosing, Next:<a rel=next href="#Formats">Formats</a>, Previous:<a rel=previous href="#Subcommands">Subcommands</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="Choosing">Choosing files and names for <code>tar</code></a></h1>

<p>Certain options to <code>tar</code> enable you to specify a name for your
archive.  Other options let you decide which files to include in, or exclude
from, the archive, based on when or whether files were modified, whether
the file names do or don't match specified patterns, or whether files
are in specified directories.

<ul>
<li><a href="#file">file</a>:                         Choosing and naming archive files

<li><a href="#Selecting%20Archive%20Members">Selecting Archive Members</a>:    Selecting archive members

<li><a href="#Exclusions">Exclusions</a>:                   Excluding files by name

<li><a href="#Time%20criteria">Time criteria</a>:                Time based exclusions

<li><a href="#Walking">Walking</a>:                      Walking through directories

<li><a href="#Relative">Relative</a>:                     Relative notations for file names
</ul>

<p><hr>
Node:file, Next:<a rel=next href="#Selecting%20Archive%20Members">Selecting Archive Members</a>, Previous:<a rel=previous href="#Choosing">Choosing</a>, Up:<a rel=up href="#Choosing">Choosing</a>
<p>

<h2><a name="file">Choosing and naming archive files</a></h2>

<p>By default, <code>tar</code> uses an archive file name that was compiled into
it when <code>tar</code> was built on the system; usually this name refers to
some physical tape drive on the machine.  Later versions of
<code>tar</code> use standard output as the default archive file name (which
you can redirect to another file). 
However, the person who installed <code>tar</code>
on the system may not have set the default to a meaningful value as far as
most users are concerned.  As a result, you will usually want to tell
<code>tar</code> where to find (or create) the archive.  The <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>)
option allows you to specify a file to use as the archive
instead of the default archive file location.

<p>The <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) option names the archive to create or operate on. 
Use it in conjunction with any subcommand.

<p>For example, in this <code>tar</code> command,

<pre>$ <kbd>tar -cvf collection.tar blues folk jazz</kbd>
</pre>

<p><code>collection.tar</code> is the name of the archive.  It must directly
follow the <kbd>-f</kbd> option, since whatever directly follows <kbd>-f</kbd>
will end up naming the archive.  If you neglect to specify an
archive name, you may end up overwriting a file in the working directory
with the archive you create, since <code>tar</code> will use this file's name
for the archive name.

<p>An archive can be saved as a file in the file system, sent through a
pipe or over a network, or written to an I/O device such as a tape,
floppy disk, or CD-Rewritable drive.

<p>If you do not name the archive, <code>tar</code> uses the value of the
environment variable <code>TAPE</code> as the file name for the archive.  If
that is not available, <code>tar</code> uses a default, compiled-in archive
name, usually that for tape unit zero (ie. <code>/dev/tu00</code>), or the
standard output. 
<code>tar</code> always needs an archive name.

<p>If you use <code>-</code> as an archive name, <code>tar</code> reads the
archive from standard input (when listing or extracting files), or
writes it to standard output (when creating an archive).  If you use
<code>-</code> as an archive name when modifying an archive,
<code>tar</code> reads the original archive from its standard input and
writes the entire new archive to its standard output.

<p>To specify an archive file on a device attached to a remote machine,
use the following:

<pre><kbd>--file=<var>hostname</var>:/<var>dev</var>/<var>file name</var></kbd>
</pre>

<p><code>tar</code> will initiate the remote connection, if possible, and prompt
you for a username and password.  If you use
<kbd>-file=<var>user</var>@<var>hostname</var>:/<var>dev</var>/<var>file&nbsp;name</var></kbd>,
<code>tar</code> will initiate the remote connection, if possible, using your
username as the username on the remote machine.

<p>If the archive file name includes a colon (<code>:</code>), then it is assumed
to be a file on another machine.  If the archive file is
<kbd><var>user</var>@<var>host</var>:<var>file</var></kbd>, then <var>file</var> is used on the
host <var>host</var>.  The remote host is accessed using the <code>rsh</code>
program, with a username of <var>user</var>.  If the username is omitted
(along with the <code>@</code> sign), then your user name will be used. 
(This is the normal <code>rsh</code> behavior.)  It is necessary for the
remote machine, in addition to permitting your <code>rsh</code> access, to
have the <code>/usr/ucb/rmt</code> program installed.  If you need to use a
file whose name includes a colon, then the remote tape drive behavior
can be inhibited by using the <kbd>-force-local</kbd> option.

<p>The MS-DOS/MS-Windows version of <code>tar</code> makes an exception to the
above: it does <strong>not</strong> treat archive names with drive letters, such
as <code>d:/backups/daily.tar</code>, as remote.  This is so you would not be
forced to use <kbd>-force-local</kbd> with the usual DOS-style absolute
file names.  <code>tar</code> only makes this exception when the colon is
preceded by a single character in the range <kbd>[A-z]</kbd>, which are valid
MS-DOS/MS-Windows drive letters.  (Yes, DOS also allows the drive letter
to be one of the six ASCII characters between uppercase <kbd>Z</kbd> and lowercase
<kbd>a</kbd>.)  This means that remote machines with single-letter names are
effectively disallowed by the MS-DOS version of <code>tar</code>.  However, we
find it hard to believe that anybody would use a one-letter name for a
machine.  (And as of now, <code>tar</code> doesn't support remote access on
MS-DOS anyway.)

<p>When the archive is being created to <code>/dev/null</code>, <code>tar</code>
tries to minimize input and output subcommands.  The Amanda backup
system, when used with <code>tar</code>, has an initial sizing pass which
uses this feature.

<ul>
<li><a href="#Using%20file">Using file</a>:                   Using the <kbd>--file</kbd> option

<li><a href="#Standard%20archive">Standard archive</a>:             Archive on standard input or output

<li><a href="#lmh">lmh</a>:                          Abbreviating drive and density

<li><a href="#Remote">Remote</a>:                       Accessing a remote drive

<li><a href="#force-local">force-local</a>:                  Inhibiting remote access

<li><a href="#rsh-command">rsh-command</a>:                  Selecting the remote access mechanism

<li><a href="#rmt%20invocation">rmt invocation</a>:               How <code>rmt</code> works
</ul>

<p><hr>
Node:Using file, Next:<a rel=next href="#Standard%20archive">Standard archive</a>, Previous:<a rel=previous href="#file">file</a>, Up:<a rel=up href="#file">file</a>
<p>

<h3><a name="Using%20file">Using the <kbd>-file</kbd> option</a></h3>

<p>The <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) option allows you to specify a file
to use as the archive instead of the default archive file location.

<p>The <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) option names the archive to create or operate on. 
Use in conjunction with any subcommand.

<p>For example, in this <code>tar</code> command,

<pre>$ <kbd>tar -cvf genres.tar blues folk jazz</kbd>
</pre>

<p><code>genres.tar</code> is the name of the archive.  It must directly
follow the <kbd>-f</kbd> option, since whatever directly follows <kbd>-f</kbd>
will end up naming the archive.  If you neglect to specify an
archive name, you may end up overwriting a file in the working directory
with the archive you create, since <code>tar</code> will use this file's name
for the archive name.

<p>When the archive is being created to <code>/dev/null</code>, <code>tar</code>
tries to minimize input and output subcommands.  The Amanda backup
system, when used with <code>tar</code>, has an initial sizing pass which
uses this feature.

<p>If you do not name the archive, <code>tar</code> uses the value of the
environment variable <code>TAPE</code> as the file name for the archive.  If
that is not available, <code>tar</code> uses a default, compiled-in archive
name, usually that for tape unit zero (ie. <code>/dev/tu00</code>). 
<code>tar</code> always needs an archive name.

<p>If you use <code>-</code> as an archive name, <code>tar</code> reads the
archive from standard input (when listing or extracting files), or
writes it to standard output (when creating an archive).  If you use
<code>-</code> as an archive name when modifying an archive,
<code>tar</code> reads the original archive from its standard input and
writes the entire new archive to its standard output.

<pre>$ <kbd>cd sourcedir; tar -cf - . | (cd targetdir; tar -xf -)</kbd>
</pre>

<p>The <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) option is used to specify the file name of the archive
<code>tar</code> works on.  A few particular values are recognized especially,
and then trigger special internal mechanics for accessing the archive. 
For example:

<pre><kbd>-f [<var>hostname</var>:]<var>file</var></kbd>
<kbd>--file=[<var>hostname</var>:]<var>file</var></kbd>
</pre>

<p>may be used to access the archive file or device <var>file</var> on a networked
computer named <var>hostname</var>.  Such special notations are described here.

<p>If the file name is <kbd>-</kbd>, <code>tar</code> reads the archive from standard
input (when listing or extracting), or writes it to standard output
(when creating).  If the <kbd>-</kbd> file name is given when updating an
archive, <code>tar</code> will read the original archive from its standard
input, and will write the entire new archive to its standard output.

<p>If the file name contains a <code>:</code>, it is interpreted as
<kbd>hostname:file name</kbd>.  If the <var>hostname</var> contains an <dfn>at</dfn>
sign (<kbd>@</kbd>), it is treated as <kbd>user@hostname:file name</kbd>.  In
either case, <code>tar</code> will invoke the command <code>rsh</code> (or
<code>remsh</code>) to start up an <code>/etc/rmt</code> on the remote machine.  If
you give an alternate login name, it will be given to the <code>rsh</code>. 
Naturally, the remote machine must have an executable <code>/etc/rmt</code>. 
This program is free software from the University of California, and a
copy of the source code can be found with the sources for <code>tar</code>;
it's compiled and installed by default.

<p>Since absolute file names on MS-DOS and MS-Windows include a drive
letter, like in <code>d:/dir/subdir/file</code>, <code>tar</code> compiled for these
platforms does not treat file names with <code>:</code> as remote files if
there is a single letter before the colon.  <code>tar</code> also does not
currently support archives on remote machines when it runs on
MS-DOS/MS-Windows.

<p>If <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) is not given, but the environment variable <code>TAPE</code> is
set, its value is used; otherwise, old versions of <code>tar</code> used a default
archive name (which was picked when <code>tar</code> was compiled).  The
default is normally set up to be the <dfn>first</dfn> tape drive or other
transportable I/O medium on the system.

<p>Starting with version 1.11.5, <code>tar</code> uses standard input and
standard output as the default device, and we will no longer try to
support automatic device detection at installation time.  This was
failing in so many cases that it was hopeless to repair.  It is now
completely left to the installer to override standard input and standard
output in favor of some default device, if this seems preferable to him/her. 
Further, we think <em>most</em> actual uses of <code>tar</code> are with
pipes or disks, not tapes, cartridges, or diskettes.

<p>Some users think that using standard input and output is asking
for trouble.  This could lead to a nasty surprise on your screen if
you forget to specify an output file name--especially if you are going
through a network or terminal server capable of buffering large amounts
of output.  We had so many bug reports in that area of configuring
default tapes automatically, and so many contradicting requests, that
we finally considered the problem to be intractable, at least if
portability is demanded.  We could
of course use something like <code>/dev/tape</code> as a default, but this
is <em>also</em> asking for various kind of trouble, ranging from hung
processes to accidental destruction of real tapes.  After having seen
all this mess, using standard input and output as a default really
sounds like the only clean choice left, and a very useful one too.

<p><code>tar</code> reads and writes archive in records; we suspect this is to be
the main reason why block devices are preferred over character devices. 
Most probably, block devices are more efficient too.  The installer could
also check for <code>DEFTAPE</code> in <code>&lt;sys/mtio.h&gt;</code>.

<p><hr>
Node:Standard archive, Next:<a rel=next href="#lmh">lmh</a>, Previous:<a rel=previous href="#Using%20file">Using file</a>, Up:<a rel=up href="#file">file</a>
<p>

<h3><a name="Standard%20archive">Archive on standard input or output</a></h3>

<p><hr>
Node:lmh, Next:<a rel=next href="#Remote">Remote</a>, Previous:<a rel=previous href="#Standard%20archive">Standard archive</a>, Up:<a rel=up href="#file">file</a>
<p>

<h3><a name="lmh">Abbreviating drive and density</a></h3>

<p>In some circumstances, the special <kbd>-[0-7][lmh]</kbd> option may be used
to specify drive and density.  (Not supported on MS-DOS/MS-Windows.)

<p><hr>
Node:Remote, Next:<a rel=next href="#force-local">force-local</a>, Previous:<a rel=previous href="#lmh">lmh</a>, Up:<a rel=up href="#file">file</a>
<p>

<h3><a name="Remote">Accessing a remote drive</a></h3>

<p>In order to access the tape drive on a remote machine, <code>tar</code>
uses the remote tape server written at the University of California at
Berkeley.  The remote tape server must be installed as <code>/etc/rmt</code>
on any machine whose tape drive you want to use.  <code>tar</code> calls
<code>/etc/rmt</code> by running an <code>rsh</code> or <code>remsh</code> to the remote
machine, optionally using a different login name if one is supplied.

<p>A copy of the source for the remote tape server is provided.  It is
Copyright &copy; 1983 by the Regents of the University of
California, but can be freely distributed.  Instructions for compiling
and installing it are included in the <code>Makefile</code>.

<p>To specify an archive file on a device attached to a remote machine,
use the following:

<pre><kbd>--file=<var>hostname</var>:/<var>dev</var>/<var>file name</var></kbd>
</pre>

<p><code>tar</code> will complete the remote connection, if possible, and
prompt you for a username and password.  If you use
<kbd>-file=@<var>hostname</var>:/<var>dev</var>/<var>file&nbsp;name</var></kbd>, <code>tar</code>
will complete the remote connection, if possible, using your username
as the username on the remote machine.

<p>If the archive file name includes a colon (<code>:</code>), then it is assumed
to be a file on another machine.  If the archive file is
<kbd><var>user</var>@<var>host</var>:<var>file</var></kbd>, then <var>file</var> is used on the
host <var>host</var>.  The remote host is accessed using the <code>rsh</code>
program, with a username of <var>user</var>.  If the username is omitted
(along with the <code>@</code> sign), then your user name will be used. 
(This is the normal <code>rsh</code> behavior.)  It is necessary for the
remote machine to have the <code>/usr/ucb/rmt</code> program installed, in
addition to permitting your <code>rsh</code> access.

<p>If you need to use a file whose name includes a colon, then the remote tape
drive behavior can be inhibited by using the <kbd>-force-local</kbd> option
(see <a href="#force-local">force-local</a>).  You can tell <code>tar</code> to use an alternative to
<code>rsh</code> by using the <kbd>rsh-command=<var>command</var></kbd> option (see <a href="#rsh-command">rsh-command</a>).

<p>A few options are related to such special interpretation.

<p><hr>
Node:force-local, Next:<a rel=next href="#rsh-command">rsh-command</a>, Previous:<a rel=previous href="#Remote">Remote</a>, Up:<a rel=up href="#file">file</a>
<p>

<h3><a name="force-local">Inhibiting remote access</a></h3>

<p>The <kbd>-force-local</kbd> option treats the archive file name specified by
<kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) as local even if it contains a colon.  (The MS-DOS version
always treats DOS-style absolute file names with a drive letter as local.)

<p><hr>
Node:rsh-command, Next:<a rel=next href="#rmt%20invocation">rmt invocation</a>, Previous:<a rel=previous href="#force-local">force-local</a>, Up:<a rel=up href="#file">file</a>
<p>

<h3><a name="rsh-command">Selecting the remote access mechanism</a></h3>

<p>By using the <kbd>rsh-command=<var>command</var></kbd> option, <code>tar</code> may be asked to
use remote <var>command</var> instead of <code>rsh</code>.  This option exists so
that people who use something other than the standard <code>rsh</code> (for example,
a Kerberized <code>rsh</code>) can access a remote device.

<p>When this option is not used, the shell command found when the <code>tar</code>
program was installed is used instead.  This is the first found of
<code>/usr/ucb/rsh</code>, <code>/usr/bin/remsh</code>, <code>/usr/bin/rsh</code>,
<code>/usr/bsd/rsh</code> or <code>/usr/bin/nsh</code>.  The installer may have
overridden this by defining the environment variable <code>RSH</code> <em>at
installation time</em>.

<p>The option <kbd>rsh-command=<var>command</var></kbd> causes <code>tar</code> to use remote <var>command</var>
instead of <code>rsh</code>.  This option exists so that people who use something
other than the standard <code>rsh</code> (for example, a Kerberized <code>rsh</code>) can
access a remote device.

<p>When this command is not used, the shell command found when the <code>tar</code>
program was installed is used instead.  This is the first found of
<code>/usr/ucb/rsh</code>, <code>/usr/bin/remsh</code>, <code>/usr/bin/rsh</code>,
<code>/usr/bsd/rsh</code> or <code>/usr/bin/nsh</code>.  The installer may have
overridden this by defining the environment variable <code>RSH</code> <em>at
installation time</em>.

<p><hr>
Node:rmt invocation, Previous:<a rel=previous href="#rsh-command">rsh-command</a>, Up:<a rel=up href="#file">file</a>
<p>

<h3><a name="rmt%20invocation">How <code>rmt</code> works</a></h3>

<p>This subsection has yet to be written.

<p><hr>
Node:Selecting Archive Members, Next:<a rel=next href="#Exclusions">Exclusions</a>, Previous:<a rel=previous href="#file">file</a>, Up:<a rel=up href="#Choosing">Choosing</a>
<p>

<h2><a name="Selecting%20Archive%20Members">Selecting archive members</a></h2>

<p><dfn>File name arguments</dfn> specify which files in the file system
<code>tar</code> operates on, when creating or adding to an archive, or which
archive members <code>tar</code> operates on, when reading or deleting from
an archive.  See <a href="#Subcommands">Subcommands</a>.

<p>To specify file names, you can include them as the last arguments on
the command line, as follows:
<pre><kbd>tar</kbd> <var>subcommand</var> [<var>option1</var> <var>option2</var> <small>...</small>] [<var>file name-1</var> <var>file name-2</var> <small>...</small>]
</pre>

<p>If you specify a directory name as a file name argument, all the files
in that directory are operated on by <code>tar</code>.

<p>If you do not specify files when <code>tar</code> is invoked with
<kbd>-create</kbd> (<kbd>-c</kbd>), <code>tar</code> operates on all the non-directory files in
the working directory.  If you specify either <kbd>-list</kbd> (<kbd>-t</kbd>) or
<kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), <code>tar</code> operates on all the archive members in the
archive.  If you specify any subcommand other than one of these three,
<code>tar</code> does nothing.

<p>By default, <code>tar</code> takes file names from the command line.  However,
there are other ways to specify file or member names, or to modify the manner
in which <code>tar</code> selects the files or members upon which to operate. 
See <a href="#files-from">files-from</a>.  See <a href="#exclude">exclude</a>.  In general, these methods work for
specifying the names of both files and archive members.

<ul>
<li><a href="#files-from">files-from</a>:                   Reading names from a file

<li><a href="#find%20with%20files-from">find with files-from</a>:         Using <code>find</code> to generate a list of files

<li><a href="#null">null</a>:                         <code>NUL</code> terminated file names

<li><a href="#quick">quick</a>:                        Trading speed versus duplicate entries
</ul>

<p><hr>
Node:files-from, Next:<a rel=next href="#find%20with%20files-from">find with files-from</a>, Previous:<a rel=previous href="#Selecting%20Archive%20Members">Selecting Archive Members</a>, Up:<a rel=up href="#Selecting%20Archive%20Members">Selecting Archive Members</a>
<p>

<h3><a name="files-from">Reading names from a file</a></h3>

<p>The <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) option gets names to extract or create from file
<var>file name</var>.

<p>So, instead of giving the names of files or archive members on the command
line, you can put the names into a file, and then use the <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>)
option to <code>tar</code>.  Give the name of the file which contains the list
of files to include as the argument to <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>).  In the list,
the file names should be separated by newlines.  You will frequently use
this option when you have generated the list of files to archive with the
<code>find</code> utility.

<p>One can intermix <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) within the names given on the command
line, in which case the included list of file is logically inserted at the
proper point in the file name sequence.<a rel=footnote href="#fn-18"><sup>18</sup></a> The <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) option may even
be used more than once.  One consequence of the above is that, when this
option is specified early in the command, the names given on the command
line are collected after the list of files included by <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>).

<p>If you give a single dash as a file name for <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>), (that
is, if you specify either <kbd>-files-from=-</kbd> or <kbd>-T&nbsp;-</kbd>),
then the file names are read from standard input.  Unless you are running
<code>tar</code> with <kbd>-create</kbd> (<kbd>-c</kbd>), you cannot use both <kbd>-files-from=-</kbd>
and <kbd>-file=-</kbd> (<kbd>-f&nbsp;-</kbd>) in the same command.  In fact,
the rule is that standard input may not be invoked more than once.

<p>Unless <kbd>-null</kbd> is set, file names in a <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) file
should quote special characters, at least newlines and backslashes, using
backslashed sequences.  Newlines may be represented by <code>\n</code>, tabs
by <code>\t</code>, form feeds by <code>\f</code>, backspaces by <code>\b</code>, carriage
returns by <code>\r</code>, deletes by <code>\?</code> and backslashes by <code>\\</code>. 
Characters may also be given in octal notation as per <code>\<var>N</var></code>,
<code>\<var>NN</var></code> or <code>\<var>NNN</var></code>.  Other occurrences of backslashes
are merely dropped.

<p>Using <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) and <kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>) simultaneously on the command
line is a bit delicate, and the user should pay attention to a few things. 
As the directory should usually be switched before interpreting file names
from the list, <kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>) normally appears before <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>). 
Yet, if the argument of <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) uses relative notation, it is
interpreted relative to the last specified directory.  Some shell trickery
might be needed, like this:

<pre>$ <kbd>tar --create --file=archive.tar --directory=where --files-from=`pwd`/list</kbd>
$ <kbd>tar cfCT archive.tar where `pwd`/list</kbd>
</pre>

<p>for reading the list of files from <code>list</code> in the current directory,
while interpreting each file it contains relative to the <code>where</code>
directory.  Another possibility is to to trigger a change of the directory
from within the file list contents, so avoiding the <kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>)
option on the command line.  See <a href="#directory">directory</a>.

<p><hr>
Node:find with files-from, Next:<a rel=next href="#null">null</a>, Previous:<a rel=previous href="#files-from">files-from</a>, Up:<a rel=up href="#Selecting%20Archive%20Members">Selecting Archive Members</a>
<p>

<h3><a name="find%20with%20files-from">Using <code>find</code> to generate a list of files</a></h3>

<p>The following example shows how to use <code>find</code> to generate a list of
files smaller than 400K in length and put that list into a file called
<code>small-files</code>.  You can then use the <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) option to
<code>tar</code> to specify the files from that file, <code>small-files</code>, to create
the archive <code>little.tgz</code>.  (The <kbd>-gzip</kbd> (<kbd>-z</kbd>) option to <code>tar</code>
compresses the archive with <code>gzip</code>; see <a href="#gzip">gzip</a> for more information.)

<pre>$ <kbd>find . ! -type d -size -400 -print &gt; small-files</kbd>
$ <kbd>tar -c -v -z -T small-files -f little.tgz</kbd>
</pre>

<p>The <kbd>! -type d</kbd> predicate is needed so that <code>find</code> won't print
the name <code>.</code> directory itself, if it happens to be small in size. 
If <code>find</code> were to print the name of <code>.</code>, all of the files in
the current directory would end up in the archive, in addition to the
files that are smaller than 400KB!

<p>You can use the <code>find</code> utility to generate a list of files.  You
can then pass this list to <code>tar</code> using the <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>)
option.  For more information on using <code>find</code>, please consult
.

<p>The following example shows how to use <code>find</code> to generate a list of
files smaller than 400K in length and put that list into a file
called <code>small-files</code>.  You can then use the <kbd>-T</kbd> option to
<code>tar</code> to specify the files from that file, <code>small-files</code>, to
create the archive <code>little.tgz</code>.  (The <kbd>-z</kbd> option to
<code>tar</code> compresses the archive with <code>gzip</code>; see <a href="#gzip">gzip</a> for
more information.)

<pre>$ <kbd>find . -size -400 -print &gt; small-files</kbd>
$ <kbd>tar -c -v -z -T small-files -f little.tgz</kbd>
</pre>

<p>This example shows how to use <code>find</code> to generate a list of files
larger than 800K in length and put that list into a file called
<code>long-files</code>.  The <kbd>-print0</kbd> option to <code>find</code> just just
like <kbd>-print</kbd>, except that it separates files with a <code>NUL</code>
rather than with a newline.  You can then run <code>tar</code> with both the
<kbd>-null</kbd> and <kbd>-T</kbd> options to specify that <code>tar</code> get the
files from that file, <code>long-files</code>, to create the archive
<code>big.tgz</code>.  The <kbd>-null</kbd> option to <code>tar</code> will cause
<code>tar</code> to recognize the <code>NUL</code> separator between files.

<pre>$ <kbd>find . -size +800 -print0 &gt; long-files</kbd>
$ <kbd>tar -c -v --null --files-from=long-files --file=big.tar</kbd>
</pre>

<p><hr>
Node:null, Next:<a rel=next href="#quick">quick</a>, Previous:<a rel=previous href="#find%20with%20files-from">find with files-from</a>, Up:<a rel=up href="#Selecting%20Archive%20Members">Selecting Archive Members</a>
<p>

<h3><a name="null"><code>NUL</code> terminated file names</a></h3>

<p>The <kbd>-null</kbd> option causes <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) to read file
names terminated by a <code>NUL</code> instead of a newline, so files whose
names contain newlines can be archived using <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>).

<p>So, the <kbd>-null</kbd> option exists so that users can tell <code>tar</code>
to consider only <code>NUL</code> terminated file names, instead of files that
terminate in a newline.

<p>The <kbd>-null</kbd> option is just like the one in GNU <code>xargs</code> and
<code>cpio</code>, and is useful with the <kbd>-print0</kbd> predicate of GNU
<code>find</code>.  In <code>tar</code>, <kbd>-null</kbd> also causes <kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>)
options, when used from within a <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) inclusion, to be
treated as file names to archive, in case there are any files out there
called <code>-C</code>.

<p>This example shows how to use <code>find</code> to generate a list of files
larger than 800K in length and put that list into a file called
<code>long-files</code>.  The <kbd>-print0</kbd> option to <code>find</code> works just
like <kbd>-print</kbd>, except that it separates files with a <code>NUL</code>
rather than with a newline.  You can then run <code>tar</code> with both the
<kbd>-null</kbd> and <kbd>-T</kbd> options to specify that <code>tar</code> get the
files from that file, <code>long-files</code>, to create the archive
<code>big.tgz</code>.  The <kbd>-null</kbd> option to <code>tar</code> will cause
<code>tar</code> to recognize the <code>NUL</code> separator between files.

<pre>$ <kbd>find . ! -type d -size +800 -print0 &gt; long-files</kbd>
$ <kbd>tar -c -v --null --files-from=long-files --file=big.tar</kbd>
</pre>

<p>Again, you need the <kbd>! -type d</kbd> predicate to prevent <code>find</code>
from printing the <code>.</code> directory name, which would have caused
<code>tar</code> to include the entire directory in the archive.

<p>Additionally, if the <kbd>-list</kbd> (<kbd>-t</kbd>) option is used non-verbosely with
<kbd>-null</kbd>, each listed file name will be terminated with <code>NUL</code>
instead of a newline.  Also, the quoting of some special characters,
which is usual in the produced output, gets inhibited.

<p><hr>
Node:quick, Previous:<a rel=previous href="#null">null</a>, Up:<a rel=up href="#Selecting%20Archive%20Members">Selecting Archive Members</a>
<p>

<h3><a name="quick">Trading speed versus duplicate entries</a></h3>

<p>Many users noticed that <code>tar</code> continues reading until the end of the
tape after requested files have been extracted.  The reason behind this is
that other tar options, like <kbd>-append</kbd> (<kbd>-r</kbd>) or <kbd>-update</kbd> (<kbd>-u</kbd>), let users put
additional versions of the same files on the end of an existing archive. 
However, in the practice of every day, it is very unusual that an archive
has many copies of a single entry, and running archives until their end may
be perceived as a waste of time.

<p>The <kbd>-quick</kbd> option alters the usual behavior of <code>tar</code>
at extraction time, so it considers itself satisfied when each given
argument specifying an entry name, in the archive, yielded some extraction. 
Once this has been achieved, <code>tar</code> terminates its processing early. 
Oh the other hand, for those unusual archives having multiple copies of
a single entry, using <kbd>-quick</kbd> may not be a wise thing to do, as the
extracted files may not always be the latest to appear in the archive.

<p>The speedup effect of <kbd>-quick</kbd> is somewhat defeated by another feature
of <code>tar</code>, by which it drains archive coming from a pipe, as part of its
completion code.<a rel=footnote href="#fn-19"><sup>19</sup></a> Such a pipe may be explict from the shell construct from which
<code>tar</code> is called, or sometimes, it might be implicit from <code>tar</code>
internal operations.  One important case of such implicit draining is
when the archive being read was compressed.  So currently, <kbd>-quick</kbd>
is most effective when reading an uncompressed archive directly from the
disk or the tape holding it.

<p>Wildcards in entry arguments create another difficulty.  To fully expand
wildcards from the archive contents, <code>tar</code> need to read the archive
completely.  So, if the <kbd>-quick</kbd> is given and wildcards are used in
the same call, <code>tar</code> is receiving contradicting messages about what
it should do.  In such cases, <code>tar</code> produces a usage error and does
not process the archive.

<p>When <kbd>-quick</kbd> is used, and if an argument specifies an entry which
appears multiple times in the archive, this documentation does not specify
which entries, among those possible, are selected for processing.  This is
left unspecified on purpose, so <code>tar</code> behavior may later be changed
more easily.  Consider that <kbd>-verbose</kbd> (<kbd>-v</kbd>) is your friend, here!

<p><hr>
Node:Exclusions, Next:<a rel=next href="#Time%20criteria">Time criteria</a>, Previous:<a rel=previous href="#Selecting%20Archive%20Members">Selecting Archive Members</a>, Up:<a rel=up href="#Choosing">Choosing</a>
<p>

<h2><a name="Exclusions">Excluding files by name</a></h2>

<p>To avoid operating on files whose names match a particular pattern, use
the <kbd>-exclude=<var>pattern</var></kbd> or <kbd>-exclude-from=<var>file-of-patterns</var></kbd> (<kbd>-X <var>file-of-patterns</var></kbd>) options.  These options are
available while creating an archive, as well as when listing an archive
or extracting from it.

<ul>
<li><a href="#exclude">exclude</a>:                      Excluding some files

<li><a href="#exclude-from">exclude-from</a>:                 Handling a lot of exclusions

<li><a href="#Wildcards">Wildcards</a>:                    Wildcard patterns and matching

<li><a href="#Problems%20with%20exclude">Problems with exclude</a>:        Problems with using the <code>exclude</code> options
</ul>

<p><hr>
Node:exclude, Next:<a rel=next href="#exclude-from">exclude-from</a>, Previous:<a rel=previous href="#Exclusions">Exclusions</a>, Up:<a rel=up href="#Exclusions">Exclusions</a>
<p>

<h3><a name="exclude">Excluding some files</a></h3>

<p>The <kbd>-exclude=<var>pattern</var></kbd> option causes <code>tar</code> to ignore files that match
the <var>pattern</var>.

<p>The <kbd>-exclude=<var>pattern</var></kbd> option will prevent any file or member which matches
the shell wildcards (<var>pattern</var>) from being operated on (<var>pattern</var>
can be a single file name or a more complex expression; see <a href="#Wildcards">Wildcards</a>). 
For example, if you want to create an archive with all the contents of the
directory <code>foo</code> in <code>/tmp</code>, except the file <code>foo/bar</code>, you
can use the command <kbd>tar -create -file=arch.tar -exclude=foo/bar</kbd>. 
You may give multiple <kbd>-exclude=<var>pattern</var></kbd> options.

<p><hr>
Node:exclude-from, Next:<a rel=next href="#Wildcards">Wildcards</a>, Previous:<a rel=previous href="#exclude">exclude</a>, Up:<a rel=up href="#Exclusions">Exclusions</a>
<p>

<h3><a name="exclude-from">Handling a lot of exclusions</a></h3>

<p>The <kbd>-exclude-from=<var>file-of-patterns</var></kbd> (<kbd>-X <var>file-of-patterns</var></kbd>) option causes <code>tar</code> to ignore files that
match the patterns listed in <var>file</var>.

<p>Use the <kbd>-exclude-from=<var>file-of-patterns</var></kbd> (<kbd>-X <var>file-of-patterns</var></kbd>) option to read a list of shell wildcards,
one per line, from <var>file</var>; <code>tar</code> will ignore files matching
those wildcards.  Thus if <code>tar</code> is called as <kbd>tar&nbsp;-c&nbsp;-X&nbsp;foo&nbsp;.</kbd>
and the file <code>foo</code> contains a single line <code>*.o</code>, no files whose
names end in <code>.o</code> will be added to the archive.

<p><hr>
Node:Wildcards, Next:<a rel=next href="#Problems%20with%20exclude">Problems with exclude</a>, Previous:<a rel=previous href="#exclude-from">exclude-from</a>, Up:<a rel=up href="#Exclusions">Exclusions</a>
<p>

<h3><a name="Wildcards">Wildcard patterns and matching</a></h3>

<p><dfn>Globbing</dfn> is the operation by which <dfn>wildcard</dfn> characters, <code>*</code>
or <code>?</code> for example, are replaced and expanded into all existing files
matching the given pattern.  However, <code>tar</code> often uses wildcard patterns
for matching (or globbing) archive members instead of actual files in the
filesystem.  Wildcard patterns are also used for verifying volume labels of
<code>tar</code> archives.  This section explains wildcard
syntax for <code>tar</code>.<a rel=footnote href="#fn-20"><sup>20</sup></a>

<p>A <var>pattern</var> should be written according to shell syntax, using wildcard
characters to effect globbing.  Most characters in the pattern stand
for themselves in the matched string, and case is significant: <code>a</code>
will match only <code>a</code>, and not <code>A</code>.  The character <code>?</code> in the
pattern matches any single character in the matched string.  The character
<code>*</code> in the pattern matches zero, one, or more single characters in
the matched string.  The character <code>\</code> says to take the following
character of the pattern <em>literally</em>; it is useful when one needs to
match the <code>?</code>, <code>*</code>, <code>[</code>, or <code>\</code> characters themselves.

<p>The character <code>[</code>, up to the matching <code>]</code>, introduces a
<dfn>character class</dfn>.  A character class is a list of acceptable characters
for the next single character of the matched string.  For example,
<code>[abcde]</code> would match any of the first five letters of the alphabet. 
Note that within a character class all of the "special characters"
listed above, other than <code>\</code>, lose their special meaning; for example,
<code>[-\\[*?]]</code> would match any of the characters <code>-</code>, <code>\</code>,
<code>[</code>, <code>*</code>, <code>?</code>, or <code>]</code>.  In a character class, the special
construction <code>[<var>a</var>-<var>e</var>]</code>, using an hyphen between two letters,
is meant to represent all characters between <var>a</var> and <var>e</var>, inclusive. 
(Due to parsing constraints, the characters <code>-</code> and <code>]</code> must
come either <em>first</em> or <em>last</em> in a character class.)

<p>If the first character of the class after the opening <code>[</code>
is <code>!</code> or <code>^</code>, then the meaning of the class is reversed. 
Rather than listing the characters to match, it lists those characters that
are <em>forbidden</em> as the next single character of the matched string.

<p>Other characters of the class stand for themselves.  The special
construction <code>[<var>a</var>-<var>e</var>]</code>, using a hyphen between two
letters, is meant to represent all characters between <var>a</var> and
<var>e</var> inclusive.

<p>Despite what some other tools do, periods (<code>.</code>) or forward slashes
(<code>/</code>) are not considered special for wildcard matches.  For example,
the pattern <code>*baz</code> may match file <code>/foo/bar/baz</code> as well as file
<code>foobaz</code>.  Moreover, in exclude contexts, if a pattern completely
matches a directory prefix of a matched string, then it matches the full
matched string: so any pattern excluding a directory also excludes all
the files beneath it.

<p>There are some discussions floating in the air asking for modifications
in the way <code>tar</code> accomplishes wildcard matches.  We perceive any change
of semantics in this area as a delicate thing to impose on <code>tar</code> users. 
On the other hand, we should be progressive enough to correct any ill-design:
compatibility at any price is not always a good attitude.  In conclusion,
it is <em>possible</em> that slight amendments be later brought to the
previous description.  Your opinions on the matter are welcome.

<p><hr>
Node:Problems with exclude, Previous:<a rel=previous href="#Wildcards">Wildcards</a>, Up:<a rel=up href="#Exclusions">Exclusions</a>
<p>

<h3><a name="Problems%20with%20exclude">Problems with using the <code>exclude</code> options</a></h3>

<p>Some users find <kbd>exclude</kbd> options confusing.  Here are some common
pitfalls:

<ul>
<li>The <code>tar</code> program will always act on file names
listed on the command line, no matter whether or not there is an
exclusion that would otherwise affect them.  In the example above, if
you create an archive and exclude files that end with <code>*.o</code>, but
explicitly name the file <code>catc.o</code> after all the options have been
listed, <code>catc.o</code> <em>will</em> be included in the archive.

<li>You can sometimes confuse the meanings of <kbd>-exclude=<var>pattern</var></kbd> and
<kbd>-exclude-from=<var>file-of-patterns</var></kbd> (<kbd>-X <var>file-of-patterns</var></kbd>).  Be careful: use <kbd>-exclude=<var>pattern</var></kbd> when files
to be excluded are given as a pattern on the command line.  Use
<kbd>-exclude-from=<var>file-of-patterns</var></kbd> (<kbd>-X <var>file-of-patterns</var></kbd>) to introduce the name of a
file which contains a list of patterns, one per line; each of these
patterns can exclude zero, one, or many files.

<li>When you use <kbd>-exclude=<var>pattern</var></kbd>, be sure to quote the <var>pattern</var>
parameter, so <code>tar</code> sees wildcard characters like <code>*</code>. 
If you do not do this, the shell might expand the <code>*</code> itself
using files at hand, so <code>tar</code> might receive a list of files
instead of one pattern, or none at all, making the command illegal.

<p>For example, write:

<pre>$ <kbd>tar -c -f <var>archive.tar</var> -X '*/tmp/*' <var>directory</var></kbd>
</pre>

<p>rather than:

<pre>$ <kbd>tar -c -f <var>archive.tar</var> -X */tmp/* <var>directory</var></kbd>
</pre>

</p><li>You must use use shell syntax, or globbing, rather than <code>regexp</code>
syntax, when using exclude options in <code>tar</code>.  If you try to use
<code>regexp</code> syntax to describe files to be excluded, your command
might fail.  See <a href="#Wildcards">Wildcards</a>.

<li>In earlier versions of <code>tar</code>, what is now the <kbd>-exclude-from=<var>file-of-patterns</var></kbd> (<kbd>-X <var>file-of-patterns</var></kbd>)
option was called <kbd>-exclude-<var>pattern</var></kbd> instead.  Now,
<kbd>-exclude=<var>pattern</var></kbd> applies to patterns listed on the command
line and <kbd>-exclude-from=<var>file-of-patterns</var></kbd> applies to patterns
listed in a file.

</ul>

<p><hr>
Node:Time criteria, Next:<a rel=next href="#Walking">Walking</a>, Previous:<a rel=previous href="#Exclusions">Exclusions</a>, Up:<a rel=up href="#Choosing">Choosing</a>
<p>

<h2><a name="Time%20criteria">Time based exclusions</a></h2>

<p>These options limit <code>tar</code> to only operating on files which have
been modified after the date specified.  A file is considered to have
changed if the contents have been modified, or if the owner,
permissions, and so forth have been changed.  (For more information on
how to specify a date, see <a href="#Date%20input%20formats">Date input formats</a>; remember that the
entire date argument must be quoted if it contains any spaces.)

<p>Gurus would say that <kbd>-after-date=<var>date</var></kbd> (<kbd>-newer=<var>date</var></kbd>, <kbd>-N <var>date</var></kbd>) tests both the <code>mtime</code>
(time the contents of the file were last modified) and the <code>ctime</code>
(time the file's status was last changed: owner, permissions, etc)
fields, while <kbd>-newer-mtime=<var>date</var></kbd> tests only <code>mtime</code> field.

<p>To be precise, <kbd>-after-date=<var>date</var></kbd> (<kbd>-newer=<var>date</var></kbd>, <kbd>-N <var>date</var></kbd>) checks <em>both</em> <code>mtime</code> and
<code>ctime</code> and processes the file if either one is more recent than
<var>date</var>, while <kbd>-newer-mtime=<var>date</var></kbd> only checks <code>mtime</code> and
disregards <code>ctime</code>.  Neither uses <code>atime</code> (the last time the
contents of the file were looked at).

<p>The MS-DOS/MS-Windows file systems record only one time stamp per file
(Windows 9X and NT file systems have all three time fields). 
On those file systems, <kbd>-after-date=<var>date</var></kbd> (<kbd>-newer=<var>date</var></kbd>, <kbd>-N <var>date</var></kbd>) and <kbd>-newer-mtime=<var>date</var></kbd>
will have the same effect.  MS-DOS stores file time with 2-second
granularity; you need to consider this when setting the value of
<var>date</var> for these two options.

<p>Date specifiers can have embedded spaces.  Because of this, you may need
to quote date arguments to keep the shell from parsing them as separate
arguments.

<blockquote>
<strong>Please note:</strong> <kbd>-after-date=<var>date</var></kbd> (<kbd>-newer=<var>date</var></kbd>, <kbd>-N <var>date</var></kbd>) and <kbd>-newer-mtime=<var>date</var></kbd>
should not be used for incremental backups.  Some files (such as those
in renamed directories) are not selected properly by these options. 
See <a href="#incremental%20listed-incremental">incremental listed-incremental</a>. 
</blockquote>

<p>You may use these options with any subcommand.  Note that these options
differ from the <kbd>-update</kbd> (<kbd>-u</kbd>) subcommand in that they allow you to
specify a particular date against which <code>tar</code> can compare when
deciding whether or not to archive the files.

<ul>
<li><a href="#after-date">after-date</a>:                   Operating only on new files

<li><a href="#newer-mtime">newer-mtime</a>:                  Operating only on altered files
</ul>

<p><hr>
Node:after-date, Next:<a rel=next href="#newer-mtime">newer-mtime</a>, Previous:<a rel=previous href="#Time%20criteria">Time criteria</a>, Up:<a rel=up href="#Time%20criteria">Time criteria</a>
<p>

<h3><a name="after-date">Operating only on new files</a></h3>

<p>The <kbd>-after-date=<var>date</var></kbd> (<kbd>-newer=<var>date</var></kbd>, <kbd>-N <var>date</var></kbd>) option causes <code>tar</code> to work only on files
whose modification or inode-changed times are newer than the <var>date</var>
given.  If you use this option when creating or appending to an archive,
the archive will only include new files.  If you use <kbd>-after-date=<var>date</var></kbd> (<kbd>-newer=<var>date</var></kbd>, <kbd>-N <var>date</var></kbd>)
when extracting an archive, <code>tar</code> will only extract files newer
than the <var>date</var> you specify.

<p>To select files newer than the modification time of a file that already
exists, you can use the {No Value For "reference"} option of GNU <code>date</code>,
available in GNU shell utilities 1.13 or later.  For example, you could say:

<pre>$ <kbd>tar -cf <var>archive.tar</var> --newer="`date -r <var>file</var>`" /home</kbd>
</pre>

<p>The <code>date</code> command in this command returns the timestamp of that
already existing file; this timestamp expands to become the reference date
which <kbd>-after-date=<var>date</var></kbd> (<kbd>-newer=<var>date</var></kbd>, <kbd>-N <var>date</var></kbd>) uses to determine which files to archive.

<p>See <a href="#Date%20input%20formats">Date input formats</a>, for a precise specification of all date formats which
are usable with this option.  Many date notations have spaces included,
you should sure that you use quotes around the option value, so these
spaces are not interpreted by the shell as argument separators.

<p><hr>
Node:newer-mtime, Previous:<a rel=previous href="#after-date">after-date</a>, Up:<a rel=up href="#Time%20criteria">Time criteria</a>
<p>

<h3><a name="newer-mtime">Operating only on altered files</a></h3>

<p>The <kbd>-newer-mtime=<var>date</var></kbd> option causes <code>tar</code> to work only on files
whose modification time is newer than the <var>date</var> given.  If you use
this option when creating or appending to an archive, the archive will
only include new files.  If you use <kbd>-newer-mtime=<var>date</var></kbd> when extracting
an archive, <code>tar</code> will only extract files newer than the <var>date</var>
you specify.

<p>If you only want <code>tar</code> to make the date comparison based on modification
of the actual contents of the file (rather than inode changes), then use
the <kbd>-newer-mtime=<var>date</var></kbd> option.  Option <kbd>-newer-mtime=<var>date</var></kbd> acts
like <kbd>-after-date=<var>date</var></kbd> (<kbd>-newer=<var>date</var></kbd>, <kbd>-N <var>date</var></kbd>), but only looks at modification times.

<p>The acceptable date notations are the same as those the <kbd>-after-date=<var>date</var></kbd> (<kbd>-newer=<var>date</var></kbd>, <kbd>-N <var>date</var></kbd>)
option accepts (see <a href="#Date%20input%20formats">Date input formats</a>).

<p><hr>
Node:Walking, Next:<a rel=next href="#Relative">Relative</a>, Previous:<a rel=previous href="#Time%20criteria">Time criteria</a>, Up:<a rel=up href="#Choosing">Choosing</a>
<p>

<h2><a name="Walking">Walking through directories</a></h2>

<ul>
<li><a href="#no-recursion">no-recursion</a>:                 Descending into directories

<li><a href="#one-file-system">one-file-system</a>:              Crossing filesystem boundaries
</ul>

<p><hr>
Node:no-recursion, Next:<a rel=next href="#one-file-system">one-file-system</a>, Previous:<a rel=previous href="#Walking">Walking</a>, Up:<a rel=up href="#Walking">Walking</a>
<p>

<h3><a name="no-recursion">Descending into directories</a></h3>

<p>Usually, <code>tar</code> will recursively explore all directories (either
those given on the command line or through the <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>)
option) for the various files they contain.  However, you may not always
want <code>tar</code> to act this way.

<p>The <kbd>-no-recursion</kbd> option inhibits <code>tar</code>'s recursive descent
into specified directories.  If you specify <kbd>-no-recursion</kbd>, you can
use the <code>find</code> utility for hunting through levels of directories to
construct a list of file names which you could then pass to <code>tar</code>. 
<code>find</code> allows you to be more selective when choosing which files to
archive; see <a href="#files-from">files-from</a> for more information on using <code>find</code> with
<code>tar</code>.

<p>The <kbd>-no-recursion</kbd> option prevents <code>tar</code> from recursively
descending directories.

<p>When you use <kbd>-no-recursion</kbd>, <code>tar</code> grabs directory entries
themselves, but does not descend into them recursively.  Many people use
<code>find</code> for locating files they want to back up, and since
<code>tar</code> <em>usually</em> recursively descends on directories, they have
to use the <kbd>!&nbsp;-d</kbd> option to <code>find</code>  as they usually do not want
all the files in a directory.  They then use the <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>)
option to archive the files located via <code>find</code>.

<p>The problem when restoring files archived in this manner is
that the directories themselves are not in the archive; so the
<kbd>-same-permissions</kbd> (<kbd>-preserve-permissions</kbd>, <kbd>-p</kbd>) option does not affect them--while users
might really like it to.  Specifying <kbd>-no-recursion</kbd> is a way to
tell <code>tar</code> to grab only the directory entries given to it, adding no
new files on its own.

<p><hr>
Node:one-file-system, Previous:<a rel=previous href="#no-recursion">no-recursion</a>, Up:<a rel=up href="#Walking">Walking</a>
<p>

<h3><a name="one-file-system">Crossing filesystem boundaries</a></h3>

<p>Normally <code>tar</code> will automatically cross file system boundaries in order
to archive files which are part of a directory tree.  You can change this
behavior by specifying <kbd>-one-file-system</kbd> (<kbd>-l</kbd>). 
This option only affects files that are archived because they are in a
directory that is being archived; <code>tar</code> will still archive files
explicitly named on the command line or through <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>),
regardless of where they reside.

<p>The <kbd>-one-file-system</kbd> (<kbd>-l</kbd>) option prevents <code>tar</code> from crossing
file system boundaries when archiving.  Use it in conjunction with any write
subcommand.

<p>The <kbd>-one-file-system</kbd> (<kbd>-l</kbd>) option causes <code>tar</code> to modify its
normal behavior in archiving the contents of directories.  If a file in
a directory is not on the same filesystem as the directory itself, then
<code>tar</code> will not archive that file.  If the file is a directory itself,
<code>tar</code> will not archive anything beneath it; in other words, <code>tar</code>
will not cross mount points.

<p>It is reported that using this option, the mount point <strong>is</strong>
archived, but nothing under it is.

<p>This option is useful for making full or incremental archival backups
of a single file system.  If this option is used in conjunction with
<kbd>-verbose</kbd> (<kbd>-v</kbd>), files that are excluded are mentioned by name on the
standard error.

<p><hr>
Node:Relative, Previous:<a rel=previous href="#Walking">Walking</a>, Up:<a rel=up href="#Choosing">Choosing</a>
<p>

<h2><a name="Relative">Relative notations for file names</a></h2>

<ul>
<li><a href="#directory">directory</a>:                    Changing the working directory

<li><a href="#absolute-names">absolute-names</a>:               Absolute file names
</ul>

<p><hr>
Node:directory, Next:<a rel=next href="#absolute-names">absolute-names</a>, Previous:<a rel=previous href="#Relative">Relative</a>, Up:<a rel=up href="#Relative">Relative</a>
<p>

<h3><a name="directory">Changing the working directory</a></h3>

<p>To change the working directory in the middle of a list of file names,
either on the command line or in a file specified using
<kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>), use <kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>).  This will change the
working directory to the directory <var>directory</var> after that point in
the list.

<p>The <kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>) option changes the working directory in the middle
of a command line.

<p>For example,

<pre>$ <kbd>tar -c -f jams.tar grape prune -C food cherry</kbd>
</pre>

<p>will place the files <code>grape</code> and <code>prune</code> from the current
directory into the archive <code>jams.tar</code>, followed by the file
<code>cherry</code> from the directory <code>food</code>.  This option is especially
useful when you have several widely separated files that you want to
store as if they were in the same directory.

<p>Note that the file <code>cherry</code> is recorded in the archive under the
precise name <code>cherry</code>, <em>not</em> <code>food/cherry</code>.  Thus, the
archive will contain three files that all appear to have come from the
same directory; if the archive is extracted with plain <kbd>tar
-extract</kbd>, all three files will be written in the current directory.

<p>Contrast this with the command

<pre>$ <kbd>tar -c -f jams.tar grape prune food/cherry</kbd>
</pre>

<p>which records the third file in the archive under the name
<code>food/cherry</code> so that, if the archive is extracted using
<kbd>tar -extract</kbd>, the third file will be written in a subdirectory
named <code>food</code>.

<p>You can use the <kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>) option to make the archive
independent of the original name of the directory holding the files. 
The following command places the files <code>/etc/passwd</code>,
<code>/etc/hosts</code>, and <code>/lib/libc.a</code> into the archive
<code>foo.tar</code>:

<pre>$ <kbd>tar -c -f foo.tar -C /etc passwd hosts -C /lib libc.a</kbd>
</pre>

<p>However, the names of the archive members will be exactly what they were
on the command line: <code>passwd</code>, <code>hosts</code>, and <code>libc.a</code>. 
They will not appear to be related by file name to the original
directories where those files were located.

<p>Note that <kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>) options are interpreted consecutively.  If
<kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>) specifies a relative file name, it is interpreted
relative to the then current directory, which might not be the same as
the original current working directory of <code>tar</code>, due to a previous
<kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>) option.

<p>When using <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) (see <a href="#files-from">files-from</a>), you can put <kbd>-C</kbd>
options in the file list, in which case the next line is interpreted as
a directory for the following entries.<a rel=footnote href="#fn-21"><sup>21</sup></a> This interpretation of <kbd>-C</kbd>
from within inclusion files is disabled when using the <kbd>-null</kbd> option.

<p><hr>
Node:absolute-names, Previous:<a rel=previous href="#directory">directory</a>, Up:<a rel=up href="#Relative">Relative</a>
<p>

<h3><a name="absolute-names">Absolute file names</a></h3>

<p>When <code>tar</code> extracts archive members from an archive, it strips any
leading slashes (<code>/</code>) from the member name.  This causes absolute member
names in the archive to be treated as relative file names.  This allows
you to have such members extracted wherever you want, instead of being
restricted to extracting the member in the exact directory named in the
archive.  For example, if the archive member has the name <code>/etc/passwd</code>,
<code>tar</code> will extract it as if the name were really <code>etc/passwd</code>. 
(On MS-DOS and MS-Windows, <code>tar</code> also strips the drive letter and
the colon that follows it, if the original file names include them, so
<code>d:/foo/bar</code> is archived as <code>foo/bar</code>.)

<p>Other <code>tar</code> programs do not do this.  As a result, if you create an
archive whose member names start with a slash, they will be difficult for
other people to use with other <code>tar</code> programs.  Therefore, <code>tar</code>
also strips leading slashes from member names when putting members into the
archive.  For example, if you ask <code>tar</code> to add the file <code>/bin/ls</code>
to an archive, it will do so, but the member name will be <code>bin/ls</code>.

<p>At either time, <code>tar</code> prints out a message about removing the <code>/</code>
from file names.  This message appears once per <code>tar</code> invocation. 
It is imperative that the user be warned about this; ignoring it can
cause very serious surprises later.  (On MS-DOS/MS-Windows, <code>tar</code>
also reports the removal of the drive specification.)  Some people,
nevertheless, do not want to see this message.  Wanting to play really
dangerously, one may of course redirect <code>tar</code> standard error to
the sink.  For example, under <code>sh</code>:

<pre>$ <kbd>tar cf archive.tar /home 2&gt; /dev/null</kbd>
</pre>

<p>Another solution, both nicer and simpler, would be to change to the <code>/</code>
directory first, and then avoid absolute notation.  For example:

<pre>$ <kbd>(cd / &amp;&amp; tar cf archive.tar home)</kbd>
$ <kbd>tar cfC archive.tar / home</kbd>
</pre>

<p>If you want to extract the files in an archive to the same absolute names
that they had when the archive was created, you should use a similar recipe at
extract time.  Following the example above:

<pre>$ <kbd>(cd / &amp;&amp; tar xf archive.tar)</kbd>
$ <kbd>tar xfC archive.tar /</kbd>
</pre>

<p>(On MS-DOS, include the drive specification in the <kbd>-C</kbd> option, or
change the current drive before the <kbd>cd</kbd> command.)

<p>If you use the <kbd>-absolute-names</kbd> (<kbd>-P</kbd>) option, <code>tar</code> will carry out neither
of these transformations, that is, it will not remove leading slashes when
adding archive members, and will not strip leading slashes from member
names when restoring an archive.  If you only invoked <code>tar</code> from the
root directory you would never need the <kbd>-absolute-names</kbd> (<kbd>-P</kbd>) option,
but using this option may be more convenient than switching to root.  So,
the two examples above could be respectively replaced by these two lines:

<pre>$ <kbd>tar cfP archive.tar /home</kbd>
$ <kbd>tar xfP archive.tar</kbd>
</pre>

<p>Using the <kbd>-absolute-names</kbd> (<kbd>-P</kbd>) option also suppress the warning message.

<p><hr>
Node:Formats, Next:<a rel=next href="#Media">Media</a>, Previous:<a rel=previous href="#Choosing">Choosing</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="Formats">Controlling the archive format</a></h1>

<ul>
<li><a href="#Portability">Portability</a>:                  Making <code>tar</code> archives more portable

<li><a href="#Forced%20fields">Forced fields</a>:                Options to preset file attributes

<li><a href="#Compression">Compression</a>:                  Using less space through compression

<li><a href="#Other%20formats">Other formats</a>:                Other non-<code>tar</code> formats
</ul>

<p><hr>
Node:Portability, Next:<a rel=next href="#Forced%20fields">Forced fields</a>, Previous:<a rel=previous href="#Formats">Formats</a>, Up:<a rel=up href="#Formats">Formats</a>
<p>

<h2><a name="Portability">Making <code>tar</code> archives more portable</a></h2>

<p>Creating a <code>tar</code> archive on a particular system that is to be
useful later on many other machines and with other versions of <code>tar</code>
is more challenging than you might think.  <code>tar</code> archive formats
have been evolving since the first versions of Unix.  Many such formats
are around, and they are not always compatible with each other.  This section
discusses a few problems, and gives some advice about making <code>tar</code>
archives more portable.

<p>One golden rule is simplicity.  For example, limit your <code>tar</code>
archives to contain only regular files and directories, avoiding
other, special kinds of files.  Do not attempt to save sparse files or
contiguous files as such.  Let's discuss a few more problems, in turn.

<ul>
<li><a href="#Portable%20names">Portable names</a>:               Portable names

<li><a href="#dereference">dereference</a>:                  Symbolic links

<li><a href="#old-archive">old-archive</a>:                  Old V7 archives

<li><a href="#posix">posix</a>:                        <code>tar</code> and POSIX <code>tar</code>

<li><a href="#Checksumming">Checksumming</a>:                 Checksumming problems
</ul>

<p><hr>
Node:Portable names, Next:<a rel=next href="#dereference">dereference</a>, Previous:<a rel=previous href="#Portability">Portability</a>, Up:<a rel=up href="#Portability">Portability</a>
<p>

<h3><a name="Portable%20names">Portable names</a></h3>

<p>Use <em>straight</em> file and directory names, made up of printable
ASCII characters, avoiding colons, slashes, backslashes, spaces, and
other <em>dangerous</em> characters.  Avoid deep directory nesting. 
Accounting for oldish System V machines, limit your file and directory
names to 14 characters or less.

<p>If you intend for your <code>tar</code> archives to be read under MS-DOS,
you should not rely on case-sensitivity for file names, and you might use
the GNU <code>doschk</code> program for helping you further diagnosing illegal
MS-DOS names, which are even more limited than System V's.  <code>tar</code>
compiled for MS-DOS <em>does</em> try to cope with filenames which are
illegal on MS-DOS file systems (), but the
best portability strategy is to avoid such problems in the first place. 
Even newer versions of MS-Windows, such as Windows 9X and Windows NT, still
have some restrictions on characters which can appear in a file name. 
Typically, characters which are special to the shell, like <code>?</code>,
<code>*</code>, and <code>|</code>, are not allowed and should be avoided.

<p><hr>
Node:dereference, Next:<a rel=next href="#old-archive">old-archive</a>, Previous:<a rel=previous href="#Portable%20names">Portable names</a>, Up:<a rel=up href="#Portability">Portability</a>
<p>

<h3><a name="dereference">Symbolic links</a></h3>

<p>Normally, when <code>tar</code> archives a symbolic link, it writes a block to the
archive naming the target of the link.  In that way, the <code>tar</code> archive
is a faithful record of the filesystem contents.  The <kbd>-dereference</kbd> (<kbd>-h</kbd>)
option is used with <kbd>-create</kbd> (<kbd>-c</kbd>), and causes <code>tar</code> to archive the
files symbolic links point to, instead of the links themselves.  So, when
this option is used, when <code>tar</code> encounters a symbolic link, it will
archive the linked-to file, instead of simply recording the presence of
a symbolic link.

<p>When using <kbd>-dereference</kbd> (<kbd>-h</kbd>), the real name under which the file is
stored in the file system is not recorded in the archive.  To record both
the symbolic link name and the file name in the system, archive the file
under both names.  If all links were recorded automatically by <code>tar</code>,
an extracted file might be linked to a file name that no longer exists in
the file system.

<p>If a linked-to file is encountered again by <code>tar</code> while creating
the same archive, an entire second copy of it will be stored.  (This
<em>might</em> be considered a bug.)

<p>So, for portable archives, do not archive symbolic links as such, and
use <kbd>-dereference</kbd> (<kbd>-h</kbd>): many systems do not support symbolic links, and
moreover, your distribution might be unusable if it contains unresolved
symbolic links.

<p><hr>
Node:old-archive, Next:<a rel=next href="#posix">posix</a>, Previous:<a rel=previous href="#dereference">dereference</a>, Up:<a rel=up href="#Portability">Portability</a>
<p>

<h3><a name="old-archive">Old V7 archives</a></h3>

<p>Certain old versions of <code>tar</code> cannot handle additional information
recorded by newer <code>tar</code> programs.  To create an archive in V7
format (not ANSI), which can be read by these old versions, specify
the <kbd>-old-archive</kbd> (<kbd>-o</kbd>) option in conjunction with the <kbd>-create</kbd> (<kbd>-c</kbd>). 
When you specify it, <code>tar</code> leaves out information about directories,
pipes, FIFOs, contiguous files, and device files, and specifies file
ownership by group and user IDs instead of group and user names.

<p>When updating an archive, do not use <kbd>-old-archive</kbd> (<kbd>-o</kbd>)
unless the archive was created using this option.

<p>In most cases, a <em>new</em> format archive can be read by an <em>old</em>
<code>tar</code> program without serious trouble, so this option should
seldom be needed.  On the other hand, most modern <code>tar</code>s are
able to read old format archives, so it might be safer for you to
always use <kbd>-old-archive</kbd> (<kbd>-o</kbd>) for your distributions.

<p><hr>
Node:posix, Next:<a rel=next href="#Checksumming">Checksumming</a>, Previous:<a rel=previous href="#old-archive">old-archive</a>, Up:<a rel=up href="#Portability">Portability</a>
<p>

<h3><a name="posix"><code>tar</code> and POSIX <code>tar</code></a></h3>

<p><code>tar</code> was based on an early draft of the POSIX 1003.1
<code>ustar</code> standard.  Extensions to this <code>tar</code>, such as the
support for file names longer than 100 characters, use portions of the
<code>tar</code> header record which were specified in that POSIX draft as
unused.  Subsequent changes in POSIX have allocated the same parts of
the header record for other purposes.  As a result, <code>tar</code> is
incompatible with the current POSIX spec, and with <code>tar</code> programs
that follow it.

<p>We plan to reimplement these extensions in a new way which is
upward compatible with the latest POSIX <code>tar</code> format, but we
don't know when this will be done.

<p>In the mean time, there is simply no way of telling what might happen if you
read a <code>tar</code> archive that uses the extensions using
some other <code>tar</code> program.  So if you want to read the archive
with another <code>tar</code> program, be sure to write it using the
<kbd>-old-archive</kbd> (<kbd>-o</kbd>) option (<kbd>-o</kbd>).

<p>Traditionally, old <code>tar</code>s have a limit of 100 characters. 
<code>tar</code> attempted two different approaches to overcoming this limit,
using and extending a format specified by a draft of P1003.1. 
The first way was not that successful, and involved <code>@MaNgLeD@</code>
file names, or such; while a second approach used <code>././@LongLink</code>
and other tricks, yielding better success.  In theory, <code>tar</code>
should be able to handle file names of practically unlimited length. 
So, if <code>tar</code> fails to dump and retrieve files having more
than 100 characters, then there is a bug in <code>tar</code>.

<p>But, for strict conformity to POSIX, the limit was still 100 characters. 
For various other purposes, <code>tar</code> used areas left unassigned
in the POSIX draft.  POSIX later revised the P1003.1 <code>ustar</code> format by
assigning previously unused header fields in such a way that the upper
limit for file name length was raised to 256 characters.  However, the
actual POSIX limit oscillates between 100 and 256, depending on the
precise location of slashes in full file name (this is rather ugly). 
Since <code>tar</code> uses the same fields for quite other purposes,
it became incompatible with the latest POSIX standards.

<p>For longer or non-fitting file names, we plan to use yet another set
of extensions, but this time, complying with the provisions POSIX
offers for extending the format, rather than conflicting with it. 
Whenever an archive uses old <code>tar</code> extension format or POSIX
extensions, whether for very long file names or for other special cases,
this archive becomes non-portable to other <code>tar</code> implementations. 
In fact, anything can happen.  The most forgiving <code>tar</code>s will
merely unpack the file using a wrong name, and maybe create another
file named something like <code>@LongName</code>, with the true file name
in it.  <code>tar</code>s not protecting themselves may segment violate!

<p>Compatibility concerns make all of these things more difficult, as we
will have to support <em>all</em> these things together, for a while. 
<code>tar</code> should be able to produce and read true POSIX format
files, while being able to detect old <code>tar</code> formats, including
old V7 format, and process them conveniently.  It will take years
before this whole area stabilizes <small>...</small>

<p>There are plans to raise this 100 limit to 256, and yet produce POSIX
conformant archives.  Past 256, we do not know yet if <code>tar</code>
will go non-POSIX again, or merely refuse to archive the file.

<p>There are plans for <code>tar</code> to support the latest POSIX format more fully,
while being able to read old V7 format, old GNU (semi-POSIX plus extensions),
and full POSIX.  One may ask if there is part of the POSIX format that we
still cannot support.  This simple question has a complex answer.  Maybe,
on closer inspection, some strong limitations will pop up, but up to now,
nothing looks too difficult (but see below).  We only have these few
pages of POSIX telling about `Extended tar format' (P1003.1-1990-section
10.1.1), and there are references to other parts of the standard we do
not have, which should normally enforce limitations on stored file names
(we suspect things like fixing what <kbd>/</kbd> and <kbd>&lt;NUL&gt;</kbd> mean). 
There are also some points which the standard does not make clear. 
Existing practice will then drive what we should do.

<p>POSIX mandates that when a file name cannot fit within 100 to
256 characters (the variance comes from the fact a <kbd>/</kbd> is
ideally needed as the 156th character) or a link name cannot
fit within 100 characters, a warning should be issued and the file
<em>not</em> be stored.  Unless the <kbd>-posix</kbd> option is given
(or <code>POSIXLY_CORRECT</code> is set), we believe that <code>tar</code>
should disobey this specification, and automatically switch to using
extensions to overcome file name or link name length limitations.

<p>There is a problem, however, which we have not intimately studied yet. 
Given a truly POSIX archive with names having more than 100 characters,
we guess that <code>tar</code> up to 1.11.8 will process it as if it were an
old V7 archive, and be fooled by some fields which are coded differently. 
So, the question is to decide if the next generation of <code>tar</code>
should produce POSIX format by default, whenever possible, producing
archives that older versions of <code>tar</code> might not be able to read
correctly.  We fear that we will have to suffer such a choice one of these
days, if we want <code>tar</code> to go closer to POSIX.  We might choose to
do that right away. 
Another possibility is to produce the current <code>tar</code> format
by default for a few years, but have <code>tar</code> versions from some
1.<var>POSIX</var> and up able to recognize all three formats, and let older
<code>tar</code> fade out slowly.  Then, we could switch to producing POSIX
format by default, with not much harm to those still having (very old at
that time) <code>tar</code> versions prior to 1.<var>POSIX</var>.

<p>POSIX format cannot represent very long names, volume headers,
splitting of files in multi-volumes, sparse files, and incremental
dumps; these would be all disallowed if <kbd>-posix</kbd> is given or
<code>POSIXLY_CORRECT</code> is set.  Otherwise, if <code>tar</code> is given long
names, or <kbd>-[VMSgG]</kbd>, then it should automatically go non-POSIX. 
We think this is easily granted without much discussion.

<p>Another point is that only <code>mtime</code> is stored in POSIX
archives, while <code>tar</code> currently also stores <code>atime</code>
and <code>ctime</code>.  If we want <code>tar</code> to go closer to POSIX,
my choice would be to drop <code>atime</code> and <code>ctime</code> support on
average.  On the other hand, we perceive that full dumps or incremental
dumps need <code>atime</code> and <code>ctime</code> support, so for those special
applications, POSIX has to be avoided altogether.

<p>A few users requested that <kbd>-sparse</kbd> (<kbd>-S</kbd>) be always active by
default.  We think that before replying to them, we have to decide
if we want <code>tar</code> to go closer to POSIX on average, while
producing files.  My choice would be to go closer to POSIX in the
long run.  Besides possible double reading, we do not see any point
in not trying to save files as sparse when creating archives which
are neither POSIX nor old-V7, so the actual <kbd>-sparse</kbd> (<kbd>-S</kbd>) would
become selected by default when producing such archives, whatever
the reason is.  So, <kbd>-sparse</kbd> (<kbd>-S</kbd>) alone might be redefined to force
extended format archives, and recover its previous meaning from this fact.

<p>Extended format as it exists now can easily fool other POSIX <code>tar</code>s,
as it uses fields which POSIX considers to be part of the file name
prefix.  We wonder if it would not be a good idea, in the long run,
to try changing extended format so that any added field (like <code>ctime</code>,
<code>atime</code>, file offset in subsequent volumes, or sparse file
descriptions) would be wholly and always pushed into an extension block,
instead of using space in the POSIX header block.  We could manage
to do that portably between future <code>tar</code>s.  So other POSIX
<code>tar</code>s might at least be able to provide roughly correct listings
for the archives produced by <code>tar</code>, if not to process
them otherwise.

<p>Using these projected extensions might induce older <code>tar</code>s to fail. 
We would use the same approach as for POSIX.  We'll put out a <code>tar</code>
capable of reading POSIXier, yet extended archives, but will not produce
this format by default, when not in POSIX mode.  In a few years, when newer
<code>tar</code>s will have flooded out <code>tar</code> 1.11.X and earlier, we
could switch to producing POSIXier extended archives, with no real harm
to users, as almost all existing <code>tar</code>s will be ready to read
POSIXier format.  In fact, we'll do both changes at the same time, in a
few years, and just prepare <code>tar</code> for both changes, without effecting
them, from 1.<var>POSIX</var>.  (Both changes: 1--using POSIX conventions for
getting over 100 characters; 2--avoiding mangling POSIX headers for
extensions, using only POSIX mandated extension techniques).

<p>So, a future <code>tar</code> will have a <kbd>-posix</kbd>
flag forcing the usage of truly POSIX headers, and so, producing
archives that previous <code>tar</code>s will not be able to read. 
So, <em>once</em> pretest announces that feature, it would be
particularly useful for users to test how exchangeable archives will be
between <code>tar</code> with <kbd>-posix</kbd> and other POSIX <code>tar</code>s.

<p>In a few years, when <code>tar</code> will produce POSIX headers by
default, <kbd>-posix</kbd> will have a strong meaning and will disallow
extensions.  But in the meantime, for a long while, <kbd>-posix</kbd>
in <code>tar</code> will not disallow extensions like <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>),
<kbd>-multi-volume</kbd> (<kbd>-M</kbd>), <kbd>-sparse</kbd> (<kbd>-S</kbd>), or very long file or link names. 
However, <kbd>-posix</kbd> with extensions will use POSIX
headers with reserved-for-users extensions to headers, and we will be
curious to know how well or badly POSIX <code>tar</code>s will react to these.

<p><code>tar</code> prior to 1.<var>POSIX</var>, and after 1.<var>POSIX</var> without
<kbd>-posix</kbd>, generates and checks <code>ustar&nbsp;&nbsp;</code>, with two
suffixed spaces.  This is sufficient for older <code>tar</code> not to
recognize POSIX archives, and consequently, wrongly decide those archives
are in old V7 format.  It is a useful bug for me, because <code>tar</code>
has other POSIX incompatibilities, and we need to segregate <code>tar</code>
semi-POSIX archives from truly POSIX archives, for <code>tar</code> should
be somewhat compatible with itself, while migrating closer to latest
POSIX standards.  So, we'll be very careful about how and when we will do
the correction.

<p><hr>
Node:Checksumming, Previous:<a rel=previous href="#posix">posix</a>, Up:<a rel=up href="#Portability">Portability</a>
<p>

<h3><a name="Checksumming">Checksumming problems</a></h3>

<p>SunOS and HP-UX <code>tar</code> fail to accept archives created using
<code>tar</code> and containing non-ASCII file names, that is, file names
having characters with the eighth bit set, because they use signed
checksums, while <code>tar</code> uses unsigned checksums when creating
archives, as per POSIX standards.  On reading, <code>tar</code> computes
both checksums and accepts either.  It is somewhat worrying that a lot of
people may go around doing backup of their files using faulty (or at
least non-standard) software, not learning about it until it's time
to restore their missing files with an incompatible file extractor,
or vice versa.

<p><code>tar</code> computes checksums both ways, and accepts either on read,
so <code>tar</code> can read Sun tapes even with their wrong checksums. 
<code>tar</code> produces the standard checksum, however, raising
incompatibilities with Sun.  That is to say, <code>tar</code> has not
been modified to <em>produce</em> incorrect archives to be read by buggy
<code>tar</code>s.  We've been told that more recent Sun <code>tar</code> now
reads standard archives, so maybe Sun did a similar patch, after all?

<p>The story seems to be that when Sun first imported <code>tar</code>
sources on their system, they recompiled it without realizing that
the checksums were computed differently, because of a change in
the default signing of <code>char</code>s in their compiler.  So they
started computing checksums wrongly.  When they later realized their
mistake, they merely decided to stay compatible with it, and with
themselves afterwards.  Presumably, but we do not really know, HP-UX
has chosen that their <code>tar</code> archives to be compatible with Sun's. 
The current standards do not favor Sun <code>tar</code> format.  In any
case, it now falls on the shoulders of SunOS and HP-UX users to get
a <code>tar</code> able to read the good archives they receive.

<p><hr>
Node:Forced fields, Next:<a rel=next href="#Compression">Compression</a>, Previous:<a rel=previous href="#Portability">Portability</a>, Up:<a rel=up href="#Formats">Formats</a>
<p>

<h2><a name="Forced%20fields">Options to preset file attributes</a></h2>

<ul>
<li><a href="#mode">mode</a>:                         Presetting permissions

<li><a href="#owner">owner</a>:                        Forcing a given owner

<li><a href="#group">group</a>:                        Forcing a given group

<li><a href="#numeric-owner">numeric-owner</a>:                Using numeric owner and group
</ul>

<p><hr>
Node:mode, Next:<a rel=next href="#owner">owner</a>, Previous:<a rel=previous href="#Forced%20fields">Forced fields</a>, Up:<a rel=up href="#Forced%20fields">Forced fields</a>
<p>

<h3><a name="mode">Presetting permissions</a></h3>

<p>When adding files to an archive, <code>tar</code> will use <var>permissions</var>
for the archive members, rather than the permissions from the files. 
The program <code>chmod</code> and this <code>tar</code> option share the same syntax
for what <var>permissions</var> might be.  See <a href="filetutils.html#Permissions">File permissions</a>.  This reference also
has useful information for those not especially familiar with the Unix
permission system.

<p>Of course, <var>permissions</var> might be plainly specified as an octal number. 
However, using generic symbolic modifications to mode bits allows
more flexibility.  For example, the value <code>a+rw</code> adds read and write
permissions for everybody, while retaining executable bits on directories
or on any other file already marked as executable.

<p><hr>
Node:owner, Next:<a rel=next href="#group">group</a>, Previous:<a rel=previous href="#mode">mode</a>, Up:<a rel=up href="#Forced%20fields">Forced fields</a>
<p>

<h3><a name="owner">Forcing a given owner</a></h3>

<p>The <kbd>-owner=<var>user</var></kbd> option specifies that <code>tar</code> should use <var>user</var> as
the owner of members when creating archives, instead of the user associated
with the source file.  <var>user</var> is first decoded as a user symbolic name,
but if this interpretation fails, it has to be a decimal numeric user ID.

<p>There is no value indicating a missing number, and <code>0</code> usually means
<code>root</code>.  Some people like to force <code>0</code> as the value to offer in
their distributions for the owner of files, because the <code>root</code> user is
anonymous anyway, so that might as well be the owner of anonymous archives.

<p><code>tar</code> on MS-DOS/MS-Windows allows <var>user</var> to be <em>any</em>
string.  These systems don't support file ownership, so <code>tar</code> allows
them to give away files to anybody.  If <var>user</var> includes only digits,
it is treated as a numeric UID; otherwise, it is treated as a user name.

<p><hr>
Node:group, Next:<a rel=next href="#numeric-owner">numeric-owner</a>, Previous:<a rel=previous href="#owner">owner</a>, Up:<a rel=up href="#Forced%20fields">Forced fields</a>
<p>

<h3><a name="group">Forcing a given group</a></h3>

<p>Given the <kbd>-group=<var>group</var></kbd> option, files added to the <code>tar</code>
archive will have a group ID of <var>group</var>, rather than the group from
the source file.  <var>group</var> is first decoded as a group symbolic name,
but if this interpretation fails, it has to be a decimal numeric group ID. 
<code>tar</code> on MS-DOS/MS-Windows allows <var>group</var> to be <em>any</em> string. 
These systems don't support group IDs, so <code>tar</code> allows them to
give away files to anybody.  If <var>group</var> consists only of digits,
it is treated as a numeric GID; otherwise it is treated as a group name.

<p><hr>
Node:numeric-owner, Previous:<a rel=previous href="#group">group</a>, Up:<a rel=up href="#Forced%20fields">Forced fields</a>
<p>

<h3><a name="numeric-owner">Using numeric owner and group</a></h3>

<p>The <kbd>-numeric-owner</kbd> option allows (ANSI) archives to be written
without user/group name information, or allows such information to be ignored
when extracting.  It effectively disables the generation and/or use of
user/group name information.  This option forces extraction using the
numeric IDs from the archive, ignoring the names.

<p>This is useful in certain circumstances, when restoring a backup from
an emergency floppy with different passwd/group files for example. 
It is otherwise impossible to extract files with the right ownerships
if the password file in use during the extraction does not match the
one belonging to the filesystem(s) being extracted.  This occurs,
for example, if you are restoring your files after a major crash and
had booted from an emergency floppy with no password file or put your
disk into another machine to do the restore.

<p>The numeric IDs are <em>always</em> saved into <code>tar</code> archives. 
The identifying names are added at create time when provided by the
system, unless <kbd>-old-archive</kbd> (<kbd>-o</kbd>) is used.  Numeric IDs could be
used when moving archives between a collection of machines using
a centralized management for attribution of numeric IDs to users
and groups.  This is often done via the NIS capabilities.

<p>When making a <code>tar</code> file for distribution to other sites, it
is sometimes cleaner to use a single owner for all files in the
distribution, and nicer to specify the write permission bits of the
members as stored in the archive independently of their actual value on
the file system.  The way to prepare a clean distribution is usually
to have some makefile rule creating a directory, copying all needed
files in that directory, then setting ownership and permissions as
wanted (there are a lot of possible schemes), and only then making a
<code>tar</code> archive out of this directory, before cleaning everything
out.  Of course, we could add a lot of options to <code>tar</code> for
fine-tuning permissions and ownership.  This is not the best approach,
we think.  <code>tar</code> is already crowded with options, and
the approach just explained gives you a great deal of control already.

<p><hr>
Node:Compression, Next:<a rel=next href="#Other%20formats">Other formats</a>, Previous:<a rel=previous href="#Forced%20fields">Forced fields</a>, Up:<a rel=up href="#Formats">Formats</a>
<p>

<h2><a name="Compression">Using less space through compression</a></h2>

<p><code>tar</code> has options built in to let you compress and uncompress archives
or individual members on the command line, at the same time that you create
or extract them.  Compressing an archive causes it to take up less space
in the system, but also might introduce a few difficulties.

<p>You can compress your archives using several different methods and programs. 
When compressing the whole archive, you can also create the archive without
using one of those options and pipe (<code>|</code>) the archive through a
compression program such as <code>gzip</code>.  Likewise, instead of using
options for compressing individual members, one might first have the
files compressed right on disk, before the archive is later made without
using related options; the serious drawback is that files are left altered
(compressed) by this two step process, which users do not want in general.

<p>There are <code>tar</code> limitations with compressed archives.  You cannot
modify whole compressed archives (with <kbd>-append</kbd> (<kbd>-r</kbd>), <kbd>-update</kbd> (<kbd>-u</kbd>)
or <kbd>-delete</kbd>, for example).  You may also not use them in conjunction
with <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) related options.

<ul>
<li><a href="#Archive%20compression">Archive compression</a>:          Compressing the whole archive

<li><a href="#Member%20compression">Member compression</a>:           Compressing individual members
</ul>

<p><hr>
Node:Archive compression, Next:<a rel=next href="#Member%20compression">Member compression</a>, Previous:<a rel=previous href="#Compression">Compression</a>, Up:<a rel=up href="#Compression">Compression</a>
<p>

<h3><a name="Archive%20compression">Compressing the whole archive</a></h3>

<p>The <kbd>-gzip</kbd> (<kbd>-z</kbd>), <kbd>-compress</kbd> (<kbd>-Z</kbd>) and <kbd>-use-compress-program=<var>program</var></kbd>
options allow you to compress or uncompress a <code>tar</code> archive at the
same time as you create or extract the archive.  These options are useful
in saving time over networks, or saving space in pipes, and when storage
space is at a premium.

<p><kbd>-gzip</kbd> (<kbd>-z</kbd>) runs the <code>gzip</code> utility; <kbd>-compress</kbd> (<kbd>-Z</kbd>) runs
<code>compress</code>; and <kbd>-use-compress-program=<var>program</var></kbd> allows you to choose
a compression program that you prefer.  If the selected compression utility
is not available, <code>tar</code> will report an error.

<p>When any of the above options is specified, <code>tar</code> will compress (when
writing an archive), or uncompress (when reading an archive).  These options
are used in conjunction with the <kbd>-create</kbd> (<kbd>-c</kbd>), <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>),
<kbd>-list</kbd> (<kbd>-t</kbd>), and <kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>) subcommands.  However, these
options will not work in conjunction with the <kbd>-append</kbd> (<kbd>-r</kbd>),
<kbd>-update</kbd> (<kbd>-u</kbd>), <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>), and <kbd>-delete</kbd> subcommands. 
See <a href="#Subcommands">Subcommands</a>, for more information on all these.

<p>In general, compression algorithms work by substituting a string of
characters for some longer string of characters in the original file. 
The compression program keeps track of which strings in the compressed file
will substitute for individual longer bits of the file.  If you modify
a compressed file, the compression program will hopelessly lose track of
the data that was originally mapped to the compressed form of the data,
and the file will be corrupted and useless after the modification point.

<p>Similarly, you should not compress a file that will be used as a backup on
a tape.  If your backup archive is compressed on a tape and even a small
portion of the tape is damaged in some way, you will be unable to recover
the contents of the archive following the damage, due to the way compression
algorithms work (described above).  If a tape containing an uncompressed
backup archive gets damaged, you can probably still recover the data from the
rest of the tape; there is no corrupted matching algorithm to work around.

<p>For the <code>tar</code> and <code>gzip</code> tandem, as in the command <kbd>tar
tfz archive.tar.gz</kbd>, you need to decompress the full archive to see
its contents.  However, this may be done without needing disk space, by using
pipes internally.  (<code>tar</code> on MS-DOS and MS-Windows also supports this
on-the-fly compression with <code>gzip</code>, but since pipes are simulated with
disk files on MS-DOS, you <em>do</em> need disk space to store the uncompressed
copy while <code>tar</code> runs.  In particular, make sure the disk with the
directory which is the value of the environment variable <code>TMPDIR</code>
has enough free space.  Many DOS users tend to point it to a RAM disk.)

<p>You can use archive compression options on physical devices (tape drives
and so forth) and remote files as well as on normal files; data to or from such
devices or remote files is reblocked by a forked copy of the <code>tar</code>
program to enforce the specified (or default) record size.  It is also
useful to be able to call the compression option from within <code>tar</code>,
instead of using external pipes, because compression utilities by themselves
cannot access remote tape drives.

<p>It has been reported that if one writes compressed data (through the
<kbd>-gzip</kbd> (<kbd>-z</kbd>) or <kbd>-compress</kbd> (<kbd>-Z</kbd>) options) to a DLT and tries to use
the DLT compression mode, the data will actually get bigger and one will
end up with less space on the tape.

<p>Why does <code>tar</code> refuse to compress archives with <kbd>-multi-volume</kbd> (<kbd>-M</kbd>)? 
Here is a sort of explanation.  Each tape of a multi-volume set should have
a volume header entry at its beginning.  When compressing, another process
(like <code>gzip</code>, say) takes care of the compression.  <code>gzip</code> is not
able to detect the end of tape and inform <code>tar</code> of what is going on,
so <code>tar</code> would produce the new volume header.  Even then, <code>tar</code>
would not be able to withdraw already produced bytes up to the exact
point where the tape would be full after compression (further, <code>gzip</code>
itself produces write-ahead bytes in its own buffers).  On the other hand,
<code>tar</code> often forks itself <em>after</em> gzip to reprocess its output,
so <code>gzip</code> is sort of transparently sandwiched between two copies
of <code>tar</code>.  Maybe some later <code>tar</code> version will execute the
multi-volume spanning code right in the post-processing <code>tar</code>?

<p>On the other hand, I wonder if compressed multi-volumes are such a good idea. 
If one has a huge archive spanned on many volumes, one looses all tapes
following the first having an error, and all hope with them <small>...</small>

<ul>
<li><a href="#gzip">gzip</a>:                         Using <code>gzip</code> compression

<li><a href="#compress">compress</a>:                     Using <code>compress</code> compression

<li><a href="#use-compress-program">use-compress-program</a>:         Using other compression programs
</ul>

<p><hr>
Node:gzip, Next:<a rel=next href="#compress">compress</a>, Previous:<a rel=previous href="#Archive%20compression">Archive compression</a>, Up:<a rel=up href="#Archive%20compression">Archive compression</a>
<p>

<h4><a name="gzip">Using <code>gzip</code> compression</a></h4>

<p>You can have archives compressed by using the <kbd>-gzip</kbd> (<kbd>-z</kbd>) option. 
This will arrange for <code>tar</code> to use the <code>gzip</code> program to be used
to compress or uncompress the whole archive when writing or reading it.

<p>To perform compression and uncompression on the archive, <code>tar</code> runs the
<code>gzip</code> utility.  <code>tar</code> uses the default compression parameters;
if you need to override them, avoid the <kbd>-gzip</kbd> (<kbd>-z</kbd>) option and run
the <code>gzip</code> utility explicitly.  (Or set the <code>GZIP</code> environment
variable.)

<p>The following commands, for creating a compressed archive, are equivalent:

<pre>$ <kbd>tar cfz archive.tar.gz subdir</kbd>
$ <kbd>tar cf - subdir | gzip &gt; archive.tar.gz</kbd>
</pre>

<p>They both save all of <code>subdir</code> into a <code>gzip</code>-ed archive.  Later you
can do either of:

<pre>$ <kbd>tar xfz archive.tar.gz</kbd>
$ <kbd>gunzip &lt; archive.tar.gz | tar xf -</kbd>
</pre>

<p>to explode and unpack.

<p>Although it is possible for <code>tar</code> and <code>gzip</code> to be done with a
single call, it is not precisely correct to say that <code>tar</code> is to work in concert
with <code>gzip</code> in a way similar to <code>zip</code>, say.  See <a href="#zip">zip</a>, for
more information.

<p><hr>
Node:compress, Next:<a rel=next href="#use-compress-program">use-compress-program</a>, Previous:<a rel=previous href="#gzip">gzip</a>, Up:<a rel=up href="#Archive%20compression">Archive compression</a>
<p>

<h4><a name="compress">Using <code>compress</code> compression</a></h4>

<blockquote>
<strong>Please note:</strong> The algorithm used by the <code>compress</code> program
is covered by a patent.  You could be sued for patent infringment merely
for running <code>compress</code>.  Even if the current patent holder apparently
tolerates such infringements, the safest attitude for everybody is to just
avoid becoming dependent on this program.  So, we recommend that you stop
using it. 
</blockquote>

<p>The <kbd>-compress</kbd> (<kbd>-Z</kbd>) option gets the archive to be filtered through
the <code>compress</code> program.  Otherwise, it pretty much behaves like
<kbd>-gzip</kbd> (<kbd>-z</kbd>).  See <a href="#gzip">gzip</a>.

<p>The <code>compress</code> option is older than <code>gzip</code>, and is now
obsolescent.  However, there is still a lot of older <code>tar</code> files
which have been compressed by <code>compress</code> in their time, and because
of that, it is still useful to offer an option in <code>tar</code> to read
them easily.

<p><hr>
Node:use-compress-program, Previous:<a rel=previous href="#compress">compress</a>, Up:<a rel=up href="#Archive%20compression">Archive compression</a>
<p>

<h4><a name="use-compress-program">Using other compression programs</a></h4>

<p>The <kbd>-use-compress-program=<var>program</var></kbd> option asks for the archive to be filtered
through <var>program</var>.  For example, option <kbd>-gzip</kbd> (<kbd>-z</kbd>) is pretty
much like writing <kbd>-use=gzip</kbd>, and option <kbd>-compress</kbd> (<kbd>-Z</kbd>)
is like writing <kbd>-use=compress</kbd>.  With this option, you might use
any program of your choice, for doing either compression, encryption, or
cyclic redundancy check processing, say, provided that the said program
acts as a filter (that is, it reads its standard input and produces
results on its standard output) and that it accepts a <code>-d</code> option. 
This option is used by <code>tar</code> when calling <var>program</var> in contexts
where decompression would normally be done (as when listing or extracting
the archive); it is not used in contexts where compression would normally
be done (as when creating the archive).

<p>To combine many features at once, like compression and redundancy checking,
for example, one can provide a single shell script for <var>program</var>. 
When the <code>-d</code> option is not given to the script, it compresses its
standard input, and pipes the result into a program computing and adding
redundancy at regular intervals.<a rel=footnote href="#fn-22"><sup>22</sup></a>
If the <code>-d</code> option is given, the script does the reverse operation
(in reverse order as well), that is, it checks its standard input for
redundancy and possibly recovers lost data while removing the redundancy
information, piping the result into the appropriate decompression program.

<p><hr>
Node:Member compression, Previous:<a rel=previous href="#Archive%20compression">Archive compression</a>, Up:<a rel=up href="#Compression">Compression</a>
<p>

<h3><a name="Member%20compression">Compressing individual members</a></h3>

<p>There are pending suggestions for having a per-volume or per-file compression
in <code>tar</code>, and these suggestions will be addressed.  This will allow
for viewing the contents without decompression, and for resynchronizing
decompression at every volume or file, in case of corrupted archives. 
Doing so, we might sacrifice maximum compression to some extent, but in case
of partial tape loss, recovery might become possible, which would be a great
advantage.

<p>In the meantime, the only compressionlike technique available for
individual archive members is related to sparse file processing, which
only takes care of big strings of zero bytes in certain contexts, thus making
compression very slight in the average case.

<ul>
<li><a href="#sparse">sparse</a>:                       Archiving sparse files
</ul>

<p><hr>
Node:sparse, Previous:<a rel=previous href="#Member%20compression">Member compression</a>, Up:<a rel=up href="#Member%20compression">Member compression</a>
<p>

<h4><a name="sparse">Archiving sparse files</a></h4>

<p>Files in the filesystem occasionally have "holes".  A hole in a file
is a section of the file's contents which was never written.  The
contents of a hole read as all zeros.  On many operating systems,
actual disk storage is not allocated for holes, but they are counted
in the length of the file.  If you archive such a file, <code>tar</code>
could create an archive longer than the original.  To have <code>tar</code>
attempt to recognize the holes in a file, use <kbd>-sparse</kbd> (<kbd>-S</kbd>).  When
you use the <kbd>-sparse</kbd> (<kbd>-S</kbd>) option, then, for any file using less
disk space than would be expected from its length, <code>tar</code> searches
the file for consecutive stretches of zeros.  It then records in the
archive for the file where the consecutive stretches of zeros are, and
only archives the "real contents" of the file.  On extraction (using
<kbd>-sparse</kbd> (<kbd>-S</kbd>) is not needed on extraction) any such files have
holes created wherever the continuous stretches of zeros were found. 
Thus, if you use <kbd>-sparse</kbd> (<kbd>-S</kbd>), <code>tar</code> archives won't take
more space than the original.

<p>For example, the <kbd>-sparse</kbd> (<kbd>-S</kbd>) option is useful when many <code>dbm</code>
files are being backed up.  Using this option dramatically decreases the
amount of space needed to store such a file.

<blockquote>
<strong>Please note:</strong> Always use <kbd>-sparse</kbd> (<kbd>-S</kbd>) when performing file
system backups, to avoid archiving the expanded forms of files stored
sparsely in the system.

<p>Even if your system has no sparse files currently, some may be
created in the future.  If you use <kbd>-sparse</kbd> (<kbd>-S</kbd>) while making file
system backups as a matter of course, you can be assured the archive
will never take more space on the media than the files take on disk
(otherwise, archiving a disk filled with sparse files might take
hundreds of tapes).  See <a href="#incremental%20listed-incremental">incremental listed-incremental</a>. 
</blockquote>

<p>Programs like <code>dump</code> do not have to read the entire file; by examining
the file system directly, they can determine in advance exactly where the
holes are and thus avoid reading through them.  The only data they need read
are the actual allocated data blocks.  <code>tar</code> uses a more portable and
straightforward archiving approach; it would be fairly difficult for it
to do otherwise.  On 1990-12-10, Elizabeth Zwicky wrote<a rel=footnote href="#fn-23"><sup>23</sup></a> to <code>comp.unix.internals</code>:

<blockquote>
What I did say is that you cannot tell the difference between a
hole and an equivalent number of <code>NUL</code>s without reading raw blocks. 
<code>st_blocks</code> at best tells you how many holes there are; it doesn't
tell you <em>where</em>.  Just as programs may, conceivably, care what
<code>st_blocks</code> is (care to name one that does?), they may also care
where the holes are (I have no examples of this one either, but it's
equally imaginable).

<p>I conclude from this that good archivers are not portable.  One can
arguably conclude that if you want a portable program, you can in good
conscience restore files with as many holes as possible, since you can't
get it right. 
</blockquote>

<p>Users should be well aware that at archive creation time, <code>tar</code>
still has to read the whole disk file to locate the <dfn>holes</dfn>, and so,
even if sparse files use little space on disk and in the archive, they
may sometimes require an inordinate amount of time for reading and examining
all-zero blocks of a file.  Although it works, it's painfully slow for a
large (sparse) file, even though the resulting <code>tar</code> archive may be small. 
(One user reports that dumping a <code>core</code> file of over 400 megabytes,
but with only about 3 megabytes of actual data, took about 9 minutes on a
Sun Sparstation ELC, with full CPU utilisation.)  This reading is required
in all cases, even if the <kbd>-sparse</kbd> (<kbd>-S</kbd>) option is not used.<a rel=footnote href="#fn-24"><sup>24</sup></a>

<p>In some later <code>tar</code> version, the <kbd>-sparse</kbd> (<kbd>-S</kbd>) option might be
removed as such, and the testing and treatment of sparse files may be done
automatically with any special option calling for <em>any</em> extension. 
The matter is not fully decided yet.

<p><hr>
Node:Other formats, Previous:<a rel=previous href="#Compression">Compression</a>, Up:<a rel=up href="#Formats">Formats</a>
<p>

<h2><a name="Other%20formats">Other non-<code>tar</code> formats</a></h2>

<ul>
<li><a href="#cpio">cpio</a>:                         Comparison of <code>tar</code> and <code>cpio</code>

<li><a href="#zip">zip</a>:                          Comparison of <code>tar</code> and <code>zip</code>
</ul>

<p><hr>
Node:cpio, Next:<a rel=next href="#zip">zip</a>, Previous:<a rel=previous href="#Other%20formats">Other formats</a>, Up:<a rel=up href="#Other%20formats">Other formats</a>
<p>

<h3><a name="cpio">Comparison of <code>tar</code> and <code>cpio</code></a></h3>

<p>The <code>cpio</code> archive formats, like <code>tar</code>, have maximum pathname
lengths.  The binary and old ASCII formats have a max path length of 256,
and the new ASCII and CRC ASCII formats have a max path length of 1024. 
This <code>cpio</code> can read and write archives with arbitrary pathname
lengths, but other <code>cpio</code> implementations may crash unexplainedly
trying to read them.

<p><code>tar</code> handles symbolic links in the form in which it comes in BSD;
<code>cpio</code> doesn't handle symbolic links in the form in which it comes in
System V prior to SVR4, and some vendors may have added symlinks to their
system without enhancing <code>cpio</code> to know about them.  Others may have
enhanced it in a way other than the way we did it at Sun, and which was
adopted by AT&amp;T (and which is, we think, also present in the <code>cpio</code>
that Berkeley picked up from AT&amp;T and put into a later BSD release--we
think we gave them our changes).

<p>(SVR4 does some funny stuff with <code>tar</code>; basically, its <code>cpio</code>
can handle <code>tar</code> format input, and write it on output, and it
probably handles symbolic links.  They may not have bothered doing
anything to enhance <code>tar</code> as a result.)

<p><code>cpio</code> handles special files; traditional <code>tar</code> doesn't.

<p><code>tar</code> comes with V7, System III, System V, and BSD source;
<code>cpio</code> comes only with System III, System V, and later BSD
(4.3-tahoe and later).

<p><code>tar</code>'s way of handling multiple hard links to a file can handle
file systems that support 32-bit inumbers (e.g., the BSD file system);
<code>cpio</code>'s way requires you to play some games (in its "binary"
format, i-numbers are only 16 bits, and in its "portable ASCII" format,
they're 18 bits--it would have to play games with the "file system ID"
field of the header to make sure that the file system ID/i-number pairs
of different files were always different), and we don't know which
<code>cpio</code>s, if any, play those games.  Those that don't might get
confused and think two files are the same file when they're not, and
make hard links between them.

<p><code>tar</code>'s way of handling multiple hard links to a file places only
one copy of the link on the tape, but the name attached to that copy
is the <em>only</em> one you can use to retrieve the file; <code>cpio</code>'s
way puts one copy for every link, but you can retrieve it using any
of the names.

<blockquote>
What type of checksum (if any) is used, and how is this calculated? 
</blockquote>

<p>See the attached manual pages for <code>tar</code> and <code>cpio</code> format. 
<code>tar</code> uses a checksum which is the sum of all the bytes in the
<code>tar</code> header for a file; <code>cpio</code> uses no checksum.

<blockquote>
Does anyone know why <code>cpio</code> was made when <code>tar</code> was present
at the Unix scene? 
</blockquote>

<p>It wasn't.  <code>cpio</code> first showed up in PWB/Unix 1.0; no
generally-available version of Unix had <code>tar</code> at the time.  We don't
know whether any version that was generally available <em>within AT&amp;T</em>
had <code>tar</code>, or, if so, whether the people within AT&amp;T who did
<code>cpio</code> knew about it.

<p>On restore, if there is a corruption on a tape, <code>tar</code> will stop at
that point, while <code>cpio</code> will skip over it and try to restore the
rest of the files.

<p>The main difference is just in the command syntax and header format.

<p><code>tar</code> is a little more tape-oriented in that everything is blocked
to start on a record boundary.

<blockquote>
Are there any differences in the ability to recover crashed
archives between the two of them?  (Is there any chance of recovering
crashed archives at all?) 
</blockquote>

<p>Theoretically, it should be easier under <code>tar</code> since the blocking
lets you find a header with some variation of <kbd>dd skip=<var>nn</var></kbd>. 
However, modern <code>cpio</code>'s and variations have an option to just
search for the next file header after an error with a reasonable chance
of re-syncing.  Note that lots of tape driver software won't allow you to
continue past a media error, which should be the only reason for getting
out of sync unless a file changed sizes while you were writing the
archive.

<blockquote>
If anyone knows why <code>cpio</code> was made when <code>tar</code> was present
at the Unix scene, please tell me about this too. 
</blockquote>

<p>Probably because it is more media efficient (by not blocking everything
and using only the space needed for the headers where <code>tar</code>
always uses 512 bytes per file header) and it knows how to archive
special files.

<p>You might want to look at the freely available alternatives.  The major
ones are <code>afio</code>, <code>tar</code>, and <code>pax</code>, each of which
have their own extensions with some backwards compatibility.

<p>Sparse files were <code>tar</code>red as sparse files (which you can easily test,
because the resulting archive gets smaller, and <code>cpio</code> can no longer
read it).

<p><hr>
Node:zip, Previous:<a rel=previous href="#cpio">cpio</a>, Up:<a rel=up href="#Other%20formats">Other formats</a>
<p>

<h3><a name="zip">Comparison of <code>tar</code> and <code>zip</code></a></h3>

<p>On 1993-01-26, Jean-loup Gailly published on <code>bug-gnu-utils</code> a
useful comparison between the <code>tar</code> and <code>gzip</code> combination,
and <code>zip</code>.  Here are the points of his letter.

<ul>
<li><kbd>tar -z</kbd> (that is, <code>tar</code> with <code>gzip</code>) compresses a tar file
into a single stream.  To extract one specific member (with <kbd>tar xfz
foo.tar.z member</kbd>), <code>gunzip</code> decompresses the whole <code>tar.z</code>
file and passes that to <code>tar</code>.  This method improves compression
since <code>gzip</code> can take advantage of redundancy between files.

<li><code>zip</code> compresses file members independently.  <code>unzip</code> is then able
to seek directly to the proper location for extraction of a single member. 
This method degrades compression but enables recovery in case of damage
to a portion of the <code>zip</code> file.  If a <code>tar.z</code> file is damaged,
all data after the error is lost.

<li>The current version of <code>zip</code> does not store UID and GID,
and compresses hard links several times.  <code>tar</code> works correctly.

<li><code>unzip</code> has many tricks to convert file names from one system to
another, restore special file attributes (for VMS and OS/2), and so
forth <small>...</small>
<code>gzip</code> is only a data compression program, which should be kept simple.

</ul>

<p>Jean-loup adds that he is thinking of adding an optional block size parameter
to <code>gzip</code> to improve error recovery, and refers to the <code>TODO</code>
file in the <code>gzip</code> 0.8.1 distribution.

<p><hr>
Node:Media, Next:<a rel=next href="#Backups">Backups</a>, Previous:<a rel=previous href="#Formats">Formats</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="Media">Tapes and other archive media</a></h1>

<p>Archives are usually written on removable media--tape cartridges, mag
tapes, or floppy disks.

<p>The amount of data a tape or disk can hold depends not only on its size,
but also on how it is formatted.  A 2400 foot long reel of mag tape holds
40 megabytes of data when formated at 1600 bits per inch.  The physically
smaller EXABYTE tape cartridge holds 2.3 gigabytes.

<p>Magnetic media are re-usable--once the archive on a tape is no longer
needed, the archive can be erased and the tape or disk used over. 
Media quality does deteriorate with use, however.  Most tapes or disks
should be discarded when they begin to produce data errors.

<p>Magnetic media are written and erased using magnetic fields, and should
be protected from such fields to avoid damage to stored data.  Sticking a
floppy disk to a filing cabinet using a magnet is probably not a good idea.

<p>Format related parameters specify how an archive is written on the archive
media.  The best choice of format parameters will vary depending on the
type and number of files being archived, and on the media used to store
the archive.

<p>To specify format parameters when accessing or creating an archive,
you can use the options described in the following sections.  If you do
not specify any format parameters, <code>tar</code> uses default parameters. 
You cannot modify a compressed archive.  If you create an archive with the
<kbd>-blocking-factor=<var>blocks</var></kbd> (<kbd>-b <var>blocks</var></kbd>) option specified (see <a href="#blocking-factor">blocking-factor</a>),
you should specify that blocking factor when operating on the archive. 
See <a href="#Formats">Formats</a>, for other examples of format parameter considerations.

<p>When you access a previously created <code>tar</code> archive using <code>tar</code>,
you should specify certain format parameters.  These parameters were
specified when the archive was created, and <code>tar</code> is not always able
to determine some of the parameters for itself.  The safest procedure is to
specify them again in order for <code>tar</code> to properly read and/or modify
the contents of the archive.

<ul>
<li><a href="#Blocking">Blocking</a>:                     Blocking

<li><a href="#Many%20on%20one">Many on one</a>:                  Many archives on one tape

<li><a href="#One%20on%20many">One on many</a>:                  Using multiple tapes

<li><a href="#Being%20careful">Being careful</a>:                Being even more careful

<li><a href="#Other%20tape%20considerations">Other tape considerations</a>:    Other tape considerations
</ul>

<p><hr>
Node:Blocking, Next:<a rel=next href="#Many%20on%20one">Many on one</a>, Previous:<a rel=previous href="#Media">Media</a>, Up:<a rel=up href="#Media">Media</a>
<p>

<h2><a name="Blocking">Blocking</a></h2>

<p><dfn>Block</dfn> and <dfn>record</dfn> terminology is rather confused, and it is
even confusing to the expert reader.  Currently, <code>tar</code> uses the
POSIX terminology, in which the terms are exchanged with regard to the
IBM terminology.  On 1995-06, John Gilmore (the writer of the original
program which evolved into this current <code>tar</code>) wrote:

<blockquote>
The nomenclature of tape drives comes from IBM, where we believe they were
invented for the IBM 650 or so.  On IBM mainframes, what is recorded on
tape are tape blocks.  The logical organization of data is into records. 
There are various ways of putting records into blocks, including <code>F</code>
(fixed sized records), <code>V</code> (variable sized records), <code>FB</code> (fixed
blocked: fixed size records, <var>n</var> to a block), <code>VB</code> (variable size
records, <var>n</var> to a block), <code>VSB</code> (variable spanned blocked: variable
sized records that can occupy more than one block), etc.  The <code>JCL</code>
<kbd>DD RECFORM=</kbd> parameter specified this to the operating system.

<p>The Unix man page on <code>tar</code> was totally confused about this.  When I
wrote <code>PD TAR</code>, I used the historically correct terminology (<code>tar</code>
writes data records, which are grouped into blocks).  It appears that
the bogus terminology made it into POSIX (no surprise here), and now
Fran&ccedil;ois has migrated that terminology back into the source code too. 
</blockquote>

<ul>
<li><a href="#Blocks%20and%20records">Blocks and records</a>:           Blocks and records

<li><a href="#blocking-factor">blocking-factor</a>:              Setting the blocking factor

<li><a href="#record-size">record-size</a>:                  Setting a record size

<li><a href="#Media%20types">Media types</a>:                  Per-Media blocking considerations

<li><a href="#Reblocking">Reblocking</a>:                   Automatic reblocking
</ul>

<p><hr>
Node:Blocks and records, Next:<a rel=next href="#blocking-factor">blocking-factor</a>, Previous:<a rel=previous href="#Blocking">Blocking</a>, Up:<a rel=up href="#Blocking">Blocking</a>
<p>

<h3><a name="Blocks%20and%20records">Blocks and records</a></h3>

<p>The term <dfn>physical block</dfn> means the basic transfer chunk from or to a
device, after which reading or writing may stop without anything being lost. 
In this manual, the term <dfn>block</dfn> usually refers to a physical disk
block, <em>assuming</em> that each disk block is 512 bytes in length.  It is
true that some disk devices have different physical blocks, but <code>tar</code>
ignores these differences in its own format, which is meant to be portable,
so a <code>tar</code> block is always 512 bytes in length, and <dfn>block</dfn>
always means a <code>tar</code> block.<a rel=footnote href="#fn-25"><sup>25</sup></a>  The term <dfn>physical
record</dfn> is another way of speaking about a physical block, those two terms
are somewhat interchangeable.

<p>Contrarily to disks, tapes start and stop often.  An <dfn>inter-record gap</dfn>
(IRG), or <dfn>gap</dfn> for short, is a small landing area on the tape with
no information on it, used for decelerating the tape to a full stop, and
for later regaining reading or writing speed.  When the tape driver
starts reading a record, the record has to be read in its entirety
without stopping,
as a gap is needed to stop the tape motion without losing information. 
Many such gaps must be managed at regular intervals, so the tape soon
finds a place to stop when this is needed.  The recorded data is split into
chunks that we call physical tape blocks, each of which is sandwiched between
two successive gaps.  In POSIX <code>tar</code> terminology, each physical tape
block is called a <dfn>record</dfn>.  Although each record might have its own
length, it is customary to set some maximum length for all records on a
given tape.  <code>tar</code> archives may be put on disk or used with pipes,
instead of being written to tape.  Nevertheless, <code>tar</code> tries to read
and write the archive one record at a time, whatever the medium in use.

<p>For <code>tar</code>, a record<a rel=footnote href="#fn-26"><sup>26</sup></a> is made up of an integral
number of blocks, and this operation of putting many disk blocks into a
single record is called <dfn>blocking</dfn>.  <code>tar</code> blocks are all fixed
size (512 bytes), and its scheme for putting them into records is to put a
whole number of them (one or more) into each record.  In a single archive,
all <code>tar</code> records are the same size; at the end of the file there's
a block containing all zeros, which is how you tell that the remainder of
the last record(s) is (are) garbage.  The usual number of disk blocks
that go
into a single record is called the <dfn>blocking factor</dfn> for that tape.

<p>Using higher blocking (putting more disk blocks per record) will use
the tape more efficiently, as there will be fewer gaps.  But reading
such tapes may be more difficult for the system, as more memory will be
required to receive the whole record at once.  Further, if there is a
reading error on a huge record, it is less likely that the system will
succeed in recovering the information.  So blocking should not be too low,
nor it should be too high.  <code>tar</code> uses by default a blocking of 20 for
historical reasons, and it does not really matter when reading or writing
to disk.  Current tape technology would easily accomodate higher blockings.

<p><hr>
Node:blocking-factor, Next:<a rel=next href="#record-size">record-size</a>, Previous:<a rel=previous href="#Blocks%20and%20records">Blocks and records</a>, Up:<a rel=up href="#Blocking">Blocking</a>
<p>

<h3><a name="blocking-factor">Setting the blocking factor</a></h3>

<p>In a standard <code>tar</code> file (no options), the block size is 512 bytes
and the record size is 10240 bytes, for a blocking factor of 20.  In fact,
the default blocking factor is set when <code>tar</code> is compiled, and is
typically 20.  The output of <kbd>tar -help</kbd>, near the end, shows the
default blocking factor which was compiled in the <code>tar</code> version you
are using.  Archives with blocking factors larger than 20 cannot be read by
very old versions of <code>tar</code>, or by some newer versions of <code>tar</code>
running on old machines with small address spaces.  With this <code>tar</code>,
the blocking factor of an archive is limited only by the maximum record
size of the device containing the archive, or by the amount of available
virtual memory.

<p>What the <kbd>-blocking-factor=<var>blocks</var></kbd> (<kbd>-b <var>blocks</var></kbd>) option does is to set the blocking
factor, that is, to change the record size while leaving the block size
at 512 bytes.  A blocking factor of 20 was fine for ancient 800 or 1600
bpi reel-to-reel tape
drives; most tape drives these days prefer much bigger records in order to
stream and not waste tape.  When writing tapes, some tend to use a factor
of the order of 2048, say, giving a record size of around one megabyte. 
This is acceptable nowadays, as the tape technology is now much more
dependable that it once was, and errors are much less likely to occur.

<p>When reading an archive, <code>tar</code> can usually figure out the record
size itself.  To get it to do this, you can use <kbd>-blocking-factor=<var>blocks</var></kbd> (<kbd>-b <var>blocks</var></kbd>)
to specify a blocking factor larger than real one, and <code>tar</code> will
diagnose the observed record size as shorter than expected.  In this
indirect way, you can use <code>tar</code> to learn about the actual record size
of the first record on a tape!  The diagnostic is not produced when the
observed record size matches the expected size.

<p>Further complicating the problem is that some tape drives ignore the
blocking entirely.  For these, <code>tar</code> cannot easily determine the real
block size.  In such cases, specifying a larger record size in <code>tar</code>
can still improve performance a tiny bit, yet most of the improvement has
already been provided by the tape system itself.

<p>If you use a non-default blocking factor when you create an archive,
you must specify the same blocking factor when you modify that archive. 
Some archive devices will also require you to specify the blocking factor
when reading that archive; however, this is not typically the case.  Usually,
you can use <kbd>-list</kbd> (<kbd>-t</kbd>) without specifying a blocking factor--<code>tar</code>
reports a non-default record size and then lists the archive members as
it would normally.  To extract files from an archive with a non-standard
blocking factor (particularly if you're not sure what the blocking factor
is), you can usually use the <kbd>-read-full-records</kbd> (<kbd>-B</kbd>) option while
specifying a blocking factor larger then the blocking factor of the archive
(for example, <kbd>tar -extract -read-full-records -blocking-factor=300</kbd>). 
See <a href="#list">list</a>, for more information on the <kbd>-list</kbd> (<kbd>-t</kbd>) subcommand. 
See <a href="#Reading">Reading</a>, for a more detailed explanation of that option.

<p>If the archive is in a disk file or a pipe, some might sometimes want to
specify a smaller blocking factor, since a large one will result in more
<code>NUL</code> bytes at the end of the archive, but it might not be worth it. 
Beware that for the <code>tar</code> blocking to be effective, <code>tar</code>
should directly write to the device.  Blocking is effectively defeated or
overridden when a pipe interposes another step between <code>tar</code> and the
device (like a call to <code>dd</code>, for instance).

<p><hr>
Node:record-size, Next:<a rel=next href="#Media%20types">Media types</a>, Previous:<a rel=previous href="#blocking-factor">blocking-factor</a>, Up:<a rel=up href="#Blocking">Blocking</a>
<p>

<h3><a name="record-size">Setting a record size</a></h3>

<p>The <kbd>-record-size=<var>size</var></kbd> option instructs <code>tar</code> to use <var>size</var>
bytes per record when accessing the archive.  The value of <var>size</var>
should be evenly divisible by 512.  This option is an alternative to using
<kbd>-blocking-factor=<var>blocks</var></kbd> (<kbd>-b <var>blocks</var></kbd>), except that the unit for <kbd>-record-size=<var>size</var></kbd>
is a single byte, while the unit for <kbd>-blocking-factor=<var>blocks</var></kbd> (<kbd>-b <var>blocks</var></kbd>) is a whole
<code>tar</code> block.  See <a href="#blocking-factor">blocking-factor</a>.

<p><hr>
Node:Media types, Next:<a rel=next href="#Reblocking">Reblocking</a>, Previous:<a rel=previous href="#record-size">record-size</a>, Up:<a rel=up href="#Blocking">Blocking</a>
<p>

<h3><a name="Media%20types">Per-Media blocking considerations</a></h3>

<p>When handling various tapes or cartridges, you have to take care of selecting
a proper blocking, that is, the number of disk blocks you put together as
a single record on the tape, without intervening tape gaps.  Strangely,
on more than a few systems, the mere fact of not using an adequate blocking
factor yields rather unexpected or cryptic diagnostics, like:

<pre>Cannot write to /dev/dlt: Invalid argument
</pre>

<p>So, one might have to pay attention to the requirements of device drivers. 
To make things a bit confusing, it also happens that the <code>tar</code> bundled
by the system is aware of record size idiosyncrasies, while <code>tar</code>
requires an explicit specification for the record size, which it cannot
guess.  This yields some people to believe that <code>tar</code> is misbehaving,
because by comparison, <cite>the bundled <code>tar</code> works OK</cite>.  Merely using
something like <kbd>-b&nbsp;256</kbd>, say, might resolve the problem.

<p><code>tar</code> uses a blocking factor of 20 by default for historical reasons, and
it does not really matter when reading or writing to disk.  Current tape
technology would easily accomodate higher blockings.  Sun recommends a
blocking of 126 for Exabytes and 96 for DATs.  Another source said that
Exabyte drives have a physical block size of 8KB, and that using <kbd>-b&nbsp;112</kbd> solved their problems.  We were told that for some DLT drives,
the blocking should be a multiple of 4KB, preferably 64KB (<kbd>-b&nbsp;128</kbd> or <kbd>256</kbd>), for decent performance.  Other manufacturers may use
different recommendations for the same tapes.  This might also depend of
the buffering techniques used by modern tape controllers.  Some impose
a minimum blocking, or a maximum blocking.  Others request blocking to be
some power of two.

<p>So there is no fixed rule for blocking.  But blocking at read time should
ideally be the same as blocking used at write time.  At one place we know,
with a wide variety of equipment, they found it best to use a blocking
of 32 to guarantee that their tapes are fully interchangeable between all
systems they have.

<p>We were also told that, for recycled tapes, prior erasure (by the exact
drive unit that will be used to create the archives) sometimes lowers the
error rates observed at rewriting time.

<p><hr>
Node:Reblocking, Previous:<a rel=previous href="#Media%20types">Media types</a>, Up:<a rel=up href="#Blocking">Blocking</a>
<p>

<h3><a name="Reblocking">Automatic reblocking</a></h3>

<p>When handling compressed archives, <code>tar</code> automatically unblocks the
archives before decompression occurs, or reblocks created archives just
after compression, as needed.<a rel=footnote href="#fn-27"><sup>27</sup></a>

<p>When older <code>gzip</code> programs are directly given such reblocked compressed
archives, they may complain like this:

<pre>$ <kbd>tar cfz - FILE | gzip -t</kbd>
gzip: stdin: decompression OK, trailing garbage ignored
</pre>

<p>Because of the reblocking, there may be extraneous zero blocks after the
<code>gzip</code> output, which older versions of <code>gzip</code> diagnose as garbage. 
Jean-loup and I agreed, to handle this particular case, that newer versions
of <code>gzip</code> would be more tolerant to strings of zeros, and just ignore
them.  So, diagnostics like above will progressively disappear, as various
older <code>gzip</code> binaries get replaced.  In any case, they are innocuous.

<p>As a special case, if a compressed archive is directly created on a local
disk, and not through stdout, and if the blocking factor is not explicitly
specified by the user, then the produced file will not be reblocked, and
so, might appear as if the last record has not been padded to full length. 
In all other cases, reblocking occurs.

<p><hr>
Node:Many on one, Next:<a rel=next href="#One%20on%20many">One on many</a>, Previous:<a rel=previous href="#Blocking">Blocking</a>, Up:<a rel=up href="#Media">Media</a>
<p>

<h2><a name="Many%20on%20one">Many archives on one tape</a></h2>

<p>Most tape devices have two entries in the <code>/dev</code> directory, or
entries that come in pairs, which differ only in the minor number for
this device.  Let's take for example <code>/dev/tape</code>, which often
points to the only or usual tape device of a given system.  There might
be a corresponding <code>/dev/nrtape</code> or <code>/dev/ntape</code>.  The simpler
name is the <em>rewinding</em> version of the device, while the name
having <code>nr</code> in it is the <em>no rewinding</em> version of the same
device.

<p>A rewinding tape device will bring the tape back to its beginning point
automatically when this device is opened or closed.  Since <code>tar</code>
opens the archive file before using it and closes it afterwards, this
means that a simple

<pre>$ <kbd>tar cf /dev/tape <var>directory</var></kbd>
</pre>

<p>will reposition the tape to its beginning both before and after saving the
<var>directory</var> contents to it, thus erasing the prior tape contents and
making it so that any subsequent write subcommand will destroy what has
just been saved.

<p>So, a rewinding device is normally meant to hold one and only one file. 
If you want to put more than one <code>tar</code> archive on a given tape, you will
need to avoid using the rewinding version of the tape device.  You will also
have to pay special attention to tape positioning.  Errors in positioning
may overwrite the valuable data already on your tape.  Many people, burned
by past experiences, will only use rewinding devices and limit themselves
to one file per tape, precisely to avoid the risk of such errors.  Be fully
aware that writing at the wrong position on a tape loses all information
past this point and most probably until the end of the tape, and this
destroyed information <em>cannot</em> be easily recovered, if indeed it
can ever be recovered at all.

<p>To save <var>directory-1</var> as a first archive at the beginning of a
tape, and leave that tape ready for a second archive, you should use the
<em>non-rewinding</em> tape device:

<pre>$ <kbd>mt -f /dev/nrtape rewind</kbd>
$ <kbd>tar cf /dev/nrtape <var>directory-1</var></kbd>
</pre>

<p><dfn>Tape marks</dfn> are special magnetic patterns written on the tape media,
which are later recognizable by the reading hardware.  Tape marks consume
a <em>lot</em> more space on the tape than a usual gap, and the tape drive
hardware is often able to detect them even while winding the tape at
higher speed.

<p>These marks are used after each file, when there are many on a single tape. 
An empty file (that is to say, two tape marks in a row) signals the logical
end of the tape, after which no files exist.  Clever non-rewinding tape
device drivers react to the close request issued by <code>tar</code> by first
writing two tape marks after your archive, and by backspacing over one
of these.  So, if you remove the tape at that time from the tape drive,
it is properly terminated.  But if you write another file at the current
position, the second tape mark gets erased by the new information, leaving
only one tape mark between files.

<p>So, you may now save <var>directory-2</var> as a second archive after the
first on the same non-rewinding tape by issuing the command:

<pre>$ <kbd>tar cf /dev/nrtape <var>directory-2</var></kbd>
</pre>

<p>and so on for all the archives you want to put on the same tape.

<p>Another usual case is that you do not write all the archives the same
day, and you need to remove and store the tape between two archive
sessions.  In general, you must remember how many files are already
saved on your tape.  Suppose your tape already has 16 files on it, and
you are ready to write the 17th.  You have to take care to skip
the first 16 tape marks before saving <var>directory-17</var>, say, by using
these commands:

<pre>$ <kbd>mt -f /dev/nrtape rewind</kbd>
$ <kbd>mt -f /dev/nrtape fsf 16</kbd>
$ <kbd>tar cf /dev/nrtape <var>directory-17</var></kbd>
</pre>

<p>In all the previous examples, we put aside blocking considerations, but
you should do the proper things for that as well.  See <a href="#Blocking">Blocking</a>.

<ul>
<li><a href="#Tape%20positioning">Tape positioning</a>:             Tape positions and tape marks

<li><a href="#mt%20invocation">mt invocation</a>:                The <code>mt</code> utility
</ul>

<p><hr>
Node:Tape positioning, Next:<a rel=next href="#mt%20invocation">mt invocation</a>, Previous:<a rel=previous href="#Many%20on%20one">Many on one</a>, Up:<a rel=up href="#Many%20on%20one">Many on one</a>
<p>

<h3><a name="Tape%20positioning">Tape positions and tape marks</a></h3>

<p>Just as archives can store more than one file from the file system,
tapes can store more than one archive file.  To keep track of where
archive files (or any other type of file stored on tape) begin and
end, tape archive devices write magnetic <dfn>tape marks</dfn> on the
archive media.  Tape drives write one tape mark between files,
two at the end of all the file entries.

<p>If you think of data as a series of records "RRRR", and tape marks as
"*", a tape might look like the following:

<pre>RRRR*RRRRRR*RRRRR*RR*RRRRR**-------------------------
</pre>

<p>Tape devices read and write tapes using a read/write <dfn>tape head</dfn>--a
physical part of the device which can only access one point on the tape
at a time.  When you use <code>tar</code> to read or write archive data from
a tape device, the device will begin reading or writing from wherever
on the tape the tape head happens to be, regardless of which archive
or what part of the archive the tape head is on.  Before writing an
archive, you should make sure that no data on the tape will be overwritten
(unless it is no longer needed).  Before reading an archive, you should
make sure the tape head is at the beginning of the archive you want to
read.  (The <code>restore</code> script will find the archive automatically. 
 See <a href="#Scripted%20restoration">Scripted restoration</a>.) 
See <a href="#mt%20invocation">mt invocation</a>, for an explanation of the tape moving utility.

<p>If you want to add new archive file entries to a tape, you should advance
the tape to the end of the existing file entries, backspace over the last
tape mark, and write the new archive file.  If you were to add two archives
to the example above, the tape might look like the following:

<pre>RRRR*RRRRRR*RRRRR*RR*RRRRR*RRR*RRRR**----------------
</pre>

<p><hr>
Node:mt invocation, Previous:<a rel=previous href="#Tape%20positioning">Tape positioning</a>, Up:<a rel=up href="#Many%20on%20one">Many on one</a>
<p>

<h3><a name="mt%20invocation">The <code>mt</code> utility</a></h3>

<p>See <a href="#blocking-factor">blocking-factor</a>.

<p>You can use the <code>mt</code> utility to advance or rewind a tape past a
specified number of archive files on the tape.  This will allow you
to move to the beginning of an archive before extracting or reading
it, or to the end of all the archives before writing a new one.

<p>The syntax of the <code>mt</code> command is:

<pre>$ <kbd>mt [-f <var>tapename</var>] <var>operation</var> [<var>number</var>]</kbd>
</pre>

<p>where <var>tapename</var> is the name of the tape device, <var>number</var> is
the number of times a subcommand is performed (with a default of one),
and <var>operation</var> is one of the following:

<dl>
<dt><kbd>eof</kbd>
<dt><kbd>weof</kbd>
<dd>Writes <var>number</var> tape marks at the current position on the tape.

<br><dt><kbd>fsf</kbd>
<dd>Moves tape position forward <var>number</var> files.

<br><dt><kbd>bsf</kbd>
<dd>Moves tape position back <var>number</var> files.

<br><dt><kbd>rewind</kbd>
<dd>Rewinds the tape.  (Ignores <var>number</var>).

<br><dt><kbd>offline</kbd>
<dt><kbd>rewoff1</kbd>
<dd>Rewinds the tape and takes the tape device off-line. (Ignores <var>number</var>).

<br><dt><kbd>status</kbd>
<dd>Prints status information about the tape unit.

</dl>

<p>If you don't specify a <var>tapename</var>, <code>mt</code> uses the environment
variable <code>TAPE</code>; if <code>TAPE</code> is not defined, <code>mt</code> uses the
device <code>/dev/rmt12</code>.

<p><code>mt</code> returns a 0 exit status when the operation(s) were successful,
1 if the command was unrecognized, and 2 if a subcommand failed.

<p>If you use <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) with the <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) option specified,
<code>tar</code> will read an archive label (the tape head has to be
positioned on it) and print an error if the archive label doesn't
match the <var>archive-name</var> specified.  <var>archive-name</var> can be any
regular expression.  If the labels match, <code>tar</code> extracts the archive. 
See <a href="#label">label</a>, .  <kbd>tar -list
-label</kbd> will cause <code>tar</code> to print the label.

<p><hr>
Node:One on many, Next:<a rel=next href="#Being%20careful">Being careful</a>, Previous:<a rel=previous href="#Many%20on%20one">Many on one</a>, Up:<a rel=up href="#Media">Media</a>
<p>

<h2><a name="One%20on%20many">Using multiple tapes</a></h2>

<p>Often you might want to write a large archive, one larger than will fit
on the actual tape you are using.  In such a case, you can run multiple
<code>tar</code> commands, but this can be inconvenient, particularly if you
are using options like <kbd>-exclude=<var>pattern</var></kbd> or dumping entire filesystems. 
Therefore, <code>tar</code> supports multiple tapes automatically.

<p>Use <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) on the command line, and then <code>tar</code> will,
when it reaches the end of the tape, prompt for another tape, and
continue the archive.  Each tape will have an independent archive, and
can be read without needing the other.  (As an exception to this, the
file that <code>tar</code> was archiving when it ran out of tape will usually
be split between the two archives; in this case you need to extract from
the first archive, using <kbd>-multi-volume</kbd> (<kbd>-M</kbd>), and then put in the
second tape when prompted, so <code>tar</code> can restore both halves of the
file.)

<p><code>tar</code> multi-volume archives do not use a truly portable format. 
You need <code>tar</code> at both ends to process them properly.

<p>When prompting for a new tape, <code>tar</code> accepts any of the following
responses:

<dl>
<dt><kbd>?</kbd>
<dd>Request <code>tar</code> to explain possible responses. 
<br><dt><kbd>q</kbd>
<dd>Request <code>tar</code> to exit immediately. 
<br><dt><kbd>n <var>filename</var></kbd>
<dd>Request <code>tar</code> to write the next volume on the file <var>filename</var>. 
<br><dt><kbd>!</kbd>
<dd>Request <code>tar</code> to run a subshell. 
<br><dt><kbd>y</kbd>
<dd>Request <code>tar</code> to begin writing the next volume. 
</dl>

<p>(You should type <kbd>y</kbd> only <strong>after</strong> you have changed the tape;
otherwise <code>tar</code> will write over the volume it just finished.)

<p>If you want more elaborate behavior than this, give <code>tar</code> the
<kbd>-info-script=<var>script-name</var></kbd> (<kbd>-new-volume-script=<var>script-name</var></kbd>, <kbd>-F <var>script-name</var></kbd>) option.  The file <var>script-name</var> is expected
to be a program (or shell script) to be run instead of the normal
prompting procedure.  When the program finishes, <code>tar</code> will
immediately begin writing the next volume.  The behavior of the
<kbd>n</kbd> response to the normal tape-change prompt is not available
if you use <kbd>-info-script=<var>script-name</var></kbd> (<kbd>-new-volume-script=<var>script-name</var></kbd>, <kbd>-F <var>script-name</var></kbd>).

<p>The method <code>tar</code> uses to detect end of tape is not perfect, and
fails on some operating systems or on some devices.  You can use the
<kbd>-tape-length=<var>KBytes</var></kbd> (<kbd>-L <var>KBytes</var></kbd>) option if <code>tar</code> can't detect the end of the
tape itself.  This option selects <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) automatically. 
The <var>size</var> argument should then be the usable size of the tape. 
But for many devices, and floppy disks in particular, this option is
never actually required, as far as we know.

<p>If you want <code>tar</code> to cycle through a series of tape drives, then
you can use the <kbd>n</kbd> response to the tape-change prompt.  This is
error prone, however, and doesn't work at all with <kbd>-info-script=<var>script-name</var></kbd> (<kbd>-new-volume-script=<var>script-name</var></kbd>, <kbd>-F <var>script-name</var></kbd>). 
Therefore, if you give <code>tar</code> multiple <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>) options, then
the specified files will be used, in sequence, as the successive volumes
of the archive.  Only when the first one in the sequence needs to be
used again will <code>tar</code> prompt for a tape change (or run the info
script).

<p>Multi-volume archives

<p>With <kbd>-multi-volume</kbd> (<kbd>-M</kbd>), <code>tar</code> will not abort when it cannot
read or write any more data.  Instead, it will ask you to prepare a new
volume.  If the archive is on a magnetic tape, you should change tapes
now; if the archive is on a floppy disk, you should change disks, and so
forth.

<p>Each volume of a multi-volume archive is an independent <code>tar</code>
archive, complete in itself.  For example, you can list or extract any
volume alone; just don't specify <kbd>-multi-volume</kbd> (<kbd>-M</kbd>).  However, if one
file in the archive is split across volumes, the only way to extract
it successfully is with a multi-volume extract command <kbd>-extract
-multi-volume</kbd> (<kbd>-xM</kbd>) starting on or before the volume where
the file begins.

<p>For example, let's presume someone has two tape drives on a system,
named <code>/dev/tape0</code> and <code>/dev/tape1</code>.  To have
<code>tar</code> switch to the second drive when it needs to write the
second tape, and then back to the first tape, and so forth, just do either of:

<pre>$ <kbd>tar --create --multi-volume --file=/dev/tape0 --file=/dev/tape1 <var>files</var></kbd>
$ <kbd>tar cMff /dev/tape0 /dev/tape1 <var>files</var></kbd>
</pre>

<ul>
<li><a href="#Multi-volume%20archives">Multi-volume archives</a>:        Archives longer than one tape or disk

<li><a href="#multi-volume">multi-volume</a>:                 Using multi-volume mode

<li><a href="#tape-length">tape-length</a>:                  Announcing the tape length

<li><a href="#info-script">info-script</a>:                  Taking actions at volume switching

<li><a href="#volno-file">volno-file</a>:                   Changing the volume number in prompts
</ul>

<p><hr>
Node:Multi-volume archives, Next:<a rel=next href="#multi-volume">multi-volume</a>, Previous:<a rel=previous href="#One%20on%20many">One on many</a>, Up:<a rel=up href="#One%20on%20many">One on many</a>
<p>

<h3><a name="Multi-volume%20archives">Archives longer than one tape or disk</a></h3>

<p>To create an archive that is larger than will fit on a single unit of
the media, use the <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) option in conjunction with
the <kbd>-create</kbd> (<kbd>-c</kbd>) option (see <a href="#create">create</a>).  A
<dfn>multi-volume</dfn> archive can be manipulated like any other archive
(provided the <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) option is specified), but is
stored on more than one tape or disk.

<p>When you specify <kbd>-multi-volume</kbd> (<kbd>-M</kbd>), <code>tar</code> does not report an
error when it comes to the end of an archive volume (when reading) or
the end of the media (when writing).  Instead, it prompts you to load
a new storage volume.  If the archive is on a magnetic tape, you
should change tapes when you see the prompt; if the archive is on a
floppy disk, you should change disks; and so forth.

<p>You can read each individual volume of a multi-volume archive as if it
were an archive by itself.  For example, to list the contents of one
volume, use <kbd>-list</kbd> (<kbd>-t</kbd>), without <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) specified. 
To extract an archive member from one volume (assuming it is on
that volume), use <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), again without
<kbd>-multi-volume</kbd> (<kbd>-M</kbd>).

<p>If an archive member is split across volumes (that is, its entry begins on
one volume of the media and ends on another), you need to specify
<kbd>-multi-volume</kbd> (<kbd>-M</kbd>) to extract it successfully.  In this case, you
should load the volume where the archive member starts, and use
<kbd>tar -extract -multi-volume</kbd>--<code>tar</code> will prompt for later
volumes as it needs them.  See <a href="#Extracting%20archives">Extracting archives</a>, for more
information about extracting archives.

<p><kbd>-info-script=<var>script-name</var></kbd> (<kbd>-new-volume-script=<var>script-name</var></kbd>, <kbd>-F <var>script-name</var></kbd>) is like <kbd>-multi-volume</kbd> (<kbd>-M</kbd>), except that
<code>tar</code> does not prompt you directly to change media volumes when
a volume is full--instead, <code>tar</code> runs commands you have stored
in <var>script-name</var>.  For example, this option can be used to eject
cassettes, or to broadcast messages such as <code>Someone please come
change my tape</code> when performing unattended backups.  When <var>script-name</var>
is done, <code>tar</code> will assume that the media has been changed.

<p>Multi-volume archives can be modified like any other archive.  To add
files to a multi-volume archive, you need to only mount the last
volume of the archive media (and new volumes, if needed).  For all
other subcommands that modify the archive, you need to use the entire archive.

<p>If a multi-volume archive was labeled using <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>)
(see <a href="#label">label</a>) when it was created, <code>tar</code> will not
automatically label volumes which are added later.  To label subsequent
volumes, specify <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) again in conjunction with the
<kbd>-append</kbd> (<kbd>-r</kbd>), <kbd>-update</kbd> (<kbd>-u</kbd>) or <kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>) subcommand.

<p><hr>
Node:multi-volume, Next:<a rel=next href="#tape-length">tape-length</a>, Previous:<a rel=previous href="#Multi-volume%20archives">Multi-volume archives</a>, Up:<a rel=up href="#One%20on%20many">One on many</a>
<p>

<h3><a name="multi-volume">Using multi-volume mode</a></h3>

<p>When the <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) option is given, <code>tar</code> creates a
multi-volume archive, when used in conjunction with <kbd>-create</kbd> (<kbd>-c</kbd>). 
To perform any other subcommand on a multi-volume archive, specify
<kbd>-multi-volume</kbd> (<kbd>-M</kbd>) in conjunction with that subcommand.  It creates,
lists, or extracts a multi-volume archive.

<p>This option causes <code>tar</code> to write a <dfn>multi-volume</dfn> archive--one
that may be larger than will fit on the medium used to hold it. 
See <a href="#Multi-volume%20archives">Multi-volume archives</a>.

<p>Beware that there is <em>no</em> real standard about the proper way for a
<code>tar</code> archive to span volume boundaries.  If you have a multi-volume
created by some vendor's <code>tar</code>, there is almost no chance you could
read all the volumes with <code>tar</code>.  The converse is also true:
you should not expect multi-volume archives created by <code>tar</code> to
be fully recovered by any vendor's <code>tar</code>.  Since there is little chance
that, in mixed system configurations, some vendor's <code>tar</code> will work on
another vendor's machine, and there is a great chance that <code>tar</code>
will work on most of them, your best bet is to install <code>tar</code>
on all machines between which you know exchange of files is possible.

<p><hr>
Node:tape-length, Next:<a rel=next href="#info-script">info-script</a>, Previous:<a rel=previous href="#multi-volume">multi-volume</a>, Up:<a rel=up href="#One%20on%20many">One on many</a>
<p>

<h3><a name="tape-length">Announcing the tape length</a></h3>

<p>Option <kbd>-tape-length=<var>KBytes</var></kbd> (<kbd>-L <var>KBytes</var></kbd>) has the effect of forcing a change of the
tape after writing <var>num</var> x 1024 bytes.

<p>This option might be useful when your tape drivers do not properly
detect the end of physical tapes.  By being slightly conservative on the
maximum tape length, you might avoid the problem entirely.

<p><hr>
Node:info-script, Next:<a rel=next href="#volno-file">volno-file</a>, Previous:<a rel=previous href="#tape-length">tape-length</a>, Up:<a rel=up href="#One%20on%20many">One on many</a>
<p>

<h3><a name="info-script">Taking actions at volume switching</a></h3>

<p>The <kbd>-info-script=<var>script-name</var></kbd> (<kbd>-new-volume-script=<var>script-name</var></kbd>, <kbd>-F <var>script-name</var></kbd>) option indicates the name of a program, or shell
script, meant to help create a multi-volume archive via a script.  Used in
conjunction with <kbd>-create</kbd> (<kbd>-c</kbd>).  It gets <code>file</code> executed at end of
each tape.  This implies <kbd>-multi-volume</kbd> (<kbd>-M</kbd>).

<p>This script should exit with zero status if <code>tar</code> is to continue the
archiving operation.  <code>tar</code> interprets a non-zero exit (or any other
kind of error) as a request to abort processing right away.  For example,
this could ease the termination of <code>tar</code> when the script determines
it runs out of tapes, or in other situations of unattented environments.

<p><hr>
Node:volno-file, Previous:<a rel=previous href="#info-script">info-script</a>, Up:<a rel=up href="#One%20on%20many">One on many</a>
<p>

<h3><a name="volno-file">Changing the volume number in prompts</a></h3>

<p>The volume number used by <code>tar</code> in its tape-change prompt
can be changed; if you give the <kbd>-volno-file=<var>file-of-number</var></kbd> option, then
<var>file-of-number</var> should be a nonexistent file to be created, or
a file already containing a decimal number.  That number will be used
as the volume number of the first volume written.  When <code>tar</code> is
finished, it will rewrite the file with the now-current volume number. 
(This does not change the volume number written on a tape label, as
per <a href="#label">label</a>; it <em>only</em> affects the number used in
the prompt.)

<p><hr>
Node:Being careful, Next:<a rel=next href="#Other%20tape%20considerations">Other tape considerations</a>, Previous:<a rel=previous href="#One%20on%20many">One on many</a>, Up:<a rel=up href="#Media">Media</a>
<p>

<h2><a name="Being%20careful">Being even more careful</a></h2>

<ul>
<li><a href="#label">label</a>:                        Including labels in the archive

<li><a href="#verify">verify</a>:                       Verifying data as it is stored

<li><a href="#Write%20protection">Write protection</a>:             Write protection
</ul>

<p><hr>
Node:label, Next:<a rel=next href="#verify">verify</a>, Previous:<a rel=previous href="#Being%20careful">Being careful</a>, Up:<a rel=up href="#Being%20careful">Being careful</a>
<p>

<h3><a name="label">Including labels in the archive</a></h3>

<p>To give the archive a name which will be recorded in it, use the
<kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) option.  This will write a special block identifying
<var>volume-label</var> as the name of the archive to the front of the archive,
which will be displayed when the archive is listed with <kbd>-list</kbd> (<kbd>-t</kbd>). 
If you are creating a multi-volume archive with <kbd>-multi-volume</kbd> (<kbd>-M</kbd>)
(see <a href="#One%20on%20many">One on many</a>), then the volume label will have <code>Volume
<var>nnn</var></code> appended to the name you give, where <var>nnn</var> is the number
of the volume of the archive.  If you use the <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) option when
reading an archive, it checks to make sure the label on the tape matches
the one you give.  See <a href="#label">label</a>.

<p>When <code>tar</code> writes an archive to tape, it creates a single tape file. 
If multiple archives are written to the same tape, one after the other, they
each get written as separate tape files.  When extracting, it is necessary
to position the tape at the right place before running <code>tar</code>.  To do
this, use the <code>mt</code> command.  For more information on the <code>mt</code>
command and on the organization of tapes into a sequence of tape files,
see <a href="#mt%20invocation">mt invocation</a>.

<p>People often seem to do:

<pre>$ <kbd>tar --label="<var>some-prefix</var> `date +<var>some-format</var>`"</kbd>
</pre>

<p>or such, to put a common date on all volumes or an archive set.

<p>The <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) option creates an archive with volume name <var>name</var>.

<p>This option causes <code>tar</code> to write out a <dfn>volume header</dfn> at
the beginning of the archive.  If <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) is used, each
volume of the archive will have a volume header of <code><var>name</var>
Volume <var>n</var></code>, where <var>n</var> is 1 for the first volume, 2 for the
next, and so on.

<p>To avoid problems caused by misplaced paper labels on the archive media,
you can include a <dfn>label</dfn> entry--an archive member which contains
the name of the archive--in the archive itself.  Use the <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>)
option in conjunction with the <kbd>-create</kbd> (<kbd>-c</kbd>) subcommand to include a
label entry in the archive as it is being created.

<p>If you create an archive using both <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) and <kbd>-multi-volume</kbd> (<kbd>-M</kbd>),
each volume of the archive will have an archive label of the form
<code><var>archive-label</var> Volume <var>n</var></code>, where <var>n</var> is 1 for the
first volume, 2 for the next, and so on.  See <a href="#Multi-volume%20archives">Multi-volume archives</a>,
for information on creating multiple volume archives.

<p>If you list or extract an archive using <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>), <code>tar</code> will
print an error if the archive label doesn't match the <var>archive-label</var>
specified, and will then not list nor extract the archive.  In those cases,
the <var>archive-label</var> argument is interpreted as a globbing-style pattern
which must match the actual magnetic volume label.  See <a href="#Wildcards">Wildcards</a>, for
a precise description of how the match is attempted.<a rel=footnote href="#fn-28"><sup>28</sup></a>
If the switch <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) is being used, the volume label
matcher will also suffix <var>archive-label</var> by <code>&nbsp;Volume&nbsp;[1-9]*</code>
if the initial match fails, before giving up.  Since the volume numbering
is automatically added in labels at creation time, it sounded logical to
help the user take care of it when the archive is being read as well.

<p>The <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) option was once called <kbd>-volume</kbd>, but is not available
under that name anymore.

<p>To find out an archive's label entry (or to find out if an archive has
a label at all), use <kbd>tar -list -verbose</kbd>.  <code>tar</code> will print the
label first, and then print archive member information, as in the
example below:

<pre>$ <kbd>tar --verbose --list --file=iamanarchive</kbd>
V--------- 0 0 0 1992-03-07 12:01 iamalabel--Volume Header--
-rw-rw-rw- myself users 40 1990-05-21 13:30 iamafilename
</pre>

<p>The <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) option includes an <dfn>archive-label</dfn> at the
beginning of the archive when the archive is being created, when used in
conjunction with the <kbd>-create</kbd> (<kbd>-c</kbd>) option.  Check to make sure the
archive label matches the one specified (when used in conjunction with
the <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) option).

<p>To get a common label on all tapes of a series, use the
<kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) option.  To ensure that this label is different in each
series created through a single script used on a regular basis, just
manage to get a date string as part of the label.  For example:

<pre>$ <kbd>tar cfMV /dev/tape "Daily backup for `date +%Y-%m-%d`"</kbd>
$ <kbd>tar --create --file=/dev/tape --multi-volume \
     --label="Daily backup for `date +%Y-%m-%d`"</kbd>
</pre>

<p>Also note that each label has its own date and time, which corresponds
to when <code>tar</code> initially attempted to write it, often soon
after the operator launches <code>tar</code> or types the carriage return
telling that the next tape is ready.  Comparing date labels gives
an idea of tape throughput only if the delays for rewinding tapes
and the operator switching them were negligible, which is usually
not the case.

<p><hr>
Node:verify, Next:<a rel=next href="#Write%20protection">Write protection</a>, Previous:<a rel=previous href="#label">label</a>, Up:<a rel=up href="#Being%20careful">Being careful</a>
<p>

<h3><a name="verify">Verifying data as it is stored</a></h3>

<p>Option <kbd>-verify</kbd> (<kbd>-W</kbd>) attempts to verify the archive after writing.

<p>This option causes <code>tar</code> to verify the archive after writing it. 
Each volume is checked after it is written, and any discrepancies
are recorded on the standard error output.

<p>Verification requires that the archive be on a backspaceable medium. 
This means that pipes, some cartridge tape drives, and some other devices
cannot be verified.

<p>You can ensure the accuracy of an archive by comparing files in the
filesystem with archive members.  <code>tar</code> can compare an archive to the
filesystem as the archive is being written, to verify a write
operation, or can compare a previously written archive, to ensure that
it is up to date.

<p>To check for discrepancies in an archive immediately after it is
written, use the <kbd>-verify</kbd> (<kbd>-W</kbd>) option in conjunction with
the <kbd>-create</kbd> (<kbd>-c</kbd>) subcommand.  When this option is
specified, <code>tar</code> checks archive members against their counterparts
in the file system, and reports discrepancies on the standard error.  In
multi-volume archives, each volume is verified after it is written,
before the next volume is written.

<p>To verify an archive, you must be able to read it from before the end
of the last written entry.  This option is useful for detecting data
errors on some tapes.  Archives written to pipes, some cartridge tape
drives, and some other devices cannot be verified.

<p>One can explicitly compare an already made archive with the file system
by using the <kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>) option, instead of using the more automatic
<kbd>-verify</kbd> (<kbd>-W</kbd>) option.  See <a href="#compare">compare</a>.

<p>Note that these two options have a slightly different intent.  The
<kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>) option checks how similar are the logical contents of some
archive to what is on your disks, while the <kbd>-verify</kbd> (<kbd>-W</kbd>) option is
really for checking if the physical contents agree and if the recording
media itself is of dependable quality.  So, for the <kbd>-verify</kbd> (<kbd>-W</kbd>)
option, <code>tar</code> tries to defeat all in-memory cache pertaining to
the archive, while it leaves the speed optimization undisturbed for the
<kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>) option.  If you nevertheless use <kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>) for
media verification, you may have to defeat the in-memory cache yourself,
maybe by opening and reclosing the door latch of your recording unit,
forcing some doubt in your operating system about the fact this is really
the same volume as the one just written or read.

<p>The <kbd>-verify</kbd> (<kbd>-W</kbd>) option would not be necessary if drivers were indeed
able to detect dependably all write failures.  This sometimes requires many
magnetic heads, some able to read after the writes occurred.  One would
not say that drivers unable to detect all cases are necessarily flawed,
as far as programming is concerned.

<p><hr>
Node:Write protection, Previous:<a rel=previous href="#verify">verify</a>, Up:<a rel=up href="#Being%20careful">Being careful</a>
<p>

<h3><a name="Write%20protection">Write protection</a></h3>

<p>Almost all tapes and diskettes, and in a few rare cases even disks, can
be <dfn>write protected</dfn>, to protect data on them from being changed. 
Once an archive is written, you should write protect the media to prevent
the archive from being accidently overwritten or deleted.  (This will
protect the archive from being changed with a tape or floppy drive--it
will not protect it from magnetic fields or other physical hazards).

<p>The write protection device itself is usually an integral part of the
physical media, and can be a two position (write enabled/write
disabled) switch, a notch which can be popped out or covered, a ring
which can be removed from the center of a tape reel, or some other
changeable feature.

<p><hr>
Node:Other tape considerations, Previous:<a rel=previous href="#Being%20careful">Being careful</a>, Up:<a rel=up href="#Media">Media</a>
<p>

<h2><a name="Other%20tape%20considerations">Other tape considerations</a></h2>

<p>Some versions of Unix (Ultrix 3.1 is known to have this problem),
can claim that a short write near the end of a tape succeeded,
when it actually failed.  This will result in the -M option not
working correctly.  The best workaround at the moment is to use a
significantly larger blocking factor than the default 20.

<p>In order to update an archive, <code>tar</code> must be able to backspace the
archive in order to reread or rewrite a record that was just read (or
written).  This is currently possible only on two kinds of files: normal
disk files (or any other file that can be backspaced with <code>lseek</code>),
and industry-standard 9-track magnetic tape (or any other kind of tape
that can be backspaced with the <code>MTIOCTOP</code> <code>ioctl</code>).

<p>This means that the <kbd>-append</kbd> (<kbd>-r</kbd>), <kbd>-update</kbd> (<kbd>-u</kbd>),
<kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>), and <kbd>-delete</kbd> commands will not work on any
other kind of file.  Some media simply cannot be backspaced, which
means that these commands and options will never be able to work on them. 
These non-backspacing media include pipes and cartridge tape drives.

<p>Some other media can be backspaced, and <code>tar</code> will work on them
once <code>tar</code> is modified to do so.

<p>Archives created with the <kbd>-multi-volume</kbd> (<kbd>-M</kbd>), <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>), and
<kbd>-incremental</kbd> (<kbd>-G</kbd>) options may not be readable by other versions
of <code>tar</code>.  In particular, restoring a file that was split over
a volume boundary will require some careful work with <code>dd</code>, if
it can be done at all.  Other versions of <code>tar</code> may also create
an empty file whose name is that of the volume header.  Some versions
of <code>tar</code> may create normal files instead of directories archived
with the <kbd>-incremental</kbd> (<kbd>-G</kbd>) option.

<pre>errors from system:
permission denied
no such file or directory
not owner

errors from <code>tar</code>:
directory checksum error
header format error

errors from media/system:
i/o error
device busy
</pre>

<p><hr>
Node:Backups, Next:<a rel=next href="#All%20options">All options</a>, Previous:<a rel=previous href="#Media">Media</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="Backups">Performing backups and restoring files</a></h1>

<p><code>tar</code> is distributed along with the scripts which the Free
Software Foundation uses for performing backups.  There are no corresponding
scripts available yet for doing restoration of files.  Even though there is
a good chance those scripts may be satisfactory to you, they are not the
only scripts or methods available for doing backups and restores.  You may
well create your own, or use more sophisticated packages dedicated to
that purpose.

<p>Some users are enthusiastic about <code>Amanda</code> (The Advanced Maryland
Automatic Network Disk Archiver), a backup system developed by James da
Silva (<a href="mailto:jds@cs.umd.edu">jds@cs.umd.edu</a>) and available on many Unix systems.  This is
free software, and it is available at these places:

<pre>http://www.cs.umd.edu/projects/amanda/amanda.html
ftp://ftp.cs.umd.edu/pub/amanda
</pre>

<p>Here is a possible plan for a future documentation about the backup
scripts which are provided within the <code>tar</code> distribution.

<pre>.* dumps
. + what are dumps

. + different levels of dumps
.  - full dump = dump everything
.  - level 1, level 2 dumps etc, -
	A level n dump dumps everything changed since the last level
	n-1 dump (?)

. + how to use scripts for dumps  (ie, the concept)
.  - scripts to run after editing backup specs (details)

. + Backup Specs, what is it.
.  - how to customize
.  - actual text of script  [/sp/dump/backup-specs]

. + Problems
.  - rsh doesn't work
.  - rtape isn't installed
.  - (others?)

. + the --incremental option of tar

. + tapes
.  - write protection
.  - types of media
.   : different sizes and types, useful for different things
.  - files and tape marks
     one tape mark between files, two at end.
.  - positioning the tape
     MT writes two at end of write,
       backspaces over one when writing again.
</pre>

<p>This chapter documents both the provided FSF scripts and the <code>tar</code>
options which are more specific to use as a backup tool.

<p>To <dfn>back up</dfn> a file system means to create archives that contain
all the files in that file system.  Those archives can then be used to
restore any or all of those files (for instance if a disk crashes or a
file is accidently deleted).  File system <dfn>backups</dfn> are also
called <dfn>dumps</dfn>.

<ul>
<li><a href="#incremental%20listed-incremental">incremental listed-incremental</a>:   The incremental options

<li><a href="#Backup%20levels">Backup levels</a>:                Levels of backups

<li><a href="#Backup%20parameters">Backup parameters</a>:            Setting parameters for backups and restoration

<li><a href="#Scripted%20backups">Scripted backups</a>:             Using the backup scripts

<li><a href="#Scripted%20restoration">Scripted restoration</a>:         Using the restore script
</ul>

<p><hr>
Node:incremental listed-incremental, Next:<a rel=next href="#Backup%20levels">Backup levels</a>, Previous:<a rel=previous href="#Backups">Backups</a>, Up:<a rel=up href="#Backups">Backups</a>
<p>

<h2><a name="incremental%20listed-incremental">The incremental options</a></h2>

<ul>
<li><a href="#incremental">incremental</a>:                  Backing up without a snapshot list

<li><a href="#listed-incremental">listed-incremental</a>:           Backing up with a snapshot list
</ul>

<p><hr>
Node:incremental, Next:<a rel=next href="#listed-incremental">listed-incremental</a>, Previous:<a rel=previous href="#incremental%20listed-incremental">incremental listed-incremental</a>, Up:<a rel=up href="#incremental%20listed-incremental">incremental listed-incremental</a>
<p>

<h3><a name="incremental">Backing up without a snapshot list</a></h3>

<p><kbd>-incremental</kbd> (<kbd>-G</kbd>) is used in conjunction with <kbd>-create</kbd> (<kbd>-c</kbd>),
<kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), or <kbd>-list</kbd> (<kbd>-t</kbd>) when backing up and restoring file
systems.  An archive cannot be extracted or listed with the
<kbd>-incremental</kbd> (<kbd>-G</kbd>) option specified unless it was created with this
option specified.  This option should only be used by a script, not by
the user, and is usually disregarded in favor of
<kbd>-listed-incremental=<var>snapshot-file</var></kbd> (<kbd>-g <var>snapshot-file</var></kbd>), which is described below.

<p><kbd>-incremental</kbd> (<kbd>-G</kbd>) in conjunction with <kbd>-create</kbd> (<kbd>-c</kbd>) causes
<code>tar</code> to write, at the beginning of the archive, an entry for
each of the directories that will be archived.  The entry for a
directory includes a list of all the files in the directory at the
time the archive was created and a flag for each file indicating
whether or not the file is going to be put in the archive.

<p>Note that this option causes <code>tar</code> to create a non-standard
archive that may not be readable by other versions of the <code>tar</code>
program.

<p><kbd>-incremental</kbd> (<kbd>-G</kbd>) in conjunction with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>) causes
<code>tar</code> to read the lists of directory contents previously stored
in the archive, <em>delete</em> files in the file system that did <em>not</em>
exist in their directories when the archive was created, and then
extract the files in the archive.

<p>This behavior is convenient when restoring a damaged file system from
a succession of incremental backups: it restores the entire state of
the file system to that which obtained when the backup was made.  If
<kbd>-incremental</kbd> (<kbd>-G</kbd>) isn't specified, the file system will probably
fill up with files that shouldn't exist any more.

<p><kbd>-incremental</kbd> (<kbd>-G</kbd>) in conjunction with <kbd>-list</kbd> (<kbd>-t</kbd>) causes
<code>tar</code> to print, for each directory in the archive, the list of
files in that directory at the time the archive was created.  This
information is put out in a format that is not easy for humans to
read, but which is unambiguous for a program: each file name is
preceded by either a <code>Y</code> if the file is present in the archive,
an <code>N</code> if the file is not included in the archive, or a <code>D</code>
if the file is a directory (and is included in the archive).  Each
file name is terminated by a null character.  The last file is followed
by an additional null and a newline to indicate the end of the data.

<p><hr>
Node:listed-incremental, Previous:<a rel=previous href="#incremental">incremental</a>, Up:<a rel=up href="#incremental%20listed-incremental">incremental listed-incremental</a>
<p>

<h3><a name="listed-incremental">Backing up with a snapshot list</a></h3>

<p><kbd>-listed-incremental=<var>snapshot-file</var></kbd> (<kbd>-g <var>snapshot-file</var></kbd>) acts like <kbd>-incremental</kbd> (<kbd>-G</kbd>), but when used in
conjunction with <kbd>-create</kbd> (<kbd>-c</kbd>) will also cause <code>tar</code> to use the file
<var>snapshot-file</var>, which contains information about the state of the file
system at the time of the last backup, to decide which files to include in
the archive being created.  That file will then be updated by <code>tar</code>. 
If the file <var>file</var> does not exist when this option is specified,
<code>tar</code> will create it, and include all appropriate files in the archive. 
However, if the created archive is sent to the sink (by creating over
<code>/dev/null</code>), the snapshot file is neither created nor updated.

<p>The file <var>file</var>, which is archive independent, contains the date
it was last modified and a list of devices, inode numbers and
directory names.  <code>tar</code> will archive files with newer mod dates
or inode change times, and directories with an unchanged inode number
and device but a changed directory name.  The file is updated after
the files to be archived are determined, but before the new archive is
actually created.

<p>Although it should be obvious that a device has a non-volatile value, NFS
devices have non-dependable values when an automounter gets into the picture. 
This leads to a great deal of spurious redumping in incremental dumps,
so it is somewhat useless to compare two NFS device numbers over time. 
So <code>tar</code> now considers all NFS devices as being equal when it comes
to comparing directories; this is fairly gross, but there does not seem
to be a better way to go.

<p><hr>
Node:Backup levels, Next:<a rel=next href="#Backup%20parameters">Backup parameters</a>, Previous:<a rel=previous href="#incremental%20listed-incremental">incremental listed-incremental</a>, Up:<a rel=up href="#Backups">Backups</a>
<p>

<h2><a name="Backup%20levels">Levels of backups</a></h2>

<p>An archive containing all the files in the file system is called a
<dfn>full backup</dfn> or <dfn>full dump</dfn>.  You could ensure your data by
creating a full dump every day.  This strategy, however, would waste a
substantial amount of archive media and user time, as unchanged files
are daily re-archived.

<p>It is more efficient to do a full dump only occasionally.  To back up
files between full dumps, you can do an incremental dump.  A <dfn>level
one</dfn> dump archives all the files that have changed since the last full
dump.

<p>A typical dump strategy would be to perform a full dump once a week,
and a level one dump once a day.  This means some versions of files
will in fact be archived more than once, but this dump strategy makes
it possible to restore a file system to within one day of accuracy by
only extracting two archives--the last weekly (full) dump and the
last daily (level one) dump.  The only information lost would be in
files changed or created since the last daily backup.  (Doing dumps
more than once a day is usually not worth the trouble).

<p><code>tar</code> comes with scripts you can use to do full and level-one
dumps.  Using scripts (shell programs) to perform backups and
restoration is a convenient and reliable alternative to typing out
file name lists and <code>tar</code> commands by hand.

<p>Before you use these scripts, you need to edit the file
<code>backup-specs</code>, which specifies parameters used by the backup
scripts and by the restore script.    See <a href="#Script%20syntax">Script syntax</a>.  Once the backup parameters
are set, you can perform backups or restoration by running the
appropriate script.

<p>The name of the restore script is <code>restore</code>.    The names of the level one and full backup
scripts are, respectively, <code>level-1</code> and <code>level-0</code>. 
The <code>level-0</code> script also exists under the name <code>weekly</code>, and
the <code>level-1</code> under the name <code>daily</code>--these additional names
can be changed according to your backup schedule.  See <a href="#Scripted%20restoration">Scripted restoration</a>, for more information on running the restoration script. 
See <a href="#Scripted%20backups">Scripted backups</a>, for more information on running the
backup scripts.

<p><strong>Please note:</strong> The backup scripts and the restoration scripts are
designed to be used together.  While it is possible to restore files by
hand from an archive which was created using a backup script, and to create
an archive by hand which could then be extracted using the restore script,
it is easier to use the scripts.  
See <a href="#incremental">incremental</a>, and <a href="#listed-incremental">listed-incremental</a>,
before making such an attempt.

<ul>
<li><a href="#Full%20dumps">Full dumps</a>:                   Using <code>tar</code> to perform full dumps

<li><a href="#Incremental%20dumps">Incremental dumps</a>:            Using <code>tar</code> to perform incremental dumps
</ul>

<p><hr>
Node:Full dumps, Next:<a rel=next href="#Incremental%20dumps">Incremental dumps</a>, Previous:<a rel=previous href="#Backup%20levels">Backup levels</a>, Up:<a rel=up href="#Backup%20levels">Backup levels</a>
<p>

<h3><a name="Full%20dumps">Using <code>tar</code> to perform full dumps</a></h3>

<p>Full dumps should only be made when no other people or programs
are modifying files in the filesystem.  If files are modified while
<code>tar</code> is making the backup, they may not be stored properly in
the archive, in which case you won't be able to restore them if you
have to.  (Files being modified are written with no trouble, and do
not corrupt the entire archive.)

<p>You will want to use the <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) option to give the archive a
volume label, so you can tell what this archive is even if the label
falls off the tape, or anything like that.

<p>Unless the filesystem you are dumping is guaranteed to fit on
one volume, you will need to use the <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) option. 
Make sure you have enough tapes on hand to complete the backup.

<p>If you want to dump each filesystem separately you will need to use
the <kbd>-one-file-system</kbd> (<kbd>-l</kbd>) option to prevent <code>tar</code> from crossing
filesystem boundaries when storing (sub)directories.

<p>The <kbd>-incremental</kbd> (<kbd>-G</kbd>) option is not needed, since this is a complete
copy of everything in the filesystem, and a full restore from this
backup would only be done onto a completely empty disk.

<p>Unless you are in a hurry, and trust the <code>tar</code> program (and your
tapes), it is a good idea to use the <kbd>-verify</kbd> (<kbd>-W</kbd>) option, to make
sure your files really made it into the dump properly.  This will
also detect cases where the file was modified while (or just after)
it was being archived.  Not all media (notably cartridge tapes) are
capable of being verified, unfortunately.

<p><kbd>-listed-incremental=<var>snapshot-file</var></kbd> (<kbd>-g <var>snapshot-file</var></kbd>) always takes a file name argument.  If the
file doesn't exist, <code>tar</code> runs a level zero dump, creating the
file.  If the file exists, <code>tar</code> uses that file to see what has
changed.

<p><kbd>-incremental</kbd> (<kbd>-G</kbd>) handles old extended format incremental backup.

<p>The <kbd>-incremental</kbd> (<kbd>-G</kbd>) option means the archive is an incremental
backup.  Its meaning depends on the command that it modifies.

<p>When this option is used for creating an incremental backup of
a filesystem, <code>tar</code>
writes, at the beginning of the archive, an entry for each of the
directories that will be operated on.  The entry for a directory
includes a list of all the files in the directory at the time the
dump was done, and a flag for each file indicating whether the file
is going to be put in the archive.  This information is used when
doing a complete incremental restore.

<p>Note that this option causes <code>tar</code> to create a non-standard
archive that may not be readable by other versions of the <code>tar</code>
program.

<p>If the <kbd>-incremental</kbd> (<kbd>-G</kbd>) option is used with <kbd>-list</kbd> (<kbd>-t</kbd>), <code>tar</code>
will list, for each directory in the archive, the list of files in
that directory at the time the archive was created.  This information
is put out in a format that is not easy for humans to read, but which
is unambiguous for a program: each file name is preceded by either a
<code>Y</code> if the file is present in the archive, an <code>N</code> if the
file is not included in the archive, or a <code>D</code> if the file is
a directory (and is included in the archive).  Each file name is
terminated by a null character.  The last file is followed by an
additional null and a newline to indicate the end of the data.

<p>If the <kbd>-incremental</kbd> (<kbd>-G</kbd>) option is used with <kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>), then
when the entry for a directory is found, all files that currently
exist in that directory but are not listed in the archive <em>are
deleted from the directory</em>.

<p>This behavior is convenient when you are restoring a damaged file
system from a succession of incremental backups: it restores the
entire state of the file system to that which obtained when the backup
was made.  If you don't use <kbd>-incremental</kbd> (<kbd>-G</kbd>), the file system will
probably fill up with files that shouldn't exist any more.

<p><kbd>-listed-incremental=<var>snapshot-file</var></kbd> (<kbd>-g <var>snapshot-file</var></kbd>) handles new extended format incremental backup.

<p><kbd>-listed-incremental=<var>snapshot-file</var></kbd> (<kbd>-g <var>snapshot-file</var></kbd>) acts like <kbd>-incremental</kbd> (<kbd>-G</kbd>), but when
used in conjunction with <kbd>-create</kbd> (<kbd>-c</kbd>) will also cause <code>tar</code> to
use the file <var>file</var>, which contains information about the state
of the filesystem at the time of the last backup, to decide which
files to include in the archive being created.  That file will then
be updated by <code>tar</code>.  If the file <var>file</var> does not exist when
this option is specified, <code>tar</code> will create it, and include all
appropriate files in the archive.

<p>The file, which is archive independent, contains the date it was last
modified and a list of devices, inode numbers and directory names. 
<code>tar</code> will archive files with newer mod dates or inode change
times, and directories with an unchanged inode number and device but
a changed directory name.  The file is updated after the files to
be archived are determined, but before the new archive is actually
created.

<p>When restoring, only files newer than the saved time are
restored, and the directory list is used to speed up subcommands.

<p><code>tar</code> actually writes the file twice: once before the data
is written, and once after.

<p><hr>
Node:Incremental dumps, Previous:<a rel=previous href="#Full%20dumps">Full dumps</a>, Up:<a rel=up href="#Backup%20levels">Backup levels</a>
<p>

<h3><a name="Incremental%20dumps">Using <code>tar</code> to perform incremental dumps</a></h3>

<p>Performing incremental dumps is similar to performing full dumps,
although a few more options will usually be needed.

<p>You will need to use the <kbd>-N <var>date</var></kbd> option to tell <code>tar</code>
to only store files that have been modified since <var>date</var>. 
<var>date</var> should be the date and time of the last full/incremental
dump.  See <a href="#after-date">after-date</a>.

<p>A standard scheme is to do a <em>monthly</em> (full) dump once a month,
a <em>weekly</em> dump once a week of everything since the last monthly,
and a <em>daily</em> dump every day of everything since the last (weekly or
monthly) dump.

<p>Here is a copy of the script used to dump the filesystems of the
machines here at the Free Software Foundation.  This script is run via
<code>cron</code> late at night when people are least likely to be using the
machines.  This script dumps several filesystems from several machines
at once (via NFS).  The operator is responsible for ensuring that all
the machines will be up at the time the dump happens.  If a machine is
not running, its files will not be dumped, and the next day's
incremental dump will <em>not</em> store files that would have gone onto
that dump.

<pre>#!/bin/csh
# Dump thingie
set now = `date`
set then = `cat date.nfs.dump`
/u/hack/bin/tar -c -G -v\
 -f /dev/rtu20\
 -b 126\
 -N "$then"\
 -V "Dump from $then to $now"\
 /alpha-bits/gp\
 /gnu/hack\
 /hobbes/u\
 /spiff/u\
 /sugar-bombs/u
echo $now &gt; date.nfs.dump
mt -f /dev/rtu20 rew
</pre>

<p>Output from this script is stored in a file, for the operator to
read later.

<p>This script uses the file <code>date.nfs.dump</code> to store the date and time
of the last dump.

<p>Since this is a streaming tape drive, no attempt to verify the archive
is made.  This is also why the high blocking factor (126) is used. 
The tape drive must also be rewound by the <code>mt</code> command after
the dump is made.

<p><hr>
Node:Backup parameters, Next:<a rel=next href="#Scripted%20backups">Scripted backups</a>, Previous:<a rel=previous href="#Backup%20levels">Backup levels</a>, Up:<a rel=up href="#Backups">Backups</a>
<p>

<h2><a name="Backup%20parameters">Setting parameters for backups and restoration</a></h2>

<p>The file <code>backup-specs</code> specifies backup parameters for the
backup and restoration scripts provided with <code>tar</code>.  You must
edit <code>backup-specs</code> to fit your system configuration and schedule
before using these scripts.

<p>See <a href="#Script%20syntax">Script syntax</a>, for an explanation of this syntax.

<p><code>backup-specs</code> specifies the following parameters:

<dl>
<dt><code>ADMINISTRATOR</code>
<dd>The user name of the backup administrator.

<br><dt><code>BACKUP_HOUR</code>
<dd>The hour at which the backups are done.  This can be a number from 0
to 23, or the string <code>now</code>.

<br><dt><code>TAPE_FILE</code>
<dd>The device <code>tar</code> writes the archive to.  This device should be
attached to the host on which the dump scripts are run.

<br><dt><code>TAPE_STATUS</code>
<dd>The command to use to obtain the status of the archive device,
including error count.  On some tape drives there may not be such a
command; in that case, simply use `TAPE_STATUS=false'.

<br><dt><code>BLOCKING</code>
<dd>The blocking factor <code>tar</code> will use when writing the dump archive. 
See <a href="#blocking-factor">blocking-factor</a>.

<br><dt><code>BACKUP_DIRS</code>
<dd>A list of file systems to be dumped.  You can include any directory
name in the list--subdirectories on that file system will be
included, regardless of how they may look to other networked machines. 
Subdirectories on other file systems will be ignored.

<br><dt><code>HOST_NAME</code>
<dd>The host name specifies which host to run <code>tar</code> on, and should
normally be the host that actually contains the file system.  However,
the host machine must have <code>tar</code> installed, and must be able
to access the directory containing the backup scripts and their
support files using the same file name that is used on the machine
where the scripts are run (that is, what <code>pwd</code> will print when in that
directory on that machine).  If the host that contains the file system
does not have this capability, you can specify another host as long as
it can access the file system through NFS.

<br><dt><code>BACKUP_FILES</code>
<dd>A list of individual files to be dumped.  These should be accessible
from the machine on which the backup script is run.

</dl>

<ul>
<li><a href="#backup-specs%20example">backup-specs example</a>:         An example text of <code>backup-specs</code>

<li><a href="#Script%20syntax">Script syntax</a>:                Syntax for <code>backup-specs</code>
</ul>

<p><hr>
Node:backup-specs example, Next:<a rel=next href="#Script%20syntax">Script syntax</a>, Previous:<a rel=previous href="#Backup%20parameters">Backup parameters</a>, Up:<a rel=up href="#Backup%20parameters">Backup parameters</a>
<p>

<h3><a name="backup-specs%20example">An example text of <code>backup-specs</code></a></h3>

<p>The following is the text of <code>backup-specs</code> as it appears at FSF:

<pre># site-specific parameters for file system backup.

ADMINISTRATOR=friedman
BACKUP_HOUR=1
TAPE_FILE=/dev/nrsmt0
TAPE_STATUS="mts -t $TAPE_FILE"
BLOCKING=124
BACKUP_DIRS="
	albert:/fs/fsf
	apple-gunkies:/gd
	albert:/fs/gd2
	albert:/fs/gp
	geech:/usr/jla
	churchy:/usr/roland
	albert:/
	albert:/usr
	apple-gunkies:/
	apple-gunkies:/usr
	gnu:/hack
	gnu:/u
	apple-gunkies:/com/mailer/gnu
	apple-gunkies:/com/archive/gnu"

BACKUP_FILES="/com/mailer/aliases /com/mailer/league*[a-z]"

</pre>

<p><hr>
Node:Script syntax, Previous:<a rel=previous href="#backup-specs%20example">backup-specs example</a>, Up:<a rel=up href="#Backup%20parameters">Backup parameters</a>
<p>

<h3><a name="Script%20syntax">Syntax for <code>backup-specs</code></a></h3>

<p><code>backup-specs</code> is in shell script syntax.  The following
conventions should be considered when editing the script:

<p>A quoted string is considered to be contiguous, even if it is on more
than one line.  Therefore, you cannot include commented-out lines
within a multi-line quoted string.  BACKUP_FILES and BACKUP_DIRS are
the two parameters most likely to be multi-line.

<p>A quoted string typically cannot contain wildcards.  In
<code>backup-specs</code>, however, the parameters BACKUP_DIRS and
BACKUP_FILES can contain wildcards.

<p><hr>
Node:Scripted backups, Next:<a rel=next href="#Scripted%20restoration">Scripted restoration</a>, Previous:<a rel=previous href="#Backup%20parameters">Backup parameters</a>, Up:<a rel=up href="#Backups">Backups</a>
<p>

<h2><a name="Scripted%20backups">Using the backup scripts</a></h2>

<p>The syntax for running a backup script named <var>script-name</var> is:

<pre>$ <var>script-name</var> [<var>time-to-be-run</var>]
</pre>

<p>where <var>time-to-be-run</var> can be a specific system time, or can be
<kbd>now</kbd>.  If you do not specify a time, the script runs at the time
specified in <code>backup-specs</code> (see <a href="#Script%20syntax">Script syntax</a>).

<p>You should start a script with a tape or disk mounted.  Once you
start a script, it prompts you for new tapes or disks as it
needs them.  Media volumes don't have to correspond to archive
files--a multi-volume archive can be started in the middle of a
tape that already contains the end of another multi-volume archive. 
The <code>restore</code> script prompts for media by its archive volume,
so to avoid an error message you should keep track of which tape
(or disk) contains which volume of the archive.    See <a href="#Scripted%20restoration">Scripted restoration</a>.

<p>The backup scripts write two files on the file system.  The first is a
record file in <code>/etc/tar-backup/</code>, which is used by the scripts
to store and retrieve information about which files were dumped.  This
file is not meant to be read by humans, and should not be deleted by
them.  See <a href="#incremental%20listed-incremental">incremental listed-incremental</a>, for a more
detailed explanation of this file.

<p>The second file is a log file containing the names of the file systems
and files dumped, the time when the backup was made, and any error
messages that were generated, as well as how much space was left in
the media volume after the last volume of the archive was written. 
You should check this log file after every backup.  The file name is
<code>log-<var>mmm-ddd-yyyy</var>-level-1</code> or
<code>log-<var>mmm-ddd-yyyy</var>-full</code>.

<p>The script also prints the name of each system being dumped to the
standard output.

<p><hr>
Node:Scripted restoration, Previous:<a rel=previous href="#Scripted%20backups">Scripted backups</a>, Up:<a rel=up href="#Backups">Backups</a>
<p>

<h2><a name="Scripted%20restoration">Using the restore script</a></h2>

<blockquote>
<strong>Warning:</strong> The <code>tar</code> distribution does <em>not</em>
provide any such <code>restore</code> script yet.  This section is only
listed here for documentation maintenance purposes.  In any case,
all contents are subject to change as things develop. 
</blockquote>

<p>To restore files that were archived using a scripted backup, use the
<code>restore</code> script.  The syntax for the script is:

<p>where ***** are the file systems to restore from, and
***** is a regular expression which specifies which files to
restore.  If you specify <code>--all</code>, the script restores all the files
in the file system.

<p>You should start the restore script with the media containing the
first volume of the archive mounted.  The script will prompt for other
volumes as they are needed.  If the archive is on tape, you don't need
to rewind the tape to its beginning--if the tape head is
positioned past the beginning of the archive, the script will rewind
the tape as needed.  See <a href="#Media">Media</a>, for a discussion of tape
positioning.

<p>If you specify <code>--all</code> as the <var>files</var> argument, the
<code>restore</code> script extracts all the files in the archived file
system into the active file system.

<blockquote>
<strong>Warning:</strong> The script will delete files from the active file
system if they were not in the file system when the archive was made. 
</blockquote>

<p>See <a href="#incremental">incremental</a>, and <a href="#listed-incremental">listed-incremental</a>,
for an explanation of how the script makes that determination.

<p><hr>
Node:All options, Next:<a rel=next href="#Date%20input%20formats">Date input formats</a>, Previous:<a rel=previous href="#Backups">Backups</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="All%20options">All <code>tar</code> options</a></h1>

<p>This appendix contain an alphabetical listing of all <code>tar</code> subcommands
and options, with brief descriptions and cross-references to more in-depth
explanations in the body of the manual.  It also contains an alphabetically
arranged table of the short option forms with their corresponding long
option.  You can use this table as a reference for deciphering <code>tar</code>
commands in scripts.

<ul>
<li><a href="#Subcommand%20summary">Subcommand summary</a>:           Subcommands

<li><a href="#Option%20summary">Option summary</a>:               <code>tar</code> options

<li><a href="#Short%20option%20summary">Short option summary</a>:         Short options cross-reference
</ul>

<p><hr>
Node:Subcommand summary, Next:<a rel=next href="#Option%20summary">Option summary</a>, Previous:<a rel=previous href="#All%20options">All options</a>, Up:<a rel=up href="#All%20options">All options</a>
<p>

<h2><a name="Subcommand%20summary">Subcommands</a></h2>

<p>Any particular division of all options into subcommands and fine-tuning
options is debatable, and surely subject to change.  The following table
gives a particular view, which may help users to acquire a better grasp
of the main operating modes for <code>tar</code>.

<dl>
<dt><kbd>-append</kbd> (<kbd>-r</kbd>)
<dd>Appends files to the end of the archive.  See <a href="#append">append</a>.

<br><dt><kbd>-catenate</kbd>
<dd>Same as <kbd>-concatenate</kbd>.  See <a href="#concatenate">concatenate</a>.

<br><dt><kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>)
<dd>Compares archive members with their counterparts in the file
system, and reports differences in file size, mode, owner,
modification date and contents.  See <a href="#compare">compare</a>.

<br><dt><kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>)
<dd>Appends other <code>tar</code> archives to the end of the archive. 
See <a href="#concatenate">concatenate</a>.

<br><dt><kbd>-create</kbd> (<kbd>-c</kbd>)
<dd>Creates a new <code>tar</code> archive.  See <a href="#create">create</a>.

<br><dt><kbd>-delete</kbd>
<dd>Deletes members from the archive.  Don't try this on an archive on a
magnetic tape!  See <a href="#delete">delete</a>.

<br><dt><kbd>-diff</kbd>
<dd>Same as <kbd>-compare</kbd>.  See <a href="#compare">compare</a>.

<br><dt><kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>)
<dd>Extracts members from the archive into the file system.  See <a href="#extract">extract</a>.

<br><dt><kbd>-get</kbd>
<dd>Same as <kbd>-extract</kbd>.   See <a href="#extract">extract</a>.

<br><dt><kbd>-list</kbd> (<kbd>-t</kbd>)
<dd>Lists the members in an archive.  See <a href="#list">list</a>.

<br><dt><kbd>-update</kbd> (<kbd>-u</kbd>)
<dd>Adds files to the end of the archive, but only if they are newer than
their counterparts already in the archive, or if they do not already
exist in the archive.  See <a href="#update">update</a>.

</dl>

<p><hr>
Node:Option summary, Next:<a rel=next href="#Short%20option%20summary">Short option summary</a>, Previous:<a rel=previous href="#Subcommand%20summary">Subcommand summary</a>, Up:<a rel=up href="#All%20options">All options</a>
<p>

<h2><a name="Option%20summary"><code>tar</code> options</a></h2>

<p>Here is an alphabetical listing of all options accepted by <code>tar</code>,
whether they appear or not in the summary of subcommands (see <a href="#Subcommand%20summary">Subcommand summary</a>.  Each option is accompanied by a reference to where it is more
fully explained.

<dl>

<br><dt><kbd>-[0-7][lmh]</kbd>
<dd>Specify drive and density.  See <a href="#lmh">lmh</a>.

<br><dt><kbd>-absolute-names</kbd> (<kbd>-P</kbd>)
<dd>Normally when creating an archive, <code>tar</code> converts absolute file
names to relative, by stripping an initial <code>/</code> from member names
(on MS-DOS and MS-Windows, <code>tar</code> also strips the drive letter and
the colon that follows it).  This option disables that behavior. 
See <a href="#absolute-names">absolute-names</a>.

<br><dt><kbd>-absolute-paths</kbd>
<dd>This obsolete option has been replaced with <kbd>-absolute-names</kbd>.

<br><dt><kbd>-after-date=<var>date</var></kbd> (<kbd>-newer=<var>date</var></kbd>, <kbd>-N <var>date</var></kbd>)
<dd>When creating an archive, <code>tar</code> will only add files that have changed
since <var>date</var>.  See <a href="#after-date">after-date</a>.

<br><dt><kbd>-append</kbd> (<kbd>-r</kbd>)
<dd>Appends files to the end of the archive.  See <a href="#append">append</a>.

<br><dt><kbd>-atime-preserve</kbd>
<dd>Tells <code>tar</code> to preserve the access (and modification) times field in
a file's inode when dumping it.  See <a href="#atime-preserve">atime-preserve</a>.

<br><dt><kbd>-backup</kbd>[=<var>method</var>]
<dd>Rather than deleting files from the file system, <code>tar</code> will back
them up using simple or numbered backups, depending upon <var>method</var>. 
See <a href="#backup">backup</a>.

<br><dt><kbd>-block-compress</kbd>
<dd>This obsolete option has been deleted, as <code>tar</code> now decides
automatically about when to reblock the output of the compression filter.

<br><dt><kbd>-block-number</kbd> (<kbd>-R</kbd>)
<dd>With this option present, <code>tar</code> prints error messages for read errors
with the block number in the archive file.  See <a href="#block-number">block-number</a>.

<br><dt><kbd>-block-size</kbd>
<dd>This obsolete option has been replaced by <kbd>-blocking-factor</kbd>.

<br><dt><kbd>-blocking-factor=<var>blocks</var></kbd> (<kbd>-b <var>blocks</var></kbd>)
<dd>Sets the blocking factor <code>tar</code> uses to <var>blocking</var> x 512 bytes per
record.  See <a href="#blocking-factor">blocking-factor</a>.

<br><dt><kbd>-catenate</kbd>
<dd>Same as <kbd>-concatenate</kbd>.  See <a href="#concatenate">concatenate</a>.

<br><dt><kbd>-checkpoint</kbd>
<dd>This option directs <code>tar</code> to print periodic checkpoint messages as
it reads through the archive.  See <a href="#checkpoint">checkpoint</a>.

<br><dt><kbd>-compare</kbd> (<kbd>-diff</kbd>, <kbd>-d</kbd>)
<dd>Compares archive members with their counterparts in the file system,
and reports differences in file size, mode, owner, modification date,
and contents.  See <a href="#compare">compare</a>.

<br><dt><kbd>-compress</kbd> (<kbd>-Z</kbd>)
<dd><code>tar</code> will use the <code>compress</code> program when reading or writing the
archive.  This allows you to act directly on archives while saving space. 
See <a href="#compress">compress</a>.

<br><dt><kbd>-concatenate</kbd> (<kbd>-catenate</kbd>, <kbd>-A</kbd>)
<dd>Appends other <code>tar</code> archives to the end of the archive. 
See <a href="#concatenate">concatenate</a>.

<br><dt><kbd>-confirmation</kbd>
<dd>Same as <kbd>-interactive</kbd>.  See <a href="#interactive">interactive</a>.

<br><dt><kbd>-create</kbd> (<kbd>-c</kbd>)
<dd>Creates a new <code>tar</code> archive.  See <a href="#create">create</a>.

<br><dt><kbd>-delete</kbd>
<dd>Deletes members from the archive.  Don't try this on an archive on a
magnetic tape!  See <a href="#delete">delete</a>.

<br><dt><kbd>-dereference</kbd> (<kbd>-h</kbd>)
<dd>When creating a <code>tar</code> archive, <code>tar</code> will archive the file
that a symbolic link points to, rather than archiving the symlink. 
See <a href="#dereference">dereference</a>.

<br><dt><kbd>-diff</kbd>
<dd>Same as <kbd>-compare</kbd>.  See <a href="#compare">compare</a>.

<br><dt><kbd>-directory=<var>directory</var></kbd> (<kbd>-C <var>directory</var></kbd>)
<dd>When this option is specified, <code>tar</code> will change its current directory
to <var>dir</var> before performing any subcommands.  When this option is used
during archive creation, it is order-sensitive.  See <a href="#directory">directory</a>.

<br><dt><kbd>-exclude=<var>pattern</var></kbd>
<dd>When performing subcommands, <code>tar</code> will skip files that match
<var>pattern</var>.  See <a href="#exclude">exclude</a>.

<br><dt><kbd>-exclude-from=<var>file-of-patterns</var></kbd> (<kbd>-X <var>file-of-patterns</var></kbd>)
<dd>Similar to <kbd>-exclude</kbd>, except that <code>tar</code> will use the list of patterns
in the file <var>file</var>.  See <a href="#exclude-from">exclude-from</a>.

<br><dt><kbd>-extract</kbd> (<kbd>-get</kbd>, <kbd>-x</kbd>)
<dd>Extracts members from the archive into the file system.  See <a href="#extract">extract</a>.

<br><dt><kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>)
<dd><code>tar</code> will use the file <var>archive</var> as the <code>tar</code> archive it
performs subcommands on, rather than <code>tar</code>'s compilation-dependent
default.  See <a href="#file">file</a>.

<br><dt><kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>)
<dd><code>tar</code> will use the contents of <var>file</var> as a list of archive members
or files to operate on, in addition to those specified on the command line. 
See <a href="#files-from">files-from</a>.

<br><dt><kbd>-force-local</kbd>
<dd>Forces <code>tar</code> to interpret the filename given to <kbd>-file=<var>archive-name</var></kbd> (<kbd>-f <var>archive-name</var></kbd>)
as a local file, even if it looks like a remote tape drive name. 
See <a href="#force-local">force-local</a>.

<br><dt><kbd>-get</kbd>
<dd>Same as <kbd>-extract</kbd>.   See <a href="#extract">extract</a>.

<br><dt><kbd>-group=<var>group</var></kbd>
<dd>Files added to the <code>tar</code> archive will have a group id of <var>group</var>,
rather than the group from the source file.  See <a href="#group">group</a>.

<br><dt><kbd>-gunzip</kbd>
<dd>This obsolete option has been replaced by <kbd>-gzip</kbd>.

<br><dt><kbd>-gzip</kbd> (<kbd>-z</kbd>)
<dd>This option tells <code>tar</code> to read or write archives through <code>gzip</code>,
allowing <code>tar</code> to directly operate on several kinds of compressed
archives transparently.  See <a href="#gzip">gzip</a>.

<br><dt><kbd>-help</kbd>
<dd><code>tar</code> will print out a short message summarizing the subcommands and
options to <code>tar</code> and exit.  See <a href="#help">help</a>.

<br><dt><kbd>-ignore-failed-read</kbd>
<dd>Instructs <code>tar</code> to exit successfully if it encounters an
unreadable file.  See <a href="#ignore-failed-read">ignore-failed-read</a>.

<br><dt><kbd>-ignore-zeros</kbd> (<kbd>-i</kbd>)
<dd>With this option, <code>tar</code> will ignore zeroed blocks in the archive,
which normally signals the end of the archive file.  See <a href="#ignore-zeros">ignore-zeros</a>.

<br><dt><kbd>-incremental</kbd> (<kbd>-G</kbd>)
<dd>Used to inform <code>tar</code> that it is working with an old extended format
incremental backup archive.  It is intended primarily for backward
compatibility.  See <a href="#incremental">incremental</a>.

<br><dt><kbd>-info-script=<var>script-name</var></kbd> (<kbd>-new-volume-script=<var>script-name</var></kbd>, <kbd>-F <var>script-name</var></kbd>)
<dd>When <code>tar</code> is performing multi-tape backups, <var>script-name</var> is
run at the end of each tape.  See <a href="#info-script">info-script</a>.

<br><dt><kbd>-interactive</kbd> (<kbd>-confirmation</kbd>, <kbd>-w</kbd>)
<dd>Specifies that <code>tar</code> should ask the user for confirmation before
performing potentially destructive operations, such as overwriting files. 
See <a href="#interactive">interactive</a>.

<br><dt><kbd>-keep-old-files</kbd> (<kbd>-k</kbd>)
<dd>When extracting files from an archive, <code>tar</code> will not overwrite
existing files if this option is present.  See <a href="#keep-old-files">keep-old-files</a>.

<br><dt><kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>)
<dd>When creating an archive, instructs <code>tar</code> to write <var>name</var>
as a name record in the archive.  When extracting or listing archives,
<code>tar</code> will only operate on archives that have a label matching the
pattern specified in <var>name</var>.  See <a href="#label">label</a>.

<br><dt><kbd>-list</kbd> (<kbd>-t</kbd>)
<dd>Lists the members in an archive.  See <a href="#list">list</a>.

<br><dt><kbd>-listed-incremental=<var>snapshot-file</var></kbd> (<kbd>-g <var>snapshot-file</var></kbd>)
<dd>During a <kbd>-create</kbd> (<kbd>-c</kbd>) subcommand, specifies that the archive that
<code>tar</code> creates is a new extended format incremental backup, using
<var>snapshot-file</var> to determine which files to backup.  With other
subcommands, informs <code>tar</code> that the archive is in incremental format. 
See <a href="#listed-incremental">listed-incremental</a>.

<br><dt><kbd>-mode=<var>permissions</var></kbd>
<dd>When adding files to an archive, <code>tar</code> will use <var>permissions</var>
for the archive members, rather than the permissions from the files. 
See <a href="#mode">mode</a>.

<br><dt><kbd>-modification-time</kbd>
<dd>This obsolete option has been replaced by <kbd>-touch</kbd>.

<br><dt><kbd>-multi-volume</kbd> (<kbd>-M</kbd>)
<dd>Informs <code>tar</code> that it should create or otherwise operate on a
multi-volume <code>tar</code> archive.  See <a href="#multi-volume">multi-volume</a>.

<br><dt><kbd>-name-prefix=<var>prefix</var></kbd>
<dd>To prepend the given prefix to each archive file name as it is gathered
into the archive.  This prefix won't show in any <kbd>-verbose</kbd> (<kbd>-v</kbd>)
progress message, but it will if you list the archive.  See <a href="#name-prefix">name-prefix</a>.

<br><dt><kbd>-new-volume-script</kbd>
<dd>Same as <kbd>-info-script</kbd>.  See <a href="#info-script">info-script</a>.

<br><dt><kbd>-newer</kbd>
<dd>Same as <kbd>-after-date</kbd>.  See <a href="#after-date">after-date</a>.

<br><dt><kbd>-newer-mtime=<var>date</var></kbd>
<dd><code>tar</code> will only add files whose contents have changed (as opposed
to just <kbd>-after-date</kbd>, which will also back up files for which
any status information has changed).  On MS-DOS, where there is only one
time stamp for a file, <kbd>-after-date</kbd> and <kbd>-newer-mtime</kbd>
have identical effect.  See <a href="#newer-mtime">newer-mtime</a>.

<br><dt><kbd>-no-attributes</kbd>
<dd><code>tar</code> will not try restoring any file attribute while extracting files. 
This option might disappear in some later version.  See <a href="#no-attributes">no-attributes</a>.

<br><dt><kbd>-no-recursion</kbd>
<dd>With this option, <code>tar</code> will not recurse into directories
unless a directory is explicitly named as an argument to <code>tar</code>. 
See <a href="#no-recursion">no-recursion</a>.

<br><dt><kbd>-null</kbd>
<dd>When <code>tar</code> is using the <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) option, this option
instructs <code>tar</code> to expect filenames terminated with <code>NUL</code>,
so <code>tar</code> can correctly work with file names that contain newlines. 
See <a href="#null">null</a>.

<br><dt><kbd>-numeric-owner</kbd>
<dd>This option will notify <code>tar</code> that it should use numeric user
and group IDs when creating a <code>tar</code> file, rather than names. 
See <a href="#numeric-owner">numeric-owner</a>.

<br><dt><kbd>-old-archive</kbd> (<kbd>-o</kbd>)
<dd>Tells <code>tar</code> to create an archive that is compatible with Unix V7
<code>tar</code>.  See <a href="#old-archive">old-archive</a>.

<br><dt><kbd>-one-file-system</kbd> (<kbd>-l</kbd>)
<dd>Used when creating an archive.  Prevents <code>tar</code> from recursing into
directories that are on different file systems from the current directory. 
See <a href="#one-file-system">one-file-system</a>.

<br><dt><kbd>-owner=<var>user</var></kbd>
<dd>Specifies that <code>tar</code> should use <var>user</var> as the owner of members
when creating archives, instead of the user associated with the source file. 
See <a href="#owner">owner</a>.

<br><dt><kbd>-portability</kbd>
<dd>Same as <kbd>-old-archive</kbd>.  See <a href="#old-archive">old-archive</a>.

<br><dt><kbd>-posix</kbd>
<dd>Instructs <code>tar</code> to create a POSIX compliant <code>tar</code> archive. 
See <a href="#posix">posix</a>.

<br><dt><kbd>-preserve</kbd>
<dd>Synonymous with specifying both <kbd>-same-permissions</kbd> and
<kbd>-same-order</kbd>.  See <a href="#preserve">preserve</a>.

<br><dt><kbd>-preserve-order</kbd>
<dd>Same as <kbd>-same-order</kbd>.  See <a href="#same-order">same-order</a>.

<br><dt><kbd>-preserve-permissions</kbd>
<dd>Same as <kbd>-same-permissions</kbd>.  See <a href="#same-permissions">same-permissions</a>.

<br><dt><kbd>-read-full-blocks</kbd>
<dd>This obsolete option has been replaced by <kbd>-read-full-records</kbd>.

<br><dt><kbd>-read-full-records</kbd> (<kbd>-B</kbd>)
<dd>Specifies that <code>tar</code> should reblock its input, for reading from pipes
on systems with buggy implementations.  See <a href="#read-full-records">read-full-records</a>.

<br><dt><kbd>-record-number</kbd>
<dd>This obsolete option has been replaced by <kbd>-block-number</kbd>.

<br><dt><kbd>-record-size=<var>size</var></kbd>
<dd>Instructs <code>tar</code> to use <var>size</var> bytes per record when accessing the
archive.  See <a href="#record-size">record-size</a>.

<br><dt><kbd>-recursive-unlink</kbd>
<dd>Similar to the <kbd>-unlink-first</kbd> (<kbd>-U</kbd>) option, removing existing directory
hierarchies before extracting directories of the same name from the archive. 
See <a href="#recursive-unlink">recursive-unlink</a>.

<br><dt><kbd>-remove-files</kbd>
<dd>Directs <code>tar</code> to remove the source file from the file system after
appending it to an archive.  See <a href="#remove-files">remove-files</a>.

<br><dt><kbd>rsh-command=<var>command</var></kbd>
<dd>Notifies <code>tar</code> that is should use <var>cmd</var> to communicate with
remote devices.  See <a href="#rsh-command">rsh-command</a>.

<br><dt><kbd>-same-order</kbd> (<kbd>-preserve-order</kbd>, <kbd>-s</kbd>)
<dd>This option is an optimization for <code>tar</code> when running on machines
with small amounts of memory.  It informs <code>tar</code> that the list of file
arguments has already been sorted to match the order of files in the archive. 
See <a href="#same-order">same-order</a>.

<br><dt><kbd>-same-owner</kbd>
<dd>When extracting an archive, <code>tar</code> will attempt to preserve the
owner specified in the <code>tar</code> archive with this option present. 
See <a href="#same-owner">same-owner</a>.

<br><dt><kbd>-same-permissions</kbd> (<kbd>-preserve-permissions</kbd>, <kbd>-p</kbd>)
<dd>When <code>tar</code> is extracting an archive, it normally subtracts the user's
umask from the permissions specified in the archive and uses that number
as the permissions to create the destination file.  Specifying this option
instructs <code>tar</code> that it should use the permissions directly from
the archive.  See <a href="#same-permissions">same-permissions</a>.

<br><dt><kbd>-show-omitted-dirs</kbd>
<dd>Instructs <code>tar</code> to mention directories it's skipping over when
operating on a <code>tar</code> archive.  See <a href="#show-omitted-dirs">show-omitted-dirs</a>.

<br><dt><kbd>-sparse</kbd> (<kbd>-S</kbd>)
<dd>Invokes an extended format when adding files to an archive that handles
sparse files efficiently.  See <a href="#sparse">sparse</a>.

<br><dt><kbd>-starting-file=<var>name</var></kbd> (<kbd>-K <var>name</var></kbd>)
<dd>This option affects extraction only; <code>tar</code> will skip extracting
files in the archive until it finds one that matches <var>name</var>. 
See <a href="#starting-file">starting-file</a>.

<br><dt><kbd>-suffix=<var>suffix</var></kbd>
<dd>Alters the suffix <code>tar</code> uses when backing up files from the default
<code>~</code>.  See <a href="#suffix">suffix</a>.

<br><dt><kbd>-tape-length=<var>KBytes</var></kbd> (<kbd>-L <var>KBytes</var></kbd>)
<dd>Specifies the length of tapes that <code>tar</code> is writing as
<var>num</var>&nbsp;x&nbsp;1024 bytes long.  See <a href="#tape-length">tape-length</a>.

<br><dt><kbd>-to-stdout</kbd> (<kbd>-O</kbd>)
<dd>During extraction, <code>tar</code> will extract files to stdout rather than to
the file system.  See <a href="#to-stdout">to-stdout</a>.

<br><dt><kbd>-totals</kbd>
<dd>Displays the total number of bytes written after creating an archive. 
See <a href="#totals">totals</a>.

<br><dt><kbd>-touch</kbd> (<kbd>-m</kbd>)
<dd>Sets the modification time of extracted files to the extraction time,
rather than the modification time stored in the archive.  See <a href="#touch">touch</a>.

<br><dt><kbd>-uncompress</kbd>
<dd>This obsolete option has been replaced with <kbd>-compress</kbd>.

<br><dt><kbd>-ungzip</kbd>
<dd>This obsolete option has been replaced with <kbd>-gzip</kbd>.

<br><dt><kbd>-unlink-first</kbd> (<kbd>-U</kbd>)
<dd>Directs <code>tar</code> to remove the corresponding file from the file system
before extracting it from the archive.  See <a href="#unlink-first">unlink-first</a>.

<br><dt><kbd>-update</kbd> (<kbd>-u</kbd>)
<dd>Adds files to the end of the archive, but only if they are newer than their
counterparts already in the archive, or if they do not already exist in
the archive.  See <a href="#update">update</a>.

<br><dt><kbd>-use-compress-program=<var>program</var></kbd>
<dd>Instructs <code>tar</code> to access the archive through <var>prog</var>,
which is presumed to be a compression program of some sort. 
See <a href="#use-compress-program">use-compress-program</a>.

<br><dt><kbd>-verbose</kbd> (<kbd>-v</kbd>)
<dd>Specifies that <code>tar</code> should be more verbose about the subcommands
it is performing.  This option can be specified multiple times for some
subcommands to increase the amount of information displayed.  See <a href="#verbose">verbose</a>.

<br><dt><kbd>-verify</kbd> (<kbd>-W</kbd>)
<dd>Verifies that the archive was correctly written when creating an archive. 
See <a href="#verify">verify</a>.

<br><dt><kbd>-version</kbd>
<dd><code>tar</code> will print an informational message about what version it is,
a copyright message, and some credits, and then exit.  See <a href="#version">version</a>.

<br><dt><kbd>-version-control</kbd>
<dd>This obsolete option has been replaced with <kbd>-backup</kbd>.

<br><dt><kbd>-volno-file=<var>file-of-number</var></kbd>
<dd>Used in conjunction with <kbd>-multi-volume</kbd> (<kbd>-M</kbd>).  <code>tar</code> will keep
track of which volume of a multi-volume archive it is working on in
<var>file</var>.  See <a href="#volno-file">volno-file</a>.

</dl>

<p><hr>
Node:Short option summary, Previous:<a rel=previous href="#Option%20summary">Option summary</a>, Up:<a rel=up href="#All%20options">All options</a>
<p>

<h2><a name="Short%20option%20summary">Short options cross-reference</a></h2>

<p>Here is an alphabetized list of all of the short option forms, matching
them with the equivalent long option.

<pre><kbd>-A</kbd>     <kbd>--concatenate</kbd>
<kbd>-B</kbd>     <kbd>--read-full-records</kbd>
<kbd>-C</kbd>     <kbd>--directory</kbd>
<kbd>-F</kbd>     <kbd>--info-script</kbd>
<kbd>-G</kbd>     <kbd>--incremental</kbd>
<kbd>-K</kbd>     <kbd>--starting-file</kbd>
<kbd>-L</kbd>     <kbd>--tape-length</kbd>
<kbd>-M</kbd>     <kbd>--multi-volume</kbd>
<kbd>-N</kbd>     <kbd>--newer</kbd>
<kbd>-O</kbd>     <kbd>--to-stdout</kbd>
<kbd>-P</kbd>     <kbd>--absolute-names</kbd>
<kbd>-R</kbd>     <kbd>--block-number</kbd>
<kbd>-S</kbd>     <kbd>--sparse</kbd>
<kbd>-T</kbd>     <kbd>--files-from</kbd>
<kbd>-U</kbd>     <kbd>--unlink-first</kbd>
<kbd>-V</kbd>     <kbd>--label</kbd>
<kbd>-W</kbd>     <kbd>--verify</kbd>
<kbd>-X</kbd>     <kbd>--exclude-from</kbd>
<kbd>-Z</kbd>     <kbd>--compress</kbd>
<kbd>-b</kbd>     <kbd>--blocking-factor</kbd>
<kbd>-c</kbd>     <kbd>--create</kbd>
<kbd>-d</kbd>     <kbd>--compare</kbd>
<kbd>-f</kbd>     <kbd>--file</kbd>
<kbd>-g</kbd>     <kbd>--listed-incremental</kbd>
<kbd>-h</kbd>     <kbd>--dereference</kbd>
<kbd>-i</kbd>     <kbd>--ignore-zeros</kbd>
<kbd>-k</kbd>     <kbd>--keep-old-files</kbd>
<kbd>-l</kbd>     <kbd>--one-file-system</kbd>
<kbd>-m</kbd>     <kbd>--touch</kbd>
<kbd>-o</kbd>     <kbd>--portability</kbd>
<kbd>-p</kbd>     <kbd>--same-permissions</kbd>
<kbd>-r</kbd>     <kbd>--append</kbd>
<kbd>-s</kbd>     <kbd>--same-order</kbd>
<kbd>-t</kbd>     <kbd>--list</kbd>
<kbd>-u</kbd>     <kbd>--update</kbd>
<kbd>-v</kbd>     <kbd>--verbose</kbd>
<kbd>-w</kbd>     <kbd>--interactive</kbd>
<kbd>-x</kbd>     <kbd>--extract</kbd>
<kbd>-z</kbd>     <kbd>--gzip</kbd>
</pre>

<p><hr>
Node:Date input formats, Next:<a rel=next href="#Archive%20format">Archive format</a>, Previous:<a rel=previous href="#All%20options">All options</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="Date%20input%20formats">Date input formats</a></h1>

<blockquote>
Our units of temporal measurement, from seconds on up to months, are so
complicated, asymmetrical and disjunctive so as to make coherent mental
reckoning in time all but impossible.  Indeed, had some tyrannical god
contrived to enslave our minds to time, to make it all but impossible
for us to escape subjection to sodden routines and unpleasant surprises,
he could hardly have done better than handing down our present system. 
It is like a set of trapezoidal building blocks, with no vertical or
horizontal surfaces, like a language in which the simplest thought
demands ornate constructions, useless particles and lengthy
circumlocutions.  Unlike the more successful patterns of language and
science, which enable us to face experience boldly or at least
level-headedly, our system of temporal calculation silently and
persistently encourages our terror of time. <small>...</small>

<p>It is as though architects had to measure length in feet, width
in meters and height in ells; as though basic instruction manuals
demanded a knowledge of five different languages.  It is no wonder then
that we often look into our own immediate past or future, last Tuesday
or a week from Sunday, with feelings of helpless confusion.

<p>-- Robert Grudin, <cite>Time and the Art of Living</cite>. 
</blockquote>

<p>This section describes the textual date representations that some free
programs accept.  These are the strings you, as a user, can supply as
arguments to the various programs.  The C interface (via the <code>getdate</code>
function) is not described here.

<p>Although the date syntax here can represent any possible time since zero
<small>A.D.</small>, computer integers are not big enough for such a (comparatively)
long time.  The earliest date semantically allowed on Unix systems is
midnight, 1970-01-01 UCT.

<ul>
<li><a href="#General%20date%20syntax">General date syntax</a>:          General date syntax

<li><a href="#Calendar%20date%20item">Calendar date item</a>:           Calendar date item

<li><a href="#Time%20of%20day%20item">Time of day item</a>:             Time of day item

<li><a href="#Timezone%20item">Timezone item</a>:                Timezone item

<li><a href="#Day%20of%20week%20item">Day of week item</a>:             Day of week item

<li><a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>:   Relative item in date strings

<li><a href="#Pure%20numbers%20in%20date%20strings">Pure numbers in date strings</a>:   Pure numbers in date strings

<li><a href="#Authors%20of%20getdate">Authors of getdate</a>:           Authors of <code>getdate</code>
</ul>

<p><hr>
Node:General date syntax, Next:<a rel=next href="#Calendar%20date%20item">Calendar date item</a>, Previous:<a rel=previous href="#Date%20input%20formats">Date input formats</a>, Up:<a rel=up href="#Date%20input%20formats">Date input formats</a>
<p>

<h2><a name="General%20date%20syntax">General date syntax</a></h2>

<p>A <dfn>date</dfn> is a string, possibly empty, containing many items
separated by whitespace.  The whitespace may be omitted when no
ambiguity arises.  The empty string means the beginning of today (that is,
midnight).  Order of the items is immaterial.  A date string may contain
many flavors of items:

<ul>
<li>calendar date items
<li>time of the day items
<li>time zone items
<li>day of the week items
<li>relative items
<li>pure numbers. 
</ul>

<p>We describe each of these item types in turn, below.

<p>A few numbers may be written out in words in most contexts.  This is
most useful for specifying day of the week items or relative items (see
below).  Here is the list: <code>first</code> for 1, <code>next</code> for 2,
<code>third</code> for 3, <code>fourth</code> for 4, <code>fifth</code> for 5,
<code>sixth</code> for 6, <code>seventh</code> for 7, <code>eighth</code> for 8,
<code>ninth</code> for 9, <code>tenth</code> for 10, <code>eleventh</code> for 11, and
<code>twelfth</code> for 12.  Also, <code>last</code> means exactly -1.

<p>When a month is written this way, it is still considered to be written
numerically, instead of being "spelled in full"; this changes the
allowed strings.

<p>Alphabetic case is completely ignored in dates.  Comments may be introduced
between round parentheses, as long as included parentheses are properly
nested.  Hyphens not followed by a digit are currently ignored.  Leading
zeros on numbers are ignored.

<p><hr>
Node:Calendar date item, Next:<a rel=next href="#Time%20of%20day%20item">Time of day item</a>, Previous:<a rel=previous href="#General%20date%20syntax">General date syntax</a>, Up:<a rel=up href="#Date%20input%20formats">Date input formats</a>
<p>

<h2><a name="Calendar%20date%20item">Calendar date item</a></h2>

<p>A <dfn>calendar date item</dfn> specifies a day of the year.  It is
specified differently, depending on whether the month is specified
numerically or literally.  All these strings specify the same calendar date:

<pre>1970-09-17           # ISO 8601.
70-9-17              # This century assumed by default.
70-09-17             # Leading zeros are ignored.
9/17/72              # Common U.S. writing.
24 September 1972
24 Sept 72           # September has a special abbreviation.
24 Sep 72            # Three-letter abbreviations always allowed.
Sep 24, 1972
24-sep-72
24sep72
</pre>

<p>The year can also be omitted.  In this case, the last specified year is
used, or the current year if none.  For example:

<pre>9/17
sep 17
</pre>

<p>Here are the rules.

<p>For numeric months, the ISO 8601 format
<code><var>year</var>-<var>month</var>-<var>day</var></code> is allowed, where <var>year</var> is
any positive number, <var>month</var> is a number between 01 and 12, and
<var>day</var> is a number between 01 and 31.  A leading zero must be present
if a number is less than ten.  If <var>year</var> is less than 100, then 1900
is added to it to force a date in this century.  The construct
<code><var>month</var>/<var>day</var>/<var>year</var></code>, popular in the United States,
is accepted.  Also <code><var>month</var>/<var>day</var></code>, omitting the year.

<p>Literal months may be spelled out in full: <code>January</code>,
<code>February</code>, <code>March</code>, <code>April</code>, <code>May</code>, <code>June</code>,
<code>July</code>, <code>August</code>, <code>September</code>, <code>October</code>,
<code>November</code>, or <code>December</code>.  Literal months may be abbreviated
to their first three letters, possibly followed by an abbreviating dot. 
It is also permitted to write <code>Sept</code> instead of <code>September</code>.

<p>When months are written literally, the calendar date may be given as any
of the following:

<pre><var>day</var> <var>month</var> <var>year</var>
<var>day</var> <var>month</var>
<var>month</var> <var>day</var> <var>year</var>
<var>day</var>-<var>month</var>-<var>year</var>
</pre>

<p>Or, omitting the year:

<pre><var>month</var> <var>day</var>
</pre>

<p><hr>
Node:Time of day item, Next:<a rel=next href="#Timezone%20item">Timezone item</a>, Previous:<a rel=previous href="#Calendar%20date%20item">Calendar date item</a>, Up:<a rel=up href="#Date%20input%20formats">Date input formats</a>
<p>

<h2><a name="Time%20of%20day%20item">Time of day item</a></h2>

<p>A <dfn>time of day item</dfn> in date strings specifies the time on a given
day.  Here are some examples, all of which represent the same time:

<pre>20:02:0
20:02
8:02pm
20:02-0500      # In EST (Eastern U.S. Standard Time).
</pre>

<p>More generally, the time of the day may be given as
<code><var>hour</var>:<var>minute</var>:<var>second</var></code>, where <var>hour</var> is
a number between 0 and 23, <var>minute</var> is a number between 0 and
59, and <var>second</var> is a number between 0 and 59.  Alternatively,
<code>:<var>second</var></code> can be omitted, in which case it is taken to
be zero.

<p>If the time is followed by <code>am</code> or <code>pm</code> (or <code>a.m.</code>
or <code>p.m.</code>), <var>hour</var> is restricted to run from 1 to 12, and
<code>:<var>minute</var></code> may be omitted (taken to be zero).  <code>am</code>
indicates the first half of the day, <code>pm</code> indicates the second
half of the day.  In this notation, 12 is the predecessor of 1:
midnight is <code>12am</code> while noon is <code>12pm</code>.

<p>The time may alternatively be followed by a timezone correction,
expressed as <code><var>s</var><var>hh</var><var>mm</var></code>, where <var>s</var> is <code>+</code>
or <code>-</code>, <var>hh</var> is a number of zone hours, and <var>mm</var> is a number
of zone minutes.  When a timezone correction is given this way, it
forces interpretation of the time in UTC, overriding any previous
specification for the timezone or the local timezone.  The <var>minute</var>
part of the time of the day may not be elided when a timezone correction
is used.  This is the only way to specify a timezone correction by
fractional parts of an hour.

<p>Either <code>am</code>/<code>pm</code> or a timezone correction may be specified,
but not both.

<p><hr>
Node:Timezone item, Next:<a rel=next href="#Day%20of%20week%20item">Day of week item</a>, Previous:<a rel=previous href="#Time%20of%20day%20item">Time of day item</a>, Up:<a rel=up href="#Date%20input%20formats">Date input formats</a>
<p>

<h2><a name="Timezone%20item">Timezone item</a></h2>

<p>A <dfn>timezone item</dfn> specifies an international timezone, indicated by
a small set of letters.  Any included period is ignored.  Military
timezone designations use a single letter.  Currently, only integral
zone hours may be represented in a timezone item.  See the previous
section for a finer control over the timezone correction.

<p>Here are many non-daylight-savings-time timezones, indexed by the zone
hour value.

<dl>
<dt><code>+000</code>
<dd><code>GMT</code> for Greenwich Mean, <code>UT</code> or <code>UTC</code> for Universal
(Coordinated), <code>WET</code> for Western European and <code>Z</code> for
military. 
<br><dt><code>+100</code>
<dd><code>WAT</code> for West Africa and
<code>A</code> for military. 
<br><dt><code>+200</code>
<dd><code>AT</code> for Azores and <code>B</code> for military. 
<br><dt><code>+300</code>
<dd><code>C</code> for military. 
<br><dt><code>+400</code>
<dd><code>AST</code> for Atlantic Standard and <code>D</code> for military. 
<br><dt><code>+500</code>
<dd><code>E</code> for military and <code>EST</code> for Eastern Standard. 
<br><dt><code>+600</code>
<dd><code>CST</code> for Central Standard and <code>F</code> for military. 
<br><dt><code>+700</code>
<dd><code>G</code> for military and <code>MST</code> for Mountain Standard. 
<br><dt><code>+800</code>
<dd><code>H</code> for military and <code>PST</code> for Pacific Standard. 
<br><dt><code>+900</code>
<dd><code>I</code> for military and <code>YST</code> for Yukon Standard. 
<br><dt><code>+1000</code>
<dd><code>AHST</code> for Alaska-Hawaii Standard, <code>CAT</code> for Central Alaska,
<code>HST</code> for Hawaii Standard and <code>K</code> for military. 
<br><dt><code>+1100</code>
<dd><code>L</code> for military and <code>NT</code> for Nome. 
<br><dt><code>+1200</code>
<dd><code>IDLW</code> for International Date Line West and <code>M</code> for
military. 
<br><dt><code>-100</code>
<dd><code>CET</code> for Central European, <code>FWT</code> for French Winter,
<code>MET</code> for Middle European, <code>MEWT</code> for Middle European
Winter, <code>N</code> for military and <code>SWT</code> for Swedish Winter. 
<br><dt><code>-200</code>
<dd><code>EET</code> for Eastern European, USSR Zone 1 and <code>O</code> for military. 
<br><dt><code>-300</code>
<dd><code>BT</code> for Baghdad, USSR Zone 2 and <code>P</code> for military. 
<br><dt><code>-400</code>
<dd><code>Q</code> for military and <code>ZP4</code> for USSR Zone 3. 
<br><dt><code>-500</code>
<dd><code>R</code> for military and <code>ZP5</code> for USSR Zone 4. 
<br><dt><code>-600</code>
<dd><code>S</code> for military and <code>ZP6</code> for USSR Zone 5. 
<br><dt><code>-700</code>
<dd><code>T</code> for military and <code>WAST</code> for West Australian Standard. 
<br><dt><code>-800</code>
<dd><code>CCT</code> for China Coast, USSR Zone 7 and <code>U</code> for military. 
<br><dt><code>-900</code>
<dd><code>JST</code> for Japan Standard, USSR Zone 8 and <code>V</code> for military. 
<br><dt><code>-1000</code>
<dd><code>EAST</code> for East Australian Standard, <code>GST</code> for Guam
Standard, USSR Zone 9 and <code>W</code> for military. 
<br><dt><code>-1100</code>
<dd><code>X</code> for military. 
<br><dt><code>-1200</code>
<dd><code>IDLE</code> for International Date Line East, <code>NZST</code> for
New Zealand Standard, <code>NZT</code> for New Zealand and <code>Y</code> for
military. 
</dl>

<p>Here are many DST timezones, indexed by the zone hour value.  Also, by
following a non-DST timezone by the string <code>DST</code> in a separate word
(that is, separated by some whitespace), the corresponding DST timezone
may be specified.

<dl>
<dt><code>0</code>
<dd><code>BST</code> for British Summer. 
<br><dt><code>+400</code>
<dd><code>ADT</code> for Atlantic Daylight. 
<br><dt><code>+500</code>
<dd><code>EDT</code> for Eastern Daylight. 
<br><dt><code>+600</code>
<dd><code>CDT</code> for Central Daylight. 
<br><dt><code>+700</code>
<dd><code>MDT</code> for Mountain Daylight. 
<br><dt><code>+800</code>
<dd><code>PDT</code> for Pacific Daylight. 
<br><dt><code>+900</code>
<dd><code>YDT</code> for Yukon Daylight. 
<br><dt><code>+1000</code>
<dd><code>HDT</code> for Hawaii Daylight. 
<br><dt><code>-100</code>
<dd><code>MEST</code> for Middle European Summer, <code>MESZ</code> for Middle European
Summer, <code>SST</code> for Swedish Summer and <code>FST</code> for French Summer. 
<br><dt><code>-700</code>
<dd><code>WADT</code> for West Australian Daylight. 
<br><dt><code>-1000</code>
<dd><code>EADT</code> for Eastern Australian Daylight. 
<br><dt><code>-1200</code>
<dd><code>NZDT</code> for New Zealand Daylight. 
</dl>

<p><hr>
Node:Day of week item, Next:<a rel=next href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>, Previous:<a rel=previous href="#Timezone%20item">Timezone item</a>, Up:<a rel=up href="#Date%20input%20formats">Date input formats</a>
<p>

<h2><a name="Day%20of%20week%20item">Day of week item</a></h2>

<p>The explicit mention of a day of the week will forward the date
(only if necessary) to reach that day of the week in the future.

<p>Days of the week may be spelled out in full: <code>Sunday</code>,
<code>Monday</code>, <code>Tuesday</code>, <code>Wednesday</code>, <code>Thursday</code>,
<code>Friday</code>, or <code>Saturday</code>.  Days may be abbreviated to their
first three letters, optionally followed by a period.  The special
abbreviations <code>Tues</code> for <code>Tuesday</code>, <code>Wednes</code> for
<code>Wednesday</code>, and <code>Thur</code> or <code>Thurs</code> for <code>Thursday</code> are
also allowed.

<p>A number may precede a day of the week item to move forward
supplementary weeks.  It is best used in an expression like <code>third
monday</code>.  In this context, <code>last <var>day</var></code> or <code>next
<var>day</var></code> is also acceptable; they move one week before or after
the day that <var>day</var> by itself would represent.

<p>A comma following a day of the week item is ignored.

<p><hr>
Node:Relative item in date strings, Next:<a rel=next href="#Pure%20numbers%20in%20date%20strings">Pure numbers in date strings</a>, Previous:<a rel=previous href="#Day%20of%20week%20item">Day of week item</a>, Up:<a rel=up href="#Date%20input%20formats">Date input formats</a>
<p>

<h2><a name="Relative%20item%20in%20date%20strings">Relative item in date strings</a></h2>

<p><dfn>Relative items</dfn> adjust a date (or the current date if none) forward
or backward.  The effect of relative items accumulate.  Here are some
examples:

<pre>1 year
1 year ago
3 years
2 days
</pre>

<p>The unit of time displacement may be selected by the string <code>year</code>
or <code>month</code> for moving by whole years or months.  These are fuzzy
units, as years and months are not all of equal duration.  More precise
units are <code>fortnight</code> (14 days), <code>week</code> (7
days), <code>day</code> (24 hours), <code>hour</code> (60 minutes),
<code>minute</code> or <code>min</code> (60 seconds), and <code>second</code> or
<code>sec</code> (one second).  An <code>s</code> suffix on these units is
accepted and ignored.

<p>The unit of time may be preceded by a multiplier, given as an optionally
signed number.  Unsigned numbers are taken as positively signed.  No
number at all implies 1 for a multiplier.  Following a relative item by
the string <code>ago</code> is equivalent to preceding the unit by a
multiplier with value -1.

<p>The string <code>tomorrow</code> equates to one day in the future (equivalent
to <code>day</code>), the string <code>yesterday</code> equates to
one day in the past (equivalent to <code>day ago</code>).

<p>The strings <code>now</code> and <code>today</code> are relative items corresponding
to zero-valued time displacement.  These strings come from the fact
a zero-valued time displacement represents the current time when not
altered by previous items.  They may be used to stress other
items, as in <code>12:00 today</code>.  The string <code>this</code> also has
the meaning of a zero-valued time displacement, but is preferred in
date strings like <code>this thursday</code>.

<p>When a relative item causes the resulting date to cross the boundary
between DST and non-DST (or vice-versa), the hour is adjusted according
to the local time.

<p><hr>
Node:Pure numbers in date strings, Next:<a rel=next href="#Authors%20of%20getdate">Authors of getdate</a>, Previous:<a rel=previous href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>, Up:<a rel=up href="#Date%20input%20formats">Date input formats</a>
<p>

<h2><a name="Pure%20numbers%20in%20date%20strings">Pure numbers in date strings</a></h2>

<p>The precise interpretation of a pure decimal number is dependent on
the context in the date string.

<p>If the decimal number is of the form <var>yyyy</var><var>mm</var><var>dd</var> and no
other calendar date item (see <a href="#Calendar%20date%20item">Calendar date item</a>) appears before it
in the date string, then <var>yyyy</var> is read as the year, <var>mm</var> as the
month number, and <var>dd</var> as the day of the month for the specified
calendar date.

<p>If the decimal number is of the form <var>hh</var><var>mm</var> and no other time
of day item appears before it in the date string, then <var>hh</var> is read
as the hour of the day and <var>mm</var> as the minute of the hour for the
specified time of the day.  <var>mm</var> can also be omitted.

<p>If both a calendar date and a time of day appear to the left of a number
in the date string, but no relative item, then the number overrides the
year.

<p><hr>
Node:Authors of getdate, Previous:<a rel=previous href="#Pure%20numbers%20in%20date%20strings">Pure numbers in date strings</a>, Up:<a rel=up href="#Date%20input%20formats">Date input formats</a>
<p>

<h2><a name="Authors%20of%20getdate">Authors of <code>getdate</code></a></h2>

<p><code>getdate</code> was originally implemented by Steven M. Bellovin
(<a href="mailto:smb@research.att.com">smb@research.att.com</a>) while at the University of North Carolina
at Chapel Hill.  The code was later tweaked by a couple of people on
Usenet, then completely overhauled by Rich $alz (<a href="mailto:rsalz@bbn.com">rsalz@bbn.com</a>)
and Jim Berets (<a href="mailto:jberets@bbn.com">jberets@bbn.com</a>) in 1990-08.  Various
revisions for the GNU system were made by David MacKenzie, Jim Meyering,
and others.

<p>Fran&ccedil;ois Pinard (<a href="mailto:pinard@iro.umontreal.ca">pinard@iro.umontreal.ca</a>) wrote the
above description out of the <code>getdate.y</code> source code.  K. Berry
(<a href="mailto:kb@cs.umb.edu">kb@cs.umb.edu</a>) later edited it.

<p><hr>
Node:Archive format, Next:<a rel=next href="#Index">Index</a>, Previous:<a rel=previous href="#Date%20input%20formats">Date input formats</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="Archive%20format">Format of archive files</a></h1>

<p>While an archive may contain many files, the archive itself is a single
ordinary file.  Like any other file, an archive file can be written to
a storage device such as a tape or disk, sent through a pipe or over
a network, saved on the active file system, or even stored in another
archive.  An archive file is not easy to read or manipulate without using
the <code>tar</code> utility or other special tools, such as <code>tar</code> mode in
GNU Emacs.

<p>Physically, an archive consists of a series of file entries terminated by an
end-of-archive entry (which consists of a block of 512 zero bytes).  A file
entry usually describes one of the files in the archive (an <dfn>archive
member</dfn>) and consists of a file header and the contents of the file. 
File headers contain file names and statistics, checksum information that
<code>tar</code> uses to detect file corruption, and information about file types.

<p>Archives are permitted to have more than one member with the same member
name.  One way this situation can occur is if more than one version of
a file has been stored in the archive.  For information about adding new
versions of a file to an archive, see <a href="#update">update</a>, and to learn more about
having more than one archive member with the same name, see <a href="#backup">backup</a>.

<p>In addition to entries describing archive members, an archive may contain
entries which <code>tar</code> itself uses to store information.  See <a href="#label">label</a>,
for an example of such an archive entry.

<p>The remainder of this appendix contains a long quote from <code>tar</code> sources,
expressing the structure of a header block directly in the C language. 
This description encompasses both POSIX and non-POSIX aspects of the format. 
The two sections following the C description provide more explanations
about the POSIX standard format, and then about the extensions to that format
which <code>tar</code> uses.  These sections also refer to various constants or
fields introduced in the C description.

<ul>
<li><a href="#tar-h">tar-h</a>:                        The C description of a header block

<li><a href="#Standard%20format">Standard format</a>:              The standard format

<li><a href="#Extended%20format">Extended format</a>:              Extensions to the archive format
</ul>

<p><hr>
Node:tar-h, Next:<a rel=next href="#Standard%20format">Standard format</a>, Previous:<a rel=previous href="#Archive%20format">Archive format</a>, Up:<a rel=up href="#Archive%20format">Archive format</a>
<p>

<h2><a name="tar-h">The C description of a header block</a></h2>

<p>The header block is defined in C as follows.  In the <code>tar</code> distribution,
this is part of file <code>src/tar.h</code>:

<br><p>
<br><p>
<pre>

/* tar archive format description.  */

/* If GNUTAR_COMPATIBILITY is set, tar produces archives which, by default,
   are readable by older versions of tar.  This can be overridden by using
   --posix; in this case, the environment variable POSIXLY_CORRECT can
   be set to enforce stricter conformance.  If GNUTAR_COMPATIBILITY is zero or
   undefined, tar will eventually produces archives which, by default,
   will be POSIX compatible; then, either using --posix or defining
   POSIXLY_CORRECT will enforce stricter conformance.

   This #define will disappear in a few years.  FP, June 1995.  */
#define GNUTAR_COMPATIBILITY 1

/*---------------------------------------------.
| `tar' Header Block, from POSIX 1003.1-1990.  |
`---------------------------------------------*/

/* POSIX header.  */

struct posix_header
{                               /* byte offset */
  char name[100];               /*   0 */
  char mode[8];                 /* 100 */
  char uid[8];                  /* 108 */
  char gid[8];                  /* 116 */
  char size[12];                /* 124 */
  char mtime[12];               /* 136 */
  char chksum[8];               /* 148 */
  char typeflag;                /* 156 */
  char linkname[100];           /* 157 */
  char magic[6];                /* 257 */
  char version[2];              /* 263 */
  char uname[32];               /* 265 */
  char gname[32];               /* 297 */
  char devmajor[8];             /* 329 */
  char devminor[8];             /* 337 */
  char prefix[155];             /* 345 */
                                /* 500 */
};

#define TMAGIC   "ustar"        /* ustar and a null */
#define TMAGLEN  6
#define TVERSION "00"           /* 00 and no null */
#define TVERSLEN 2

/* Values used in typeflag field.  */
#define REGTYPE  '0'            /* regular file */
#define AREGTYPE '\0'           /* regular file */
#define LNKTYPE  '1'            /* link */
#define SYMTYPE  '2'            /* reserved */
#define CHRTYPE  '3'            /* character special */
#define BLKTYPE  '4'            /* block special */
#define DIRTYPE  '5'            /* directory */
#define FIFOTYPE '6'            /* FIFO special */
#define CONTTYPE '7'            /* reserved */

/* Bits used in the mode field, values in octal.  */
#define TSUID    04000          /* set UID on execution */
#define TSGID    02000          /* set GID on execution */
#define TSVTX    01000          /* reserved */
                                /* file permissions */
#define TUREAD   00400          /* read by owner */
#define TUWRITE  00200          /* write by owner */
#define TUEXEC   00100          /* execute/search by owner */
#define TGREAD   00040          /* read by group */
#define TGWRITE  00020          /* write by group */
#define TGEXEC   00010          /* execute/search by group */
#define TOREAD   00004          /* read by other */
#define TOWRITE  00002          /* write by other */
#define TOEXEC   00001          /* execute/search by other */

/*-----------------------------------------.
| `tar' Header Block, various extensions.  |
`-----------------------------------------*/

/* In tar, SYMTYPE is for symbolic links, and CONTTYPE is for contiguous
   files, thus possibly disobeying the `reserved' comment in the POSIX header
   description.  I suspect these were meant to be used this way, and should
   not really have been `reserved' in the published standards.  */

/* *BEWARE* that the following information is still in flux, and may change.
   Even if the GNUTAR format description should be accurate, the so-called GNU
   format is not yet fully decided.  It is surely meant to use only extensions
   allowed by POSIX, but the sketch below repeats some ugliness from the
   GNUTAR format, which should rather go away.  Sparse files should be saved
   in such a way that they do *not* require two passes at archive creation
   time.  Huge files cause some POSIX fields to overflow; alternate solutions
   have to be sought for this.  */

/* Descriptor for a single file hole.  */

struct sparse
{                               /* byte offset */
  char offset[12];              /*   0 */
  char numbytes[12];            /*  12 */
                                /*  24 */
};

/* Sparse files are not supported in POSIX ustar format.  For sparse files
   with a POSIX header, an extra header is provided which holds overall sparse
   information and a few sparse descriptors.  When an old GNU header replaces
   both the POSIX header and the extra header, it holds some sparse
   descriptors too.  Whether POSIX or not, if more sparse descriptors are
   still needed, they are put into as many successive sparse headers as
   necessary.  The following constants tell how many sparse descriptors fit in
   each kind of header able to hold them.  */

#define SPARSES_IN_EXTRA_HEADER  16
#define SPARSES_IN_GNUTAR_HEADER 4
#define SPARSES_IN_SPARSE_HEADER 21

/* The extra header contains some information needed by tar, but not foreseen
   in POSIX header format.  It is only used after a POSIX header (and never
   with old GNU headers), and immediately follows this POSIX header, when
   typeflag is a letter rather than a digit, thus signaling an extension.  */

struct extra_header
{                               /* byte offset */
  char atime[12];               /*   0 */
  char ctime[12];               /*  12 */
  char offset[12];              /*  24 */
  char realsize[12];            /*  36 */
  char longnames[4];            /*  48 */
  char unused_pad1[68];         /*  52 */
  struct sparse sp[SPARSES_IN_EXTRA_HEADER];
                                /* 120 */
  char isextended;              /* 504 */
                                /* 505 */
};

/* Extension header for sparse files, used immediately after the extra header,
   and used only if all sparse information cannot fit into that extra header.
   There might even be many such extension headers, one after the other, until
   all sparsity information has been recorded.  */

struct sparse_header
{                               /* byte offset */
  struct sparse sp[SPARSES_IN_SPARSE_HEADER];
                                /*   0 */
  char isextended;              /* 504 */
                                /* 505 */
};

/* The old GNU format header conflicts with POSIX format in such a way that
   POSIX archives may fool old tars, and POSIX tars might well be fooled by
   old tar archives.  An old GNU format header uses the space used by the
   prefix field in a POSIX header, and accumulates information normally found
   in an extra header.  With an old tar header, we never see any POSIX header
   nor extra header.  Supplementary sparse headers are allowed, however.  */

struct gnutar_header
{                               /* byte offset */
  char unused_pad1[345];        /*   0 */
  char atime[12];               /* 345 */
  char ctime[12];               /* 357 */
  char offset[12];              /* 369 */
  char longnames[4];            /* 381 */
  char unused_pad2;             /* 385 */
  struct sparse sp[SPARSES_IN_GNUTAR_HEADER];
                                /* 386 */
  char isextended;              /* 482 */
  char realsize[12];            /* 483 */
                                /* 495 */
};

/* GNUTAR_MAGIC uses both magic and version fields, which are contiguous.
   Found in an archive, it indicates an old GNU header format, which will
   hopefully have become obsolescent.  With GNUTAR_MAGIC, uname and gname are
   valid, though the header is not truly POSIX conformant.  */
#define GNUTAR_MAGIC "ustar  "  /* 7 chars and a null */

/* The standards committee allows only capital A through capital Z for
   user-defined expansion.  */

/* This is a dir entry that contains the names of files that were in the dir
   at the time the dump was made.  */
#define GNUTAR_DUMPDIR  'D'

/* Identifies the *next* file on the tape as having a long linkname.  */
#define GNUTAR_LONGLINK 'K'

/* Identifies the *next* file on the tape as having a long name.  */
#define GNUTAR_LONGNAME 'L'

/* This is the continuation of a file that began on another volume.  */
#define GNUTAR_MULTIVOL 'M'

/* For storing filenames that do not fit into the main header.  */
#define GNUTAR_NAMES 'N'

/* This is for sparse files.  */
#define GNUTAR_SPARSE 'S'

/* This file is a tape/volume header.  Ignore it on extraction.  */
#define GNUTAR_VOLHDR 'V'

/* This file is a compressed contiguous regular file. */
#define GNUTAR_CONTIG_COMPRESSED 'X'

/* This file is a compressed sparse regular file. */
#define GNUTAR_SPARSE_COMPRESSED 'Y'

/* This file is a compressed regular file. */
#define GNUTAR_REGULAR_COMPRESSED 'Z'

/*--------------------------------------.
| tar header block, overall structure.  |
`--------------------------------------*/

/* tar files are made in basic blocks of this size.  */
#define BLOCKSIZE ((size_t) 512)

enum archive_format
{
  UNKNOWN_FORMAT,               /* format unknown or to be decided later */
  BINARY_FORMAT,                /* cpio format */
  OLD_ASCII_FORMAT,             /* cpio format */
  NEW_ASCII_FORMAT,             /* cpio format */
  CRC_ASCII_FORMAT,             /* cpio format */
  HPUX_OLD_ASCII_FORMAT,        /* cpio format */
  HPUX_BINARY_FORMAT,           /* cpio format */
  V7_FORMAT,                    /* old V7 tar format */
  GNUTAR_FORMAT,                /* GNU tar format as per before paxutils 3.0 */
  POSIX_FORMAT,                 /* restricted, pure POSIX ustar format */
  PAXUTILS_FORMAT               /* POSIX format with extensions (vaporware) */
};

union block
{
  char buffer[BLOCKSIZE];
  struct posix_header header;
  struct extra_header extra_header;
  struct gnutar_header gnutar_header;
  struct sparse_header sparse_header;
};

/* End of format description.  */
</pre>

<p><hr>
Node:Standard format, Next:<a rel=next href="#Extended%20format">Extended format</a>, Previous:<a rel=previous href="#tar-h">tar-h</a>, Up:<a rel=up href="#Archive%20format">Archive format</a>
<p>

<h2><a name="Standard%20format">The standard format</a></h2>

<p>A <code>tar</code> archive file contains a series of blocks.  Each block contains
<code>BLOCKSIZE</code> bytes.  Although this format may be thought of as being
on magnetic tape, other media are often used.  Each file archived is
represented by a header block which describes the file, followed by zero or
more blocks which give the contents of the file.  At the end of the archive
file there may be a block filled with binary zeros as an end-of-file marker. 
A reasonable <code>tar</code> program should write a block of zeros at the end,
but must not assume that such a block exists when reading an archive.

<p>The blocks may be further <dfn>blocked</dfn> into records for physical I/O
subcommands.  Each record of <var>n</var> blocks (where <var>n</var> is set by the
<kbd>-blocking-factor=<var>blocks</var></kbd> (<kbd>-b <var>blocks</var></kbd>) option to <code>tar</code>) is written with a single
<code>write&nbsp;()</code> subcommand.  On magnetic tapes, the result of such a
write is a single record.  When writing an archive, the last record of
blocks should be written at the full size, with blocks after the zero
block containing all zeros.  When reading an archive, <code>tar</code> should
properly handle an archive whose last record is shorter than the rest,
or which contains garbage records after a zero block, as such things exist
in practice.

<p>There is no relation between record boundaries and archive member boundaries. 
The initial header block for an archive member may start in any block
position within a record, either at the very beginning of the first record
of an archive file, or immediately after the last block of the preceding
archive member, possibly in the same record.

<p>All characters in header blocks are represented by using 8-bit characters
in the local extension of ASCII.  Each field within the structure is
contiguous; that is, there is no padding used within the structure. 
Each character on the archive medium is stored contiguously.

<p>Bytes representing the contents of files (after the header block of
each file) are not translated in any way and are not constrained to
represent characters in any character set.  The <code>tar</code> format does
not distinguish text files from binary files, and no translation of file
contents is performed.

<p>The <code>name</code>, <code>linkname</code>, <code>magic</code>, <code>uname</code>, and
<code>gname</code> are null-terminated character strings.  All other fileds
are zero-filled octal numbers in ASCII.  Each numeric field of width
<var>w</var> contains <var>w</var> minus 2 digits, a space, and a null, except
<code>size</code> and <code>mtime</code>, which do not contain the trailing null.

<p>The <code>name</code> field is the file name of the file, with directory names
(if any) preceding the file name, separated by slashes.

<p>The <code>mode</code> field provides nine bits specifying file permissions
and three bits to specify the setuid, setgid, and Save Text
(<dfn>sticky</dfn>) modes.  Values for these bits are defined above. 
When special permissions are required to create a file with a given
mode, and the user restoring files from the archive does not hold such
permissions, the mode bit(s) specifying those special permissions
are ignored.  Modes which are not supported by the operating system
restoring files from the archive will be ignored.  Unsupported modes
should be faked up when creating or updating an archive; for example, the
group permission could be copied from the <em>other</em> permission.

<p>The <code>uid</code> and <code>gid</code> fields are the numeric user and group
IDs of the file owner, respectively.  If the operating system does
not support numeric user or group IDs, these fields should be ignored.

<p>The <code>size</code> field is the size of the file in bytes; linked files
are archived with this field specified as zero.  See <a href="#Backups">Backups</a>, in
particular the <kbd>-incremental</kbd> (<kbd>-G</kbd>) option.

<p>The <code>mtime</code> field is the modification time of the file at the time
it was archived.  It is the ASCII representation of the octal value of
the last time the file was modified, represented as an integer number of
seconds since 1970-01-01, 00:00 Coordinated Universal Time.

<p>The <code>chksum</code> field is the ASCII representation of the octal value
of the simple sum of all bytes in the header block.  Each 8-bit
byte in the header is added to an unsigned integer, initialized to
zero, the precision of which shall be no less than seventeen bits. 
When calculating the checksum, the <code>chksum</code> field is treated as
if it were all blanks.

<p>The <code>typeflag</code> field specifies the type of file archived.  If a
particular implementation does not recognize or permit the specified type,
the file will be extracted as if it were a regular file.  As this action
occurs, <code>tar</code> issues a warning to the standard error.  The POSIX
types are listed in the following table.

<dl>

<br><dt><code>REGTYPE</code>
<dt><code>AREGTYPE</code>
<dd>These flags represent a regular file.  In order to be compatible
with older versions of <code>tar</code>, a <code>typeflag</code> value of
<code>AREGTYPE</code> should be silently recognized as a regular file. 
New archives should be created using <code>REGTYPE</code>.  Also, for
backward compatibility, <code>tar</code> treats a regular file whose name
ends with a slash as a directory.

<br><dt><code>LNKTYPE</code>
<dd>This flag represents a file linked to another file, of any type,
previously archived.  Such files are identified in Unix by each
file having the same device and inode number.  The linked-to name is
specified in the <code>linkname</code> field with a trailing null.

<br><dt><code>SYMTYPE</code>
<dd>This represents a symbolic link to another file.  The linked-to name
is specified in the <code>linkname</code> field with a trailing null.

<br><dt><code>CHRTYPE</code>
<dt><code>BLKTYPE</code>
<dd>These represent character special files and block special files
respectively.  In this case the <code>devmajor</code> and <code>devminor</code>
fields will contain the major and minor device numbers respectively. 
Operating systems may map the device specifications to their own
local specification, or may ignore the entry.

<br><dt><code>DIRTYPE</code>
<dd>This flag specifies a directory or subdirectory.  The directory
name in the <code>name</code> field should end with a slash.  On systems where
disk allocation is performed on a directory basis, the <code>size</code> field
will contain the maximum number of bytes (which may be rounded to
the nearest disk block allocation unit) which the directory may
hold.  A <code>size</code> field of zero indicates no such limit.  Systems
which do not support limiting in this manner should ignore the
<code>size</code> field.

<br><dt><code>FIFOTYPE</code>
<dd>This specifies a FIFO special file.  Note that the archiving of a
FIFO file archives the existence of this file and not its contents.

<br><dt><code>CONTTYPE</code>
<dd>This specifies a contiguous file, which is the same as a normal
file except that, in operating systems which support it, all its
space is allocated contiguously on the disk.  Operating systems
which do not allow contiguous allocation should silently treat this
type as a normal file.

<br><dt><code>A</code> <small>...</small> <code>Z</code>
<dd>These are reserved for custom implementations.  Some of these are
used in the extended format (see <a href="#Extended%20format">Extended format</a>).

</dl>

<p>Other values are reserved for specification in future revisions of
the P1003 standard, and should not be used by any <code>tar</code> program.

<p>The <code>atime</code> and <code>ctime</code> fields are used in making incremental
backups; they store, respectively, the particular file's access time
and last inode-change time.

<p>The <code>offset</code> is used by the <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) option, when
making a multi-volume archive.  The offset is number of bytes into
the file that we need to restart at to continue the file on the next
tape, that is, where we store the location that a continued file is
continued at.

<p>The <code>magic</code> field indicates that this archive was output in
the P1003 archive format.  If this field contains <code>TMAGIC</code>,
the <code>uname</code> and <code>gname</code> fields will contain the ASCII
representation of the owner and group of the file respectively. 
If found, the user and group IDs are used rather than the values in
the <code>uid</code> and <code>gid</code> fields.

<p>For references, see ISO/IEC 9945-1:1990 or IEEE Std 1003.1-1990, pages
169-173 (section 10.1) for <cite>Archive/Interchange File Format</cite>; and
IEEE Std 1003.2-1992, pages 380-388 (section 4.48) and pages 936-940
(section E.4.48) for <cite>pax--Portable archive interchange</cite>.

<p><hr>
Node:Extended format, Previous:<a rel=previous href="#Standard%20format">Standard format</a>, Up:<a rel=up href="#Archive%20format">Archive format</a>
<p>

<h2><a name="Extended%20format">Extensions to the archive format</a></h2>

<p>The extended format specifies additional values in the <code>typeflag</code>
field to describe new types of files in an archive.  These are listed below.

<dl>
<dt><code>GNUTAR_DUMPDIR</code>
<dt><code>'D'</code>
<dd>This represents a directory and a list of files created by the
<kbd>-incremental</kbd> (<kbd>-G</kbd>) option.  The <code>size</code> field gives the total size
of the associated list of files.  Each file name is preceded by either a
<code>Y</code> (the file should be in this archive) or an <code>N</code>.  (The file is
a directory, or is not stored in the archive.)  Each file name is terminated
by <code>NUL</code>.  There is an additional <code>NUL</code> after the last file name.

<br><dt><code>GNUTAR_MULTIVOL</code>
<dt><code>'M'</code>
<dd>This represents a file continued from another volume of a multi-volume
archive created with the <kbd>-multi-volume</kbd> (<kbd>-M</kbd>) option.  The original type
of the file is not given here.  The <code>size</code> field gives the maximum
size of this piece of the file (assuming the volume does not end before the
file is written out).  The <code>offset</code> field gives the offset from the
beginning of the file where this part of the file begins.  Thus <code>size</code>
plus <code>offset</code> should equal the original size of the file.

<br><dt><code>GNUTAR_SPARSE</code>
<dt><code>'S'</code>
<dd>This flag indicates that we are dealing with a sparse file.  Note that
archiving a sparse file requires special subcommands to find holes in the
file, which mark the positions of these holes, along with the number of
bytes of data to be found after the hole.

<br><dt><code>GNUTAR_VOLHDR</code>
<dt><code>'V'</code>
<dd>This file type is used to mark the volume header that was given with the
<kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) option when the archive was created.  The <code>name</code>
field contains the <code>name</code> given after the <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) option. 
The <code>size</code> field is zero.  Only the first file in each volume of an
archive should have this type.

</dl>

<p>You may have trouble reading an extended format archive with some other
<code>tar</code> if the options <kbd>-incremental</kbd> (<kbd>-G</kbd>), <kbd>-multi-volume</kbd> (<kbd>-M</kbd>),
<kbd>-sparse</kbd> (<kbd>-S</kbd>), or <kbd>-label=<var>archive-label</var></kbd> (<kbd>-V <var>archive-label</var></kbd>) were used when writing the archive. 
In general, if <code>tar</code> does not use the extension format fields of the
header, other versions of <code>tar</code> should be able to read the archive. 
Otherwise, the <code>tar</code> program will give an error, the most likely one
being a checksum error.

<p>A few fields were added to the POSIX header to deal with sparse files. 
A file is <dfn>sparse</dfn> if it takes in unallocated blocks which end up
being represented as zeros, that is, no useful data.  A test to see if a
file is sparse is to look at the number of blocks allocated for it versus
the number of characters in the file; if there are fewer blocks allocated
for the file than would normally be allocated for a file of that size,
then the file is sparse.  This is the method <code>tar</code> uses to detect a
sparse file, and once such a file is detected, it is treated differently
from non-sparse files.

<p>Sparse files are often <code>dbm</code> files, or other database-type files
which have data at some points and emptiness in the greater part of
the file.  Such files can appear to be very large when an <kbd>ls
-l</kbd> is done on them, when in truth there may be a very small amount
of important data contained in the file.  It is thus undesirable
to have <code>tar</code> think that it must back up this entire file, as
great quantities of room are wasted on empty blocks, which can lead
to running out of room on a tape far earlier than is necessary. 
Thus, sparse files are dealt with so that these empty blocks are
not written to the tape.  Instead, what is written to the tape is a
description, of sorts, of the sparse file: where the holes are, how
big the holes are, and how much data is found at the end of the hole. 
This way, the file takes up potentially far less room on the tape,
and when the file is extracted later on, it will look exactly the way
it looked beforehand.  The following is a description of the fields
used to handle a sparse file:

<p>The <code>sp</code> is an array of <code>struct sparse</code>.  Each <code>struct
sparse</code> contains two 12-character strings which represent an offset
into the file and a number of bytes to be written at that offset. 
The offset is absolute, and not relative to the offset in the preceding
array element.

<p>The header can hold four of these <code>struct sparse</code> at the moment;
if more are needed, they are not stored in the header.

<p>The <code>isextended</code> flag is set when an <code>extended_header</code>
is needed to deal with a file.  Note that this means that this flag
can only be set when dealing with a sparse file, and it is only set
in the event that the description of the file will not fit in the
alloted room for sparse structures in the header.  In other words,
an extended_header is needed.

<p>The <code>extended_header</code> structure is used for sparse files which
need more sparse structures than can fit in the header.  The header can
fit 4 such structures; if more are needed, the flag <code>isextended</code>
gets set and the next block is an <code>extended_header</code>.

<p>Each <code>extended_header</code> structure contains an array of 21
sparse structures, along with an <code>isextended</code> flag similar to the one
that the header had.  There can be an indeterminate number of such
<code>extended_header</code>s to describe a sparse file.

<p><hr>
Node:Index, Previous:<a rel=previous href="#Archive%20format">Archive format</a>, Up:<a rel=up href="#Top">Top</a>
<p>

<h1><a name="Index">Index</a></h1>

<ul compact>
<li>-list with file name arguments: <a href="#list">list</a>, <a href="#list%20tutorial">list tutorial</a>
<li>-suffix: <a href="#suffix">suffix</a>
<li>8601 Dates (ISO): <a href="#list">list</a>
<li><code>ago in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>am in date strings</code>: <a href="#Time%20of%20day%20item">Time of day item</a>
<li><code>cat</code> vs <code>concatenate</code>: <a href="#Using%20cat%20with%20archives">Using cat with archives</a>, <a href="#concatenate">concatenate</a>
<li><code>concatenate</code> vs <code>cat</code>: <a href="#Using%20cat%20with%20archives">Using cat with archives</a>, <a href="#concatenate">concatenate</a>
<li><code>day in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>exclude-from</code>: <a href="#exclude-from">exclude-from</a>
<li><code>exclude</code>: <a href="#exclude">exclude</a>
<li><code>first in date strings</code>: <a href="#General%20date%20syntax">General date syntax</a>
<li><code>fortnight in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>getdate</code>: <a href="#Date%20input%20formats">Date input formats</a>
<li><code>hour in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>last <var>day</var></code>: <a href="#Day%20of%20week%20item">Day of week item</a>
<li><code>last in date strings</code>: <a href="#General%20date%20syntax">General date syntax</a>
<li><code>midnight in date strings</code>: <a href="#Time%20of%20day%20item">Time of day item</a>
<li><code>minute in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>month in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>next <var>day</var></code>: <a href="#Day%20of%20week%20item">Day of week item</a>
<li><code>next in date strings</code>: <a href="#General%20date%20syntax">General date syntax</a>
<li><code>noon in date strings</code>: <a href="#Time%20of%20day%20item">Time of day item</a>
<li><code>now in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>ntape device</code>: <a href="#Many%20on%20one">Many on one</a>
<li><code>NUL</code> terminated file names: <a href="#null">null</a>
<li><code>pm in date strings</code>: <a href="#Time%20of%20day%20item">Time of day item</a>
<li><code>rmt</code>: <a href="#Remote">Remote</a>
<li><code>SIMPLE_BACKUP_SUFFIX</code>: <a href="#suffix">suffix</a>
<li><code>this in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>today in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>tomorrow in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>uuencode</code>: <a href="#Applications">Applications</a>
<li><code>version-control Emacs variable</code>: <a href="#backup">backup</a>
<li><code>VERSION_CONTROL</code>: <a href="#backup">backup</a>
<li><code>week in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>year in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><code>yesterday in date strings</code>: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li>abbreviations for months: <a href="#Calendar%20date%20item">Calendar date item</a>
<li>absolute file names: <a href="#absolute-names">absolute-names</a>
<li>Acting interactively: <a href="#interactive">interactive</a>
<li>Adding archives to an archive: <a href="#concatenate">concatenate</a>
<li>Adding files to an Archive: <a href="#Appending%20files">Appending files</a>
<li>Age, excluding files by: <a href="#Time%20criteria">Time criteria</a>
<li>Alaska-Hawaii Time: <a href="#Timezone%20item">Timezone item</a>
<li>Appending files to an Archive: <a href="#Appending%20files">Appending files</a>
<li>archive: <a href="#Definitions">Definitions</a>
<li>Archive creation: <a href="#Using%20file">Using file</a>, <a href="#file">file</a>
<li>archive member: <a href="#Definitions">Definitions</a>
<li>Archive Name: <a href="#file">file</a>
<li>Archive, create empty: <a href="#create">create</a>
<li>Archives, Appending files to: <a href="#Appending%20files">Appending files</a>
<li>Archives, on remote machines: <a href="#file">file</a>
<li>Archiving directories: <a href="#create%20dir%20tutorial">create dir tutorial</a>
<li>Atlantic Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Authors of <code>getdate</code>: <a href="#Authors%20of%20getdate">Authors of getdate</a>
<li>Avoiding recursion in directories: <a href="#no-recursion">no-recursion</a>
<li>Azores Time: <a href="#Timezone%20item">Timezone item</a>
<li>backup files, type made: <a href="#backup">backup</a>
<li>backup options: <a href="#backup">backup</a>
<li>backup suffix: <a href="#suffix">suffix</a>
<li>backups, making: <a href="#backup">backup</a>
<li>Baghdad Time: <a href="#Timezone%20item">Timezone item</a>
<li>beginning of time, for Unix: <a href="#Date%20input%20formats">Date input formats</a>
<li>Bellovin, Steven M.: <a href="#Authors%20of%20getdate">Authors of getdate</a>
<li>Berets, Jim: <a href="#Authors%20of%20getdate">Authors of getdate</a>
<li>Berry, K.: <a href="#Authors%20of%20getdate">Authors of getdate</a>
<li>Block number where error occured: <a href="#Documentation%20and%20help">Documentation and help</a>
<li>Blocking Factor: <a href="#blocking-factor">blocking-factor</a>
<li>Blocks per record: <a href="#blocking-factor">blocking-factor</a>
<li>bug reports: <a href="#Reports">Reports</a>
<li>Bytes per record: <a href="#blocking-factor">blocking-factor</a>
<li>Calendar date item: <a href="#Calendar%20date%20item">Calendar date item</a>
<li>case, ignored in dates: <a href="#General%20date%20syntax">General date syntax</a>
<li>Central Alaska Time: <a href="#Timezone%20item">Timezone item</a>
<li>Central European Time: <a href="#Timezone%20item">Timezone item</a>
<li>Central Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Changing directory mid-stream: <a href="#directory">directory</a>
<li>Character class, excluding characters from: <a href="#Wildcards">Wildcards</a>
<li>China Coast Time: <a href="#Timezone%20item">Timezone item</a>
<li>Choosing an archive file: <a href="#file">file</a>
<li>command line options: <a href="#cpio%20invocation">cpio invocation</a>
<li>comments, in dates: <a href="#General%20date%20syntax">General date syntax</a>
<li>Compressed archives: <a href="#gzip">gzip</a>
<li>Compressed archives, modification of: <a href="#Archive%20compression">Archive compression</a>
<li>Concatenating Archives: <a href="#concatenate">concatenate</a>
<li>copying directory structures: <a href="#cpio%20Tutorial">cpio Tutorial</a>
<li>corrupted archives: <a href="#Full%20dumps">Full dumps</a>
<li>Corrupted archives: <a href="#Archive%20compression">Archive compression</a>
<li>cpio: <a href="#What%20cpio%20does">What cpio does</a>
<li>Create empty archive: <a href="#create">create</a>
<li>creating a cpio archive: <a href="#cpio%20Tutorial">cpio Tutorial</a>
<li>DAT blocking: <a href="#Media%20types">Media types</a>
<li>date format, ISO 8601: <a href="#Calendar%20date%20item">Calendar date item</a>
<li>date input formats: <a href="#Date%20input%20formats">Date input formats</a>
<li>Dates format: <a href="#list">list</a>
<li>Day of week item: <a href="#Day%20of%20week%20item">Day of week item</a>
<li>daylight savings time: <a href="#Timezone%20item">Timezone item</a>
<li>Deleting files from an archive: <a href="#delete">delete</a>
<li>Deleting from tape archives: <a href="#delete">delete</a>
<li>Descending directories, avoiding: <a href="#no-recursion">no-recursion</a>
<li>Directing output: <a href="#file">file</a>
<li>Directories, Archiving: <a href="#create%20dir%20tutorial">create dir tutorial</a>
<li>Directories, avoiding recursion: <a href="#no-recursion">no-recursion</a>
<li>Directory, changing mid-stream: <a href="#directory">directory</a>
<li>Disk space, running out of: <a href="#Scarce">Scarce</a>
<li>Displacement of dates: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li>Double-checking a write operation: <a href="#verify">verify</a>
<li>dumps, full: <a href="#Full%20dumps">Full dumps</a>
<li>dumps, incremental: <a href="#Incremental%20dumps">Incremental dumps</a>
<li>Duplicate entries: <a href="#quick">quick</a>
<li>East Australian Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Eastern European Time: <a href="#Timezone%20item">Timezone item</a>
<li>Eastern Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Empty archive, how to create: <a href="#create">create</a>
<li>End-of-archive entries, ignoring: <a href="#Reading">Reading</a>
<li>entry: <a href="#Stylistic%20conventions">Stylistic conventions</a>
<li>epoch, for Unix: <a href="#Date%20input%20formats">Date input formats</a>
<li>Error message, block number of: <a href="#Documentation%20and%20help">Documentation and help</a>
<li>Exabyte blocking: <a href="#Media%20types">Media types</a>
<li>Excluding characters from a character class: <a href="#Wildcards">Wildcards</a>
<li>Excluding file by age: <a href="#Time%20criteria">Time criteria</a>
<li>Excluding files by file system: <a href="#Exclusions">Exclusions</a>
<li>Excluding files by name and pattern: <a href="#Exclusions">Exclusions</a>
<li>existing backup method: <a href="#backup">backup</a>
<li>exit status: <a href="#Synopsis">Synopsis</a>
<li>extracting a cpio archive: <a href="#cpio%20Tutorial">cpio Tutorial</a>
<li>Extracting files on MS-DOS, illegal characters: <a href="#extract%20options">extract options</a>
<li>Extraction: <a href="#extract">extract</a>, <a href="#extract%20tutorial">extract tutorial</a>
<li>extraction: <a href="#Definitions">Definitions</a>
<li>Feedback from <code>tar</code>: <a href="#Documentation%20and%20help">Documentation and help</a>
<li>file name: <a href="#Definitions">Definitions</a>
<li>File Name arguments, alternatives: <a href="#files-from">files-from</a>
<li>File name arguments, using <kbd>-list</kbd> (<kbd>-t</kbd>) with: <a href="#list">list</a>, <a href="#list%20tutorial">list tutorial</a>
<li>File names, excluding files by: <a href="#Exclusions">Exclusions</a>
<li>File names, terminated by <code>NUL</code>: <a href="#null">null</a>
<li>File names, using symbolic links: <a href="#dereference">dereference</a>
<li>File system boundaries, not crossing: <a href="#one-file-system">one-file-system</a>
<li>File time stamp on MS-DOS/MS-Windows: <a href="#Time%20criteria">Time criteria</a>
<li>Filenames, illegal characters on MS-DOS: <a href="#extract%20options">extract options</a>
<li>Format Options: <a href="#Media">Media</a>
<li>Format Parameters: <a href="#Media">Media</a>
<li>Format, old style: <a href="#old-archive">old-archive</a>
<li>French Winter Time: <a href="#Timezone%20item">Timezone item</a>
<li>full dumps: <a href="#Full%20dumps">Full dumps</a>
<li>General date syntax: <a href="#General%20date%20syntax">General date syntax</a>
<li>Getting more information: <a href="#Documentation%20and%20help">Documentation and help</a>
<li>Greenwich Mean Time: <a href="#Timezone%20item">Timezone item</a>
<li>Guam Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Hawaii Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Ignoring end-of-archive entries: <a href="#Reading">Reading</a>
<li>incremental dumps: <a href="#Incremental%20dumps">Incremental dumps</a>
<li>Information during operation: <a href="#Documentation%20and%20help">Documentation and help</a>
<li>Information on progress and status of subcommands: <a href="#Documentation%20and%20help">Documentation and help</a>
<li>Interactive action: <a href="#interactive">interactive</a>
<li>International Date Line East: <a href="#Timezone%20item">Timezone item</a>
<li>International Date Line West: <a href="#Timezone%20item">Timezone item</a>
<li>invoking cpio: <a href="#cpio%20invocation">cpio invocation</a>
<li>ISO 8601 date format: <a href="#Calendar%20date%20item">Calendar date item</a>
<li>ISO 8601 Dates: <a href="#list">list</a>
<li>items in date strings: <a href="#General%20date%20syntax">General date syntax</a>
<li>Japan Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Labeling an archive: <a href="#label">label</a>
<li>Labelling multi-volume archives: <a href="#Multi-volume%20archives">Multi-volume archives</a>
<li>Labels on the archive media: <a href="#label">label</a>
<li>Large lists of file names on small machines: <a href="#Reading">Reading</a>
<li>Lists of file names: <a href="#files-from">files-from</a>
<li>MacKenzie, David: <a href="#Authors%20of%20getdate">Authors of getdate</a>
<li>member: <a href="#Definitions">Definitions</a>
<li>member name: <a href="#Definitions">Definitions</a>
<li>Members, replacing with other members: <a href="#append">append</a>
<li>Meyering, Jim: <a href="#Authors%20of%20getdate">Authors of getdate</a>
<li>Middle European Time: <a href="#Timezone%20item">Timezone item</a>
<li>Middle European Winter Time: <a href="#Timezone%20item">Timezone item</a>
<li>Middle of the archive, starting in the: <a href="#Scarce">Scarce</a>
<li>minutes, timezone correction by: <a href="#Time%20of%20day%20item">Time of day item</a>
<li>Mistake: forget archive name: <a href="#Two%20mistakes">Two mistakes</a>
<li>Mistake: use <code>create</code> instead of <code>extract</code>: <a href="#Two%20mistakes">Two mistakes</a>
<li>Mod time differs message on MS-DOS disks: <a href="#compare">compare</a>
<li>Modes of extracted files: <a href="#Writing">Writing</a>
<li>Modification time, excluding files by: <a href="#Time%20criteria">Time criteria</a>
<li>Modification time, on MS-DOS: <a href="#Time%20criteria">Time criteria</a>
<li>Modification times of extracted files: <a href="#Writing">Writing</a>
<li>month names in date strings: <a href="#Calendar%20date%20item">Calendar date item</a>
<li>months, written-out: <a href="#General%20date%20syntax">General date syntax</a>
<li>Mountain Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Multi-volume archives: <a href="#Multi-volume%20archives">Multi-volume archives</a>
<li>Name Prefixes,: <a href="#name-prefix">name-prefix</a>
<li>Naming an archive: <a href="#file">file</a>
<li>New Zealand Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Nome Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Number of blocks per record: <a href="#blocking-factor">blocking-factor</a>
<li>Number of bytes per record: <a href="#blocking-factor">blocking-factor</a>
<li>numbered backup method: <a href="#backup">backup</a>
<li>numbers, written-out: <a href="#General%20date%20syntax">General date syntax</a>
<li>Old style archives: <a href="#old-archive">old-archive</a>
<li>Old style format: <a href="#old-archive">old-archive</a>
<li>option syntax, traditional: <a href="#Old%20style">Old style</a>
<li>Options when reading archives: <a href="#Reading">Reading</a>
<li>Options, archive format specifying: <a href="#Media">Media</a>
<li>Options, format specifying: <a href="#Media">Media</a>
<li>ordinal numbers: <a href="#General%20date%20syntax">General date syntax</a>
<li>Overwriting old files, prevention: <a href="#Writing">Writing</a>
<li>Overwriting prevention on MS-DOS and MS-Windows: <a href="#Preventing%20overwrite">Preventing overwrite</a>
<li>Pacific Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>passing directory structures: <a href="#cpio%20Tutorial">cpio Tutorial</a>
<li>pax: <a href="#What%20pax%20does">What pax does</a>
<li>Permissions of extracted files: <a href="#Writing">Writing</a>
<li>Pinard, F.: <a href="#Authors%20of%20getdate">Authors of getdate</a>
<li>Prefixes, Name: <a href="#name-prefix">name-prefix</a>
<li>Progress information: <a href="#Documentation%20and%20help">Documentation and help</a>
<li>Protecting old files: <a href="#Writing">Writing</a>
<li>Pure numbers in date strings: <a href="#Pure%20numbers%20in%20date%20strings">Pure numbers in date strings</a>
<li>Quick extraction: <a href="#quick">quick</a>
<li>Reading file names from a file: <a href="#files-from">files-from</a>
<li>Reading incomplete records: <a href="#Reading">Reading</a>
<li>Record Size: <a href="#blocking-factor">blocking-factor</a>
<li>Records, incomplete: <a href="#Reading">Reading</a>
<li>Recursion in directories, avoiding: <a href="#no-recursion">no-recursion</a>
<li>Relative items in date strings: <a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li>Remote archives and MS-DOS file names: <a href="#file">file</a>
<li>Remote archives specification: <a href="#file">file</a>
<li>remote tape drive: <a href="#Remote">Remote</a>
<li>Removing existing files on MS-DOS: <a href="#Preventing%20overwrite">Preventing overwrite</a>
<li>Removing files from an archive: <a href="#delete">delete</a>
<li>Replacing members with other members: <a href="#append">append</a>
<li>reporting bugs: <a href="#Reports">Reports</a>
<li>Resurrecting files from an archive: <a href="#extract">extract</a>, <a href="#extract%20tutorial">extract tutorial</a>
<li>Retrieving files from an archive: <a href="#extract">extract</a>, <a href="#extract%20tutorial">extract tutorial</a>
<li>return status: <a href="#Synopsis">Synopsis</a>
<li>Running out of space: <a href="#Reading">Reading</a>
<li>Running out of space during extraction: <a href="#Scarce">Scarce</a>
<li>Salz, Rich: <a href="#Authors%20of%20getdate">Authors of getdate</a>
<li>simple backup method: <a href="#backup">backup</a>
<li>Small memory: <a href="#Reading">Reading</a>
<li>Space on the disk, recovering from lack of: <a href="#Scarce">Scarce</a>
<li>Sparse Files: <a href="#sparse">sparse</a>
<li>Specifying archive members: <a href="#Selecting%20Archive%20Members">Selecting Archive Members</a>
<li>Specifying files to act on: <a href="#Selecting%20Archive%20Members">Selecting Archive Members</a>
<li>Speed versus duplicate entries: <a href="#quick">quick</a>
<li>Standard input and output: <a href="#Standard%20archive">Standard archive</a>, <a href="#file">file</a>
<li>Standard output, writing extracted files to: <a href="#Writing">Writing</a>
<li>Status information: <a href="#Documentation%20and%20help">Documentation and help</a>
<li>Storing archives in compressed format: <a href="#gzip">gzip</a>
<li>Swedish Winter Time: <a href="#Timezone%20item">Timezone item</a>
<li>Symbolic link as file name: <a href="#dereference">dereference</a>
<li>tape marks: <a href="#Many%20on%20one">Many on one</a>
<li>tape positioning: <a href="#Many%20on%20one">Many on one</a>
<li>Tapes, using <kbd>-delete</kbd> and: <a href="#delete">delete</a>
<li>tar: <a href="#What%20tar%20does">What tar does</a>
<li>tar archive: <a href="#Definitions">Definitions</a>
<li>tar entry: <a href="#Stylistic%20conventions">Stylistic conventions</a>
<li>tar file: <a href="#Stylistic%20conventions">Stylistic conventions</a>
<li>tar to standard input and output: <a href="#Standard%20archive">Standard archive</a>, <a href="#file">file</a>
<li>Time of day item: <a href="#Time%20of%20day%20item">Time of day item</a>
<li>Timestamp differences, on MS-DOS/MS-Windows filesystems: <a href="#compare">compare</a>
<li>timezone correction: <a href="#Time%20of%20day%20item">Time of day item</a>
<li>Timezone item: <a href="#Timezone%20item">Timezone item</a>
<li>Ultrix 3.1 and write failure: <a href="#Other%20tape%20considerations">Other tape considerations</a>
<li>Universal Coordinated Time: <a href="#Timezone%20item">Timezone item</a>
<li>unpacking: <a href="#Definitions">Definitions</a>
<li>Updating an archive: <a href="#update">update</a>
<li>Using <code>cat</code> to concatenate archives: <a href="#Using%20cat%20with%20archives">Using cat with archives</a>
<li>USSR Zone: <a href="#Timezone%20item">Timezone item</a>
<li>Verbose subcommand: <a href="#Documentation%20and%20help">Documentation and help</a>
<li>Verifying a write operation: <a href="#verify">verify</a>
<li>Verifying the currency of an archive: <a href="#compare">compare</a>
<li>Version of the <code>tar</code> program: <a href="#Documentation%20and%20help">Documentation and help</a>
<li>West African Time: <a href="#Timezone%20item">Timezone item</a>
<li>West Australian Standard Time: <a href="#Timezone%20item">Timezone item</a>
<li>Western European Time: <a href="#Timezone%20item">Timezone item</a>
<li>Where is the archive?: <a href="#file">file</a>
<li>Working directory, specifying: <a href="#directory">directory</a>
<li>Writing extracted files to standard output: <a href="#Writing">Writing</a>
<li>Writing new archives: <a href="#Using%20file">Using file</a>, <a href="#file">file</a>
<li>Yukon Standard Time: <a href="#Timezone%20item">Timezone item</a>
</ul>


<h1>Table of Contents</h1>
<ul>
<li><a href="#Top"></a>
<li><a href="#Introduction">Introduction</a>
<ul>
<li><a href="#Book%20contents">What this book contains</a>
<li><a href="#Definitions">Some definitions</a>
<li><a href="#What%20cpio%20does">What <code>cpio</code> does</a>
<li><a href="#What%20pax%20does">What <code>pax</code> does</a>
<li><a href="#What%20tar%20does">What <code>tar</code> does</a>
<li><a href="#Stylistic%20conventions">Stylistic conventions</a>
<li><a href="#Authors"><code>tar</code> authors</a>
<li><a href="#Reports">Reporting bugs or suggestions</a>
</ul>
<li><a href="#cpio%20Tutorial">Tutorial introduction to <code>cpio</code></a>
<li><a href="#tar%20Tutorial">Tutorial introduction to <code>tar</code></a>
<ul>
<li><a href="#Assumptions">Assumptions this tutorial makes</a>
<li><a href="#Simplified%20invokation">The structure of a <code>tar</code> command</a>
<li><a href="#Basic%20tar%20options"><code>tar</code> subcommands and options</a>
<li><a href="#create%20list%20extract%20tutorial">The three most frequently used subcommands</a>
<li><a href="#file%20verbose%20help">Three frequently used options</a>
<ul>
<li><a href="#file%20tutorial">The <kbd>-file</kbd> option</a>
<li><a href="#verbose%20tutorial">The <kbd>-verbose</kbd> option</a>
<li><a href="#help%20tutorial">Getting help: Using the <kbd>-help</kbd> option</a>
</ul>
<li><a href="#create%20tutorial">How to create archives</a>
<ul>
<li><a href="#prepare%20for%20examples">Preparing a practice directory for examples</a>
<li><a href="#Creating%20the%20archive%20tutorial">Creating the archive</a>
<li><a href="#create%20verbose">Running <kbd>-create</kbd> with <kbd>-verbose</kbd></a>
<li><a href="#Short%20create">Short forms with <kbd>-create</kbd></a>
<li><a href="#create%20dir%20tutorial">Archiving directories</a>
</ul>
<li><a href="#list%20tutorial">How to list archives</a>
<ul>
<li><a href="#absolute%20tutorial">Specifying member names correctly</a>
<li><a href="#Listing%20directories">Listing the contents of a stored directory</a>
</ul>
<li><a href="#extract%20tutorial">How to extract members from an archive</a>
<ul>
<li><a href="#Extracting%20archives">Extracting an entire archive</a>
<li><a href="#Extracting%20files">Extracting specific files</a>
<li><a href="#Extracting%20directories">Extracting files that are directories</a>
<li><a href="#Failing%20commands">Commands that will fail</a>
<li><a href="#Two%20mistakes">Two dangerous mistakes</a>
</ul>
<li><a href="#Looking%20ahead">Looking ahead: The rest of this manual</a>
</ul>
<li><a href="#cpio%20invocation">Invoking <code>cpio</code></a>
<ul>
<li><a href="#Copy-out%20mode">Copy-out mode</a>
<li><a href="#Copy-in%20mode">Copy-in mode</a>
<li><a href="#Copy-pass%20mode">Copy-pass mode</a>
<li><a href="#cpio%20Options">Options for <code>cpio</code></a>
</ul>
<li><a href="#pax%20invocation">Invoking <code>pax</code></a>
<li><a href="#tar%20invocation">Invoking <code>tar</code></a>
<ul>
<li><a href="#Synopsis">General synopsis of <code>tar</code></a>
<li><a href="#Using%20options">Using <code>tar</code> options</a>
<li><a href="#Styles">The three option styles</a>
<ul>
<li><a href="#Long%20options">Long option style</a>
<li><a href="#Short%20options">Short option style</a>
<li><a href="#Old%20style">Old option style</a>
<li><a href="#Mixing">Mixing option styles</a>
</ul>
<li><a href="#Documentation%20and%20help">Documentation and troubleshooting</a>
<ul>
<li><a href="#version">Knowing the <code>tar</code> version</a>
<li><a href="#help">Getting the list of possible options</a>
<li><a href="#verbose">Checking <code>tar</code> progress</a>
<li><a href="#checkpoint">Being warned of all directories</a>
<li><a href="#show-omitted-dirs">Being warned of skipped directories</a>
<li><a href="#totals">Sizeing the amount of data written</a>
<li><a href="#block-number">Adding physical addresses to messages</a>
</ul>
<li><a href="#interactive">Asking for confirmation during subcommands</a>
</ul>
<li><a href="#Subcommands"><code>tar</code> subcommands</a>
<ul>
<li><a href="#list">How to list archives</a>
<ul>
<li><a href="#Reading">Options to help read archives</a>
<ul>
<li><a href="#read-full-records">Reading full records</a>
<li><a href="#ignore-zeros">Ignoring blocks of zeros</a>
<li><a href="#ignore-failed-read">Ignoring read failures</a>
</ul>
<li><a href="#compare">Comparing members with the file system</a>
</ul>
<li><a href="#extract">How to extract members from an archive</a>
<ul>
<li><a href="#extract%20options">Options used for extraction</a>
<li><a href="#Writing">Changing how <code>tar</code> writes files</a>
<li><a href="#Preventing%20overwrite">Options to prevent overwriting files</a>
<ul>
<li><a href="#keep-old-files">Keeping old files</a>
<li><a href="#to-stdout">Writing to standard output</a>
<li><a href="#backup">Backup options</a>
<li><a href="#suffix">Deciding the backup file suffixes</a>
</ul>
<li><a href="#Unlinking">Options to destroy files</a>
<ul>
<li><a href="#unlink-first">Removing files prior to extraction</a>
<li><a href="#recursive-unlink">Removing whole directories</a>
</ul>
<li><a href="#Attributes">Handling file attributes</a>
<ul>
<li><a href="#touch">Setting modification times</a>
<li><a href="#same-owner">Restoring file ownership</a>
<li><a href="#same-permissions">Setting access permissions</a>
<li><a href="#no-attributes">Leaving file attributes alone</a>
</ul>
<li><a href="#Scarce">Coping with scarce resources</a>
<ul>
<li><a href="#starting-file">Starting file</a>
<li><a href="#same-order">Same order</a>
<li><a href="#preserve">Preserving permissions and order</a>
</ul>
</ul>
<li><a href="#create">How to create archives</a>
<ul>
<li><a href="#name-prefix">Using name prefixes</a>
<li><a href="#atime-preserve">Preserving last access time</a>
<li><a href="#remove-files">Removing files</a>
<li><a href="#append">How to add files to existing archives</a>
<ul>
<li><a href="#Appending%20files">Appending files to an archive</a>
<li><a href="#Multiple%20files">Multiple files with the same name</a>
</ul>
<li><a href="#update">Updating an archive</a>
<ul>
<li><a href="#How%20to%20update">How to update members of an archive</a>
<li><a href="#Unsuitability%20of%20update">Updating does not always work</a>
</ul>
</ul>
<li><a href="#Applications">Other uses for <code>tar</code></a>
<ul>
<li><a href="#concatenate">Combining archives with <code>tar</code></a>
<li><a href="#Using%20cat%20with%20archives">Combining archives with <code>cat</code></a>
<li><a href="#delete">Removing archive members from an archive</a>
</ul>
</ul>
<li><a href="#Choosing">Choosing files and names for <code>tar</code></a>
<ul>
<li><a href="#file">Choosing and naming archive files</a>
<ul>
<li><a href="#Using%20file">Using the <kbd>-file</kbd> option</a>
<li><a href="#Standard%20archive">Archive on standard input or output</a>
<li><a href="#lmh">Abbreviating drive and density</a>
<li><a href="#Remote">Accessing a remote drive</a>
<li><a href="#force-local">Inhibiting remote access</a>
<li><a href="#rsh-command">Selecting the remote access mechanism</a>
<li><a href="#rmt%20invocation">How <code>rmt</code> works</a>
</ul>
<li><a href="#Selecting%20Archive%20Members">Selecting archive members</a>
<ul>
<li><a href="#files-from">Reading names from a file</a>
<li><a href="#find%20with%20files-from">Using <code>find</code> to generate a list of files</a>
<li><a href="#null"><code>NUL</code> terminated file names</a>
<li><a href="#quick">Trading speed versus duplicate entries</a>
</ul>
<li><a href="#Exclusions">Excluding files by name</a>
<ul>
<li><a href="#exclude">Excluding some files</a>
<li><a href="#exclude-from">Handling a lot of exclusions</a>
<li><a href="#Wildcards">Wildcard patterns and matching</a>
<li><a href="#Problems%20with%20exclude">Problems with using the <code>exclude</code> options</a>
</ul>
<li><a href="#Time%20criteria">Time based exclusions</a>
<ul>
<li><a href="#after-date">Operating only on new files</a>
<li><a href="#newer-mtime">Operating only on altered files</a>
</ul>
<li><a href="#Walking">Walking through directories</a>
<ul>
<li><a href="#no-recursion">Descending into directories</a>
<li><a href="#one-file-system">Crossing filesystem boundaries</a>
</ul>
<li><a href="#Relative">Relative notations for file names</a>
<ul>
<li><a href="#directory">Changing the working directory</a>
<li><a href="#absolute-names">Absolute file names</a>
</ul>
</ul>
<li><a href="#Formats">Controlling the archive format</a>
<ul>
<li><a href="#Portability">Making <code>tar</code> archives more portable</a>
<ul>
<li><a href="#Portable%20names">Portable names</a>
<li><a href="#dereference">Symbolic links</a>
<li><a href="#old-archive">Old V7 archives</a>
<li><a href="#posix"><code>tar</code> and POSIX <code>tar</code></a>
<li><a href="#Checksumming">Checksumming problems</a>
</ul>
<li><a href="#Forced%20fields">Options to preset file attributes</a>
<ul>
<li><a href="#mode">Presetting permissions</a>
<li><a href="#owner">Forcing a given owner</a>
<li><a href="#group">Forcing a given group</a>
<li><a href="#numeric-owner">Using numeric owner and group</a>
</ul>
<li><a href="#Compression">Using less space through compression</a>
<ul>
<li><a href="#Archive%20compression">Compressing the whole archive</a>
<ul>
<li><a href="#gzip">Using <code>gzip</code> compression</a>
<li><a href="#compress">Using <code>compress</code> compression</a>
<li><a href="#use-compress-program">Using other compression programs</a>
</ul>
<li><a href="#Member%20compression">Compressing individual members</a>
<ul>
<li><a href="#sparse">Archiving sparse files</a>
</ul>
</ul>
<li><a href="#Other%20formats">Other non-<code>tar</code> formats</a>
<ul>
<li><a href="#cpio">Comparison of <code>tar</code> and <code>cpio</code></a>
<li><a href="#zip">Comparison of <code>tar</code> and <code>zip</code></a>
</ul>
</ul>
<li><a href="#Media">Tapes and other archive media</a>
<ul>
<li><a href="#Blocking">Blocking</a>
<ul>
<li><a href="#Blocks%20and%20records">Blocks and records</a>
<li><a href="#blocking-factor">Setting the blocking factor</a>
<li><a href="#record-size">Setting a record size</a>
<li><a href="#Media%20types">Per-Media blocking considerations</a>
<li><a href="#Reblocking">Automatic reblocking</a>
</ul>
<li><a href="#Many%20on%20one">Many archives on one tape</a>
<ul>
<li><a href="#Tape%20positioning">Tape positions and tape marks</a>
<li><a href="#mt%20invocation">The <code>mt</code> utility</a>
</ul>
<li><a href="#One%20on%20many">Using multiple tapes</a>
<ul>
<li><a href="#Multi-volume%20archives">Archives longer than one tape or disk</a>
<li><a href="#multi-volume">Using multi-volume mode</a>
<li><a href="#tape-length">Announcing the tape length</a>
<li><a href="#info-script">Taking actions at volume switching</a>
<li><a href="#volno-file">Changing the volume number in prompts</a>
</ul>
<li><a href="#Being%20careful">Being even more careful</a>
<ul>
<li><a href="#label">Including labels in the archive</a>
<li><a href="#verify">Verifying data as it is stored</a>
<li><a href="#Write%20protection">Write protection</a>
</ul>
<li><a href="#Other%20tape%20considerations">Other tape considerations</a>
</ul>
<li><a href="#Backups">Performing backups and restoring files</a>
<ul>
<li><a href="#incremental%20listed-incremental">The incremental options</a>
<ul>
<li><a href="#incremental">Backing up without a snapshot list</a>
<li><a href="#listed-incremental">Backing up with a snapshot list</a>
</ul>
<li><a href="#Backup%20levels">Levels of backups</a>
<ul>
<li><a href="#Full%20dumps">Using <code>tar</code> to perform full dumps</a>
<li><a href="#Incremental%20dumps">Using <code>tar</code> to perform incremental dumps</a>
</ul>
<li><a href="#Backup%20parameters">Setting parameters for backups and restoration</a>
<ul>
<li><a href="#backup-specs%20example">An example text of <code>backup-specs</code></a>
<li><a href="#Script%20syntax">Syntax for <code>backup-specs</code></a>
</ul>
<li><a href="#Scripted%20backups">Using the backup scripts</a>
<li><a href="#Scripted%20restoration">Using the restore script</a>
</ul>
<li><a href="#All%20options">All <code>tar</code> options</a>
<ul>
<li><a href="#Subcommand%20summary">Subcommands</a>
<li><a href="#Option%20summary"><code>tar</code> options</a>
<li><a href="#Short%20option%20summary">Short options cross-reference</a>
</ul>
<li><a href="#Date%20input%20formats">Date input formats</a>
<ul>
<li><a href="#General%20date%20syntax">General date syntax</a>
<li><a href="#Calendar%20date%20item">Calendar date item</a>
<li><a href="#Time%20of%20day%20item">Time of day item</a>
<li><a href="#Timezone%20item">Timezone item</a>
<li><a href="#Day%20of%20week%20item">Day of week item</a>
<li><a href="#Relative%20item%20in%20date%20strings">Relative item in date strings</a>
<li><a href="#Pure%20numbers%20in%20date%20strings">Pure numbers in date strings</a>
<li><a href="#Authors%20of%20getdate">Authors of <code>getdate</code></a>
</ul>
<li><a href="#Archive%20format">Format of archive files</a>
<ul>
<li><a href="#tar-h">The C description of a header block</a>
<li><a href="#Standard%20format">The standard format</a>
<li><a href="#Extended%20format">Extensions to the archive format</a>
</ul>
<li><a href="#Index">Index</a>
</ul>

<hr><h4>Footnotes</h4>
<ol type="1">
<li><a name="fn-1"></a>
<p>In addition, archives record access
permissions, user and group, size in bytes, and last modification time. 
Some archives also record the file names in each archived directory, as
well as other file and directory information.</p>

<li><a name="fn-2"></a>
<p>In 1988-03, Jay
Fenlason was notified of the impending existence of this <code>prefix</code>
field.  As J&ouml;rg Schilling (the <code>star</code> author)
once put it: <cite>I would call this a hard violation of the standard.</cite></p>

<li><a name="fn-3"></a>
<p>In 1992, an enthusiastic teacher and his students
promised a new <code>tar</code> to the FSF, including curses, Athena and Motif
interfaces, wholly automated archives, multi-platform parallel tapes, all
backup formats, etc.  The FSF got totally seduced, and stopped all <code>tar</code>
development and most maintenance while waiting for the Wonder, which of
course, never came.</p>

<li><a name="fn-4"></a>
<p>Readers often infer the author
of a program from the author of its manual.  The current distribution, and
even its documentation, is still in the spirit of the original <code>PD&nbsp;TAR</code> incentive.  So, although many people contributed, John Gilmore remains
the real spiritual author for this package.</p>

<li><a name="fn-5"></a>
<p>Even
though John Gilmore is the original author of <code>tar</code>, as he is no
longer actively involved in its maintenance, he now prefers to be left
out of <code>paxutils</code>-related email.</p>

<li><a name="fn-6"></a>
<p>The message used to be
"Error exit delayed from previous errors", but many users complained
they did not understand what this means, so we changed the message.</p>

<li><a name="fn-7"></a>
<p><code>tar</code> once had a complex
system of exit codes, which became unreliable over time, forcing a great
cleanup in version 1.11.8.</p>

<li><a name="fn-8"></a>
<p>This clever recipe has been communicated by Brendan O'Dea.</p>

<li><a name="fn-9"></a>
<p>Be aware that if you run <code>tar</code> with
a unique abbreviation for the long name of an option you didn't want to
use, you are stuck; <code>tar</code> will perform the command as ordered.</p>

<li><a name="fn-10"></a>
<p>Clustering many options, the last of which
has an argument, is a rather opaque way to write options.  Some wonder if
GNU <code>getopt</code> should not even be made helpful enough to reject
such usages as invalid.</p>

<li><a name="fn-11"></a>
<p>Beware that if you precede options
with a dash, you are announcing the short option style instead of the
old option style; short options are decoded differently.</p>

<li><a name="fn-12"></a>
<p>Before
<code>tar</code> version 1.11.6, a bug prevented intermixing old-style options
with long options in some cases.</p>

<li><a name="fn-13"></a>
<p>There
are plans to merge the <code>cpio</code> and <code>tar</code> packages into a single one
which would be called <code>paxutils</code>.  So, who knows if, one of this days,
the <kbd>-version</kbd> would not yield <code>tar&nbsp;(Free&nbsp;paxutils)&nbsp;3.2</code>.</p>

<li><a name="fn-14"></a>
<p>Currently, <kbd>-update</kbd> (<kbd>-u</kbd>) might be seen as
either a subcommand or a fine-tuning option, depending on how it is used.</p>

<li><a name="fn-15"></a>
<p>You can revert to the old behavior by defining
<code>USE_OLD_CTIME</code> in <code>src/list.c</code> before reinstalling <code>tar</code>.</p>

<li><a name="fn-16"></a>
<p>This
is well described in <cite>The Unix-Hater's Handbook</cite> by Simson Garfinkel,
Daniel Weise, and Steven Strassmann, IDG Books, ISBN 1-56884-203-1.</p>

<li><a name="fn-17"></a>
<p>This is at least the case
of the current <code>paxutils</code> maintainer!</p>

<li><a name="fn-18"></a>
<p>It was not possible to
intermix <kbd>-files-from=<var>file-of-names</var></kbd> (<kbd>-T <var>file-of-names</var></kbd>) and names on a command line, with <code>tar</code>
version 1.12 and earlier versions.</p>

<li><a name="fn-19"></a>
<p>This draining feature has been added, a while ago,
to avoid spurious diagnostics about broken pipes.  From the number of bug
reports received about such diagnostics, it is clear that they do annoy
users.</p>

<li><a name="fn-20"></a>
<p>For the literate programmer, suffice to say
that wildcarding is achieved through the <code>fnmatch</code> library routine,
used without flags for labels, or with <code>FNM_LEADING_DIR</code> for excludes.</p>

<li><a name="fn-21"></a>
<p>Do not try using <kbd>-C</kbd>
and the directory on the same input line, separated with some white space. 
this will not work.  You have to put <kbd>-C</kbd> alone on its line, followed
by the directory alone on its line.</p>

<li><a name="fn-22"></a>
<p>It is so sad that <code>ecc</code> had
to be withdrawn because of a serious, unrepairable algorithmic flaw.</p>

<li><a name="fn-23"></a>
<p>This quote
comes from a reply from Elizabeth, after someone <em>falsely</em> attributed
to her the sentence: <cite>One has to be pretty intimate with the disk,
to know where the holes are <small>...</small></cite></p>

<li><a name="fn-24"></a>
<p>Well! 
When <kbd>-sparse</kbd> (<kbd>-S</kbd>) is selected while creating an archive, the current
<code>tar</code> algorithm requires sparse files to be read twice, not once. 
We hope to develop a new archive format for saving sparse files in which
one pass will be sufficient.</p>

<li><a name="fn-25"></a>
<p>The term <dfn>logical block</dfn>
often represents the basic chunk of allocation of many disk blocks as
a single entity, which the operating system treats somewhat atomically;
this concept is used seldom if at all in <code>tar</code>.</p>

<li><a name="fn-26"></a>
<p>The term <dfn>logical record</dfn> refers
to the logical organization of many characters into something meaningful
to the application.  The term <dfn>unit record</dfn> describes a small set
of characters which are transmitted whole to or by the application, and
often refers to a line of text.  Those two last terms are unrelated to
what we call a <dfn>record</dfn> in <code>tar</code>.</p>

<li><a name="fn-27"></a>
<p>Prior to <code>tar</code> 1.12, unblocking
or reblocking did not occur unless the <kbd>-compress-block</kbd> option (or even
older: <kbd>-block-compress</kbd>) was given.  Such options are now obsolete.</p>

<li><a name="fn-28"></a>
<p>Previous versions
of <code>tar</code> used full regular expression matching, or before that, only
exact string matching, instead of wildcard matching.  We decided for the
sake of simplicity to use a uniform matching device throughout <code>tar</code>.</p>

</ol><hr>

</body></html>
